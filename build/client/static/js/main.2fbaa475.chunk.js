(this["webpackJsonptiro-client"]=this["webpackJsonptiro-client"]||[]).push([[2],{113:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var o=t(14),c=t(22);function a(e,n){var t=Object(c.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(o){return console.log(o),n}})),a=Object(o.a)(t,2),r=a[0],i=a[1];return[r,function(n){try{var t=n instanceof Function?n(r):n;i(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(o){console.log(o)}}]}},116:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var o=t(0),c=t(1),a=t(4),r=t(5),i=t(22),l=t.n(i),s=t(395),u=t(396),d=t(19),p=function(e){Object(a.a)(t,e);var n=Object(r.a)(t);function t(){return Object(o.a)(this,t),n.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return Object(d.c)(s.a,{icon:u[this.props.name],color:this.props.color||"black",size:this.props.size||"1x"})}}]),t}(l.a.Component)},123:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t(131),c=t.n(o),a=t(157),r={img:c()().find(".").then("jpg").or("jpeg").or("png").or("gif").or("webm").or("svg"),imgMdConfig:c()().anythingBut("[]|").maybe("|").beginCapture().anythingBut("[]|").endCapture().maybe("|").beginCapture().anythingBut("[]|").endCapture()},i={metas:c()().find(a.a.metas.headerStart).beginCapture().anythingBut("").endCapture().then(a.a.metas.headerEnd),baliseHtml:c()().find("<").anythingBut("<>").then(">"),ressource:c()().find("![").beginCapture().anythingBut("[]").endCapture().then("](").beginCapture().anythingBut("()").endCapture().then(")"),ref:c()().find("[").anythingBut("[]").then("](").anythingBut("()").then(")"),extimage:c()().find("![").anythingBut("[]").then("](").beginCapture().then("http").anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),image:c()().find("![").anythingBut("[]").then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),imageAndTitleCapture:c()().find("![").beginCapture().anythingBut("[]").endCapture().then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),imageAndConfig:c()().find("![").then(r.imgMdConfig).then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),searchlink:c()().find("[search|").beginCapture().anythingBut("[]").endCapture().then("]"),linklink:c()().find("[link|").beginCapture().anythingBut("[]").endCapture().then(" ").beginCapture().then("/").anythingBut("[]").endCapture().then("]"),url2transform:c()().find("!").beginCapture().find("http").maybe("s").then("://").beginCapture().anything().endCapture().endCapture(),searchFolder:c()().find(" /").anything().endOfLine(),searchFolderNoSpace:c()().find("/").anything().endOfLine(),firstPartImg:c()().find("![").anythingBut("[]").then("](")}},143:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return i}));var o=t(125),c=t(22),a=t(19),r=function(e){var n,t=Object(o.a)({},e).value,r=Object(c.useRef)(),i=function(){e.shouldFocus&&r.current.focus()};return Object(c.useEffect)((function(){i()}),[e.shouldFocus]),Object(c.useEffect)((function(){i()}),[]),Object(a.c)("div",{className:"input-component ".concat(e.id?e.id:""," ").concat(e.type)},e.label&&Object(a.c)("span",null,e.label," :"),Object(a.c)("div",{className:"input-wrapper"},"select"!==e.type&&Object(a.c)("input",{ref:r,type:e.type?e.type:"text",value:e.value,onFocus:function(){e.onFocus&&e.onFocus()},onClick:function(){r.current.select()},onKeyPress:function(n){"Enter"==(n.code||n.key)&&e.onEnterPressed&&e.onEnterPressed()},onChange:function(n){e.onChange&&e.onChange(n.target.value)}}),"select"===e.type&&Object(a.c)("select",{value:e.value,onChange:function(n){e.onSelectChange&&e.onSelectChange(n.target.value)}},null===(n=e.list)||void 0===n?void 0:n.map((function(e,n){return Object(a.c)("option",{value:e.key,selected:t===e.key},e.label," ")}))),e.explanation&&Object(a.c)("div",{className:"explanation"}," ",e.explanation," ")))},i="\n    .input-component {\n        display: flex;\n        align-items: center;\n        padding-bottom: 10px;\n        input, select {\n            max-width: 100%;\n        }\n        &.select {\n            span {\n                width: 20%;\n            }\n        }\n        span {\n            width: 30%;\n            font-weight: 700;\n            text-transform: uppercase;\n        }\n        .input-wrapper {\n            width: 70%;\n            input {\n                padding: 7px;\n                border: none;\n                background: #ececec;\n                border-radius: 5px;\n            }\n            .explanation {\n                font-size: 11px;\n                color: grey;\n            }\n        }\n    }\n"},147:function(e,n,t){"use strict";t.d(n,"f",(function(){return i})),t.d(n,"e",(function(){return l})),t.d(n,"d",(function(){return s})),t.d(n,"a",(function(){return u})),t.d(n,"c",(function(){return d})),t.d(n,"b",(function(){return p}));var o=t(157),c=t(123),a=t(195),r=t(52),i=function(e){var n='<a class="external-link preview-link" href="#" '.concat("onclick=\"window.open('$1','$1','width=600,height=600');\"",">$2</a>");return e.replace(c.a.url2transform,n)},l=function(e){return e.replace(c.a.linklink,"<a class=\"title-search-link preview-link\" href=\"javascript:window.tiroCli.searchFileFromTitle.func('$1','$2');\">$1</a>")},s=function(e){var n=e.replace(c.a.searchlink,'<a class="search-link preview-link" href="javascript:window.tiroCli.triggerSearch.func(\'$1$2\');">$1</a>');return n=Object(a.a)(n,[[">[__id_",">["],[">[__tags_",">["],[">[__tag_",">["],[" ]</a>","]</a>"]])},u=function(e){var n=e.replace("".concat(Object(r.c)(),"/").concat(o.a.path.staticResources,"/"),""),t="".concat(Object(r.c)(),"/").concat(o.a.path.staticResources,"/").concat(n);return e.startsWith("http")?e:t},d=function(e,n){var t="".concat(u(e),"/$2"),o="onclick=\"window.open('".concat(t,"','popupdl','width=800,height=1000');\""),a='<a class="resource-link preview-link" href="#" '.concat(o,">$1</a>");return n.replace(c.a.ressource,a)},p=function(e,n){n=n.replace(c.a.extimage,'<img class="content-image" src="$1"  />');var t='<img class="content-image" style="'.concat("\n        width: $1px;\n        max-width: 100%;\n        // min-height: $1px;\n        transform: rotate($2deg);\n    ",'" src="').concat(u(e),'/$3"  />');return n.replace(c.a.imageAndConfig,t)}},153:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return p}));var o=t(125),c=t(22),a=t.n(c),r=t(289),i=t(36),l=t(116),s=t(19),u=function(e){var n=Object(o.a)({},e),t=n.colors,c=n.size,a=Object(r.a)("button.toolbar-button{&.active{svg{color:",t?t[1]:i.a.colors.main,";}}svg{transform:scale(",c||1.3,");color:",t?t[0]:i.a.colors.editor.interfaceGrey,";&:hover{color:",t?t[1]:i.a.colors.main,";}}}","");return Object(s.c)("div",{className:a},Object(s.c)("ul",{className:"buttons-toolbar-component ".concat(e.class)},e.buttons.map((function(e,n){return e.action&&Object(s.c)("li",{title:e.title,key:n},Object(s.c)(d,e))}))))},d=function(e){var n=Object(s.c)(a.a.Fragment,null);e.title&&(n=Object(s.c)(a.a.Fragment,null,e.title)),e.icon&&(n=Object(s.c)(l.a,{name:e.icon})),e.customHtml&&(n=e.customHtml);var t="toolbar-button ".concat(e.class&&e.class," ").concat(e.active&&"active");return Object(s.c)("button",{className:t,onClick:function(n){e.action&&e.action(n)}},n)},p="\n    ul.buttons-toolbar-component {\n        display: flex;\n        list-style: none;\n        padding: 0px;\n        margin: 0px;\n        button.toolbar-button {\n            ".concat(i.a.els.button,";\n            cursor: pointer;\n        }\n    }\n")},157:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var o={tokenRefreshInHours:96,path:{staticResources:"static"},metas:{headerStart:"=== HEADER ===",headerEnd:"=== END HEADER ==="}}},166:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var o=t(0),c=t(1),a=t(4),r=t(5),i=t(154),l=t(22),s=t.n(l),u=t(36),d=t(48),p=t(19),f=function(e){Object(a.a)(t,e);var n=Object(r.a)(t);function t(){return Object(o.a)(this,t),n.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return Object(p.c)(b,null,Object(p.c)("div",{className:"overlay-click-popup",onClick:function(n){e.props.onClose()}}),Object(p.c)("div",{className:"popup-wrapper ".concat(Object(d.c)()?"ipad":"")},Object(p.c)("div",{className:"popupTitle"}," ",this.props.title),Object(p.c)("div",{className:"popupContent"},this.props.children)))}}]),t}(s.a.Component),b=Object(i.a)("div",{target:"e1rdg440"})(".overlay-click-popup{position:fixed;z-index:1000;top:0px;left:0px;width:100vw;height:100vh;background:rgba(0,0,0,0.1);}.popup-wrapper{position:fixed;z-index:1001;left:50%;top:50%;width:auto;max-width:90%;transform:translate(-50%,-50%);background:white;border-radius:6px;box-shadow:0px 0px 5px rgba(0,0,0,.2);&.ipad{top:20%;}.popupTitle{margin:0px 0px 20px 0px;text-align:left;background:",u.a.colors.main,";color:white;font-weight:700;text-transform:uppercase;font-size:14px;padding:5px 0px 5px 20px;border-radius:6px 6px 0px 0px;}.popupContent{padding:0px 20px 20px 20px;}img{padding:0px 5px 0px 0px;margin:5px 5px 0px 0px;}}")},167:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var o=t(14),c=t(22),a=t.n(c),r=t(64),i=t(113),l=t(178),s=t(19),u=function(e,n){var t=Object(i.a)("showRenderId",!1),u=Object(o.a)(t,2),d=u[0],p=u[1];Object(l.a)("toggleRenderId",{description:"toggle display of renderId for each block",func:function(){console.log("[toggleRenderId]"),p(!d),setTimeout((function(){window.location.reload()}),1e3)}});var f=Object(r.random)(0,1e3);return Object(c.useMemo)((function(){var n=(new Date).getTime(),t=(new Error).stack,o=(null===t||void 0===t||t.split("\n")[6].replace("at ","").replace(/\(.*\)/gi,"").trim(),Object(s.c)(a.a.Fragment,null,d&&Object(s.c)("p",{style:{position:"absolute",fontSize:"10px",color:"rgba(255,0,0,0.8)"}},f),e));(new Date).getTime();return o}),n)}},178:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var o={},c=function(e,n){o[e]=n};window.tiroCli=o},183:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var o=t(50),c=function(e){var n=((new Date).getTime()-e.getTime())/1e3,t=604800,c="";if(n<=3600)c="".concat(Math.ceil(n/60)," ").concat(o.a.minsAgo);else if(n>3600&&n<=86400)c="".concat(Math.ceil(n/3600)," ").concat(o.a.hoursAgo);else if(n>86400&&n<=t)c="".concat(Math.ceil(n/86400)," ").concat(o.a.daysAgo);else if(n>t){var a=("0"+e.getDate()).slice(-2),r=o.a.months[e.getMonth()],i=e.getFullYear().toString();c="".concat(a," ").concat(r," ").concat(i)}return c}},188:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return r}));var o=t(97),c=t(203),a=function(e){var n={title:e.realname,folder:e.folder,mobileview:"editor"},t="".concat(o.a.global.protocol).concat(o.a.global.url).concat(o.a.global.port,"?").concat(Object(c.d)(n));window.open(t,"popupDetached","width=600,height=600")},r=function(e){return{title:"detach in new window",icon:"faExternalLinkAlt",action:function(){a(e)}}}},195:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return c}));var o=function(e){return e.replace(/[^\w\s]/gi,"")},c=function(e,n){for(var t=0;t<n.length;t++){var o=n[t];e=e.split(o[0]).join(o[1])}return e}},198:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var o=t(22),c=function(e,n){var t=Object(o.useRef)();Object(o.useEffect)((function(){t.current=e}),[e]),Object(o.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){return clearInterval(e)}}}),[n])}},200:function(e,n,t){"use strict";t.d(n,"c",(function(){return o})),t.d(n,"d",(function(){return g})),t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return h}));var o,c=t(0),a=t(1),r=t(4),i=t(5),l=t(154),s=t(22),u=t.n(s),d=t(400),p=t(36),f=t(397),b=t(19);var g=function(){if(o){o.setSelection({endColumn:0,endLineNumber:0,startColumn:0,startLineNumber:0})}},m=function(e){Object(r.a)(t,e);var n=Object(i.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).reactComp=void 0,a.vimStatusBar=void 0,a.editor=void 0,a.monaco=void 0,a.editorDidMount=function(e,n){a.props.vimMode&&(console.log("[MONACO EDITOR] vim mode started",a.vimStatusBar.current),Object(f.initVimMode)(e,a.vimStatusBar.current)),a.editor=e,a.monaco=n,o=e,e.onDidScrollChange((function(e){a.props.onScroll(e.scrollTop)})),window.monaco=n,n.editor.defineTheme("customLightTheme",{base:"vs",inherit:!0,rules:[{foreground:p.a.colors.editor.font}],colors:{"editor.foreground":"red"}}),n.editor.setTheme("customLightTheme")},a.getCurrentLineInfos=function(){var e=a.editor.getPosition(),n=a.editor.getValue(e).split("\n"),t=n.slice(0,e.lineNumber-1).join("\n").length+e.column-1;return{monacoPosition:a.editor.getPosition(),lines:n,currentPosition:t,activeLine:n[e.lineNumber-1],lineIndex:e.lineNumber-1}},a.reactComp=u.a.createRef(),a.vimStatusBar=u.a.createRef(),a}return Object(a.a)(t,[{key:"shouldComponentUpdate",value:function(e,n,t){return this.props.posY===e.posY&&this.props.value===e.value||this.editor.setScrollPosition({scrollTop:this.props.posY}),!0}},{key:"render",value:function(){var e=this;return Object(b.c)(O,null,Object(b.c)("div",{className:"vim-status-bar ".concat(this.props.vimMode?"active":""),ref:this.vimStatusBar}),Object(b.c)(d.a,{ref:this.reactComp,width:"100%",height:"100%",language:"markdown",theme:"vs",value:this.props.value,options:{fontFamily:p.a.font.editor,readOnly:this.props.readOnly,quickSuggestions:!1,automaticLayout:!0,selectOnLineNumbers:!0,minimap:{enabled:!1},wordWrap:"on",fontSize:12,mouseWheelScrollSensitivity:.5,lineNumbers:"off",folding:!1,scrollbar:{handleMouseWheel:!0,verticalScrollbarSize:0}},editorDidMount:this.editorDidMount,onChange:function(n){e.props.onChange(n)}}))}}]),t}(u.a.Component),h='\n  [class^="mtk"]:not(.mtk1) {\n    // color: '.concat(p.a.colors.main,";\n    font-weight: 800;\n  }\n  .mtk6 {color: ").concat(p.a.colors.main,";}\n  .mtk21 {color: ").concat(p.a.colors.main,";}\n\n  .mtk10 {color: ").concat(p.a.colors.compl[1],";} // () =>\n  .mtk8 {color: ").concat(p.a.colors.compl[0],";} // comments\n  .mtk7 {color: ").concat(p.a.colors.compl[0],";}  //  = 0o775\n  .mtk23 {color: ").concat(p.a.colors.compl[0],";} // Promise\n\n  // .mtk10 {color: ").concat(p.a.colors.dev[1],";} // () =>\n  // .mtk8 {color: ").concat(p.a.colors.dev[2],";} // comments\n  // .mtk7 {color: ").concat(p.a.colors.dev[2],";}  //  = 0o775\n  // .mtk23 {color: ").concat(p.a.colors.dev[2],";} // Promise\n\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  // .mtk6 {\n  //   color: ").concat(p.a.colors.main,";\n  // }\n  .monaco-editor .scroll-decoration {\n    box-shadow: none;\n  }\n"),O=Object(l.a)("div",{target:"e1et4ttg0"})({name:"10zbdyj",styles:"height:100vh;.scroll-wrapper{width:100%;height:100%;}.vim-status-bar{display:none;position:fixed;bottom:0px;height:18px;padding:5px 5px 7px 5px;width:80%;z-index:1;background:rgba(255,255,255,0.9);&.active{display:block;}input{background:#eeeeee;border:none;margin:0px 5px;}}"})},203:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return l})),t.d(n,"d",(function(){return s})),t.d(n,"c",(function(){return u}));var o=t(64),c=t(97),a=t(48),r={},i=function(e){window.onpopstate=function(){var n=l();JSON.stringify(n)!==JSON.stringify(r)&&(r=n,console.log("[URL CHANGE DETECTED]",n),e.onUrlParamsChange(n))}},l=function(){var e={},n=window.location.search,t=new URLSearchParams(n);return e.search=t.get("search")||void 0,e.file=t.get("file")?parseInt(t.get("file")):void 0,e.folder=t.get("folder")||void 0,e.title=t.get("title")||void 0,e.appview=t.get("appview")||void 0,e.mobileview=Object(a.d)(t.get("mobileview"))?t.get("mobileview"):void 0,e},s=function(e){var n="",t=0;for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&e[o]&&(n+="".concat(0===t?"":"&").concat(o.toLowerCase(),"=").concat(e[o]),t++);return n},u=function(e){var n="".concat(c.a.global.protocol).concat(c.a.global.url).concat(c.a.global.port,"/?");Object(o.isNumber)(e.file)&&-1!==e.file&&(n+="file=".concat(e.file,"&")),e.title&&(n+="title=".concat(e.title,"&")),e.folder&&""!==e.folder&&!e.search&&(n+="folder=".concat(e.folder,"&")),e.folder||e.search||(n+="folder=/&"),e.search&&""!==e.search&&(n+="search=".concat(e.search,"&")),e.appview&&(n+="appview=".concat(e.appview,"&")),window.history.pushState({},document.title,n),console.log("[URL] update url to ".concat(JSON.stringify({newUrl:n,urlParams:e})))}},215:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"a",(function(){return p}));var o=t(14),c=t(154),a=t(22),r=t(113),i=t(50),l=t(166),s=t(143),u=t(19);var d=function(e){var n;return null===(n=localStorage.getItem("settings-".concat(e)))||void 0===n?void 0:n.replaceAll('"',"")},p=function(e){var n=Object(r.a)("settings-backend-port",-1),t=Object(o.a)(n,2),c=t[0],d=t[1],p=Object(r.a)("settings-backend-protocol","same"),b=Object(o.a)(p,2),g=b[0],m=b[1],h=i.a.settingsPopup,O=[{title:h.backend.title,fields:[{type:"text",var:c,title:h.backend.port,expl:h.backend.portExpl,modifier:d},{type:"text",var:g,title:h.backend.protocol,expl:h.backend.protocolExpl,modifier:m}]}];return Object(a.useEffect)((function(){}),[]),Object(u.c)(f,null,Object(u.c)(l.a,{title:"".concat(h.title),onClose:function(){e.onClose()}},O.map((function(e){return Object(u.c)("div",{className:"settings-panel"},Object(u.c)("h3",null,e.title),e.fields.map((function(e){return Object(u.c)("div",{className:"field-wrapper"},Object(u.c)(s.a,{value:e.var,label:e.title,type:e.type,onChange:function(n){console.log("[SETTINGS] frontend setting ".concat(e.title," changed for ").concat(n)),e.modifier(n)}}))})))}))))},f=Object(c.a)("div",{target:"e1g771890"})({name:"rvko2c",styles:".popup-wrapper .popupContent{padding:20px;}.buttons{display:flex;padding:20px 0px 0px 0px;button{width:30%;padding:10px;}}"})},231:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var o=t(64),c=t.n(o),a=t(22);function r(e,n){var t=Object(a.useRef)(e),o=function(){var e=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),function(){return e.current}}();return Object(a.useEffect)((function(){t.current={cb:e,delay:n}})),Object(a.useCallback)(c.a.debounce((function(){var e;t.current.delay===n&&o()&&(e=t.current).cb.apply(e,arguments)}),n,{leading:!1,trailing:!0}),[n,c.a.debounce])}},235:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return previewAreaRefs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return PreviewArea})),__webpack_require__.d(__webpack_exports__,"b",(function(){return previewAreaCss}));var _Users_gregoirethiebault_Desktop_dev_github_tiro_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(183),_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(48),_managers_markdown_manager__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(286),_managers_string_manager__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(195),_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(36),_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(147),_EditorArea_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(236),_emotion_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19),previewAreaRefs,PreviewArea=function(e){previewAreaRefs={wrapper:Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),main:Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null)};var n=e.file.path.split("/");n.pop();var t=n.join("/");Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){return window.previewHtmlOutput="",function(){}}),[e.file.path]);var o=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)("right"),c=Object(_Users_gregoirethiebault_Desktop_dev_github_tiro_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,2),a=c[0],r=c[1];return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"preview-area-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"preview-area",ref:previewAreaRefs.wrapper,style:{bottom:function(){var n,t=(null===(n=previewAreaRefs.wrapper.current)||void 0===n?void 0:n.height)||3e3;return Object(lodash__WEBPACK_IMPORTED_MODULE_1__.clamp)(e.posY,0,t)}()}},"desktop"!==Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.a)()&&Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"mobile-buttons-up-down ".concat(a)},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{id:"toggle-pos",onClick:function(){r("right"===a?"left":"right")}},"t"),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{id:"top",onClick:function(){previewAreaRefs.wrapper.current.scrollTop=0}},"="),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{id:"up",onClick:function(){previewAreaRefs.wrapper.current.scrollTop-=300}},"^"),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{id:"down",onClick:function(){previewAreaRefs.wrapper.current.scrollTop+=300}},"v")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"infos-preview-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"file-path-wrapper"},e.file.path.replace("/".concat(e.file.name),"")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("h1",{className:"title big-title"},e.file.name.replace(".md","")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"dates-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"date modified"},"modified: ",Object(_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__.a)(new Date(e.file.modified||0))),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"date created"},"created: ",Object(_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__.a)(new Date(e.file.created||0))))),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)(PreviewRenderer,{filecontent:e.fileContent,currentFolder:t})))},previewAreaCss=function(e){return"\n.preview-area-wrapper {\n    overflow: ".concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.c)()||Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("mobile")?"scroll":"hidden",";\n    height: ").concat((Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop"),"100vh"),";\n    margin-top: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"140":"0","px;\n}\n.preview-area {\n    position: relative;\n    display: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"block":"editor"===e?"none":"block",";\n    padding: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"0px ".concat(3*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.sizes.block,"px 0px ").concat(3*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.sizes.block/2,"px"):"0px ".concat(2*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.sizes.block,"px"),";\n    // overflow: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.c)()?"scroll":"hidden",";\n\n    ").concat(_EditorArea_component__WEBPACK_IMPORTED_MODULE_9__.b,"\n\n    .infos-preview-wrapper {\n        display: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"none":"block",";\n    }\n\n    .mobile-buttons-up-down {\n        position: fixed;\n        &.right {\n            right: 0px;\n        }\n        &.left {\n            left: 0px;\n        }\n        top: 50%;\n        div {\n            background: #d6d6d6;\n            padding: 15px;\n            opacity: 0.5;\n            color:white;\n            cursor: pointer;\n        }\n    }\n\n    .title {\n        margin: 0px 0px;\n    }\n\n    .dates-wrapper {\n        margin-bottom: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.sizes.block,"px;\n    }\n\n    color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.colors.editor.font,";\n    h1, h2, h3, h4, h5, h6 {\n        color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.colors.main,";\n    }\n    .preview-link {\n      font-weight: 800;\n      \n      background-repeat: no-repeat;\n      background-position: 4px 2px;\n      padding-left: 20px;\n      background-size: 10px;\n      \n      &.external-link {\n        background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.assets.worldIcon,");\n        }\n        &.search-link {\n            color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.colors.main,";\n            background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.assets.searchIcon,");\n        }\n        &.title-search-link {\n            color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.colors.main,";\n            background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.assets.linkIcon,");\n        }\n        &.resource-link {\n          color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.colors.main,";\n        background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.assets.fileIcon,");\n      }\n\n    }\n\n    img,\n    .content-image {\n        ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_7__.a.els.images,"\n    }\n\n\n    p {\n        margin-top: 0px;\n        margin-bottom: 1em;\n    }\n    .preview-content {\n\n    }\n    pre {\n      code {\n        display: block;\n        border-radius: 8px;\n        padding: 10px;\n      }\n    }\n  }\n")},PreviewRenderer=react__WEBPACK_IMPORTED_MODULE_2___default.a.memo((function(p){var _document,processRender=function(e){return Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__.c)(p.currentFolder,Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__.b)(p.currentFolder,Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__.d)(Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__.e)(Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_8__.f)(e)))))},regex=new RegExp(/<script>([\s\S]*)<\/script>/gm),match=p.filecontent.match(regex),scriptArea=null===(_document=document)||void 0===_document?void 0:_document.getElementById("preview-script-area");if(scriptArea&&(scriptArea.innerHTML=""),match&&match[0]){var code=Object(_managers_string_manager__WEBPACK_IMPORTED_MODULE_6__.a)(match[0],[["<script>",""],["<\/script>",""]]);console.log(code);try{eval(code),scriptArea&&window.previewHtmlOutput&&(scriptArea.innerHTML=window.previewHtmlOutput)}catch(error){console.log("[EVAL CODE] error :",error)}}return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{id:"preview-script-area"}),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.c)("div",{className:"preview-content",ref:previewAreaRefs.main,dangerouslySetInnerHTML:{__html:Object(_managers_markdown_manager__WEBPACK_IMPORTED_MODULE_5__.a)(processRender(p.filecontent))}}))}))},236:function(e,n,t){"use strict";t.d(n,"a",(function(){return q})),t.d(n,"b",(function(){return $})),t.d(n,"c",(function(){return J}));var o=t(14),c=t(22),a=t(48),r=t(200),i=t(19),l=function(e){var n=Object(c.useState)(""),t=Object(o.a)(n,2),a=t[0],r=t[1],l=Object(c.useState)(!1),s=Object(o.a)(l,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){r(e.title)}),[e.title]),Object(i.c)("div",{className:"title-input-wrapper"},Object(i.c)("input",{className:"big-title",type:"text",value:a,onChange:function(e){var n=e.target.value.replaceAll("/","_");r(n),d(!0)},onKeyDown:function(n){if("Enter"===n.key){if(a.length<3)return;e.onEdited(e.title,a),d(!1)}}}),u&&Object(i.c)("div",{className:"press-to-save"},"press enter to save"))},s=t(64),u=function(e){for(var n=!0,t=0;t<e.length;t++)32!==e[t].charCodeAt(0)&&45!==e[t].charCodeAt(0)&&91!==e[t].charCodeAt(0)&&93!==e[t].charCodeAt(0)&&(n=!1);return n},d=function(e){var n=Object(c.useRef)(0),t=e.editorRef,o=e.editorRef,r=function(){var c,a;"desktop"===e.editorType?(c=null===(a=t.current)||void 0===a?void 0:a.getCurrentLineInfos(),n.current=c.monacoPosition):(c=o.current?function(e){for(var n=e.value.split("\n"),t=e.selectionStart,o=0,c=0;o<t+1;)o+=n[c].length+1,c++;return{currentPosition:t,lines:n,activeLine:n[--c],lineIndex:c}}(o.current):null,n.current=c.currentPosition);return c},i=function(e){var c=n.current+e;if(console.log("resetCursorPosition to ",c),Object(a.b)("desktop")){var r;null===(r=t.current)||void 0===r||r.editor.setPosition(c)}else{var i=o.current;if(!i)return;i.focus(),setTimeout((function(){i&&(i.selectionStart=c,i.selectionEnd=c)}))}};return{getLineTextInfos:r,resetCursorPosition:i,applyTextModifAction:function(e,n){var t=r();return t?function(e,n,t,o){var c=n.lines;if("^"===e){var a=c[n.lineIndex-1],r=c[n.lineIndex];c[n.lineIndex]=a,c[n.lineIndex-1]=r,t(-a.length-1)}if("v"===e){var i=c[n.lineIndex+1],l=c[n.lineIndex];c[n.lineIndex]=i,c[n.lineIndex+1]=l,t(+i.length+1)}if("X"===e){var u=c[n.lineIndex].length;c.splice(n.lineIndex,1),t(-u-1)}"->"===e&&(c[n.lineIndex]="  "+c[n.lineIndex],t(2)),"<-"===e&&(n.activeLine.startsWith("  ")?(c[n.lineIndex]=c[n.lineIndex].substr(2,c[n.lineIndex].length),t(-2)):t(0));var d=n.activeLine.trim();if("[x]"===e&&(d.startsWith("- [ ]")||d.startsWith("- [x]")?d.startsWith("- [ ]")?(c[n.lineIndex]=c[n.lineIndex].replace("[ ]","[x]"),t(0)):d.startsWith("- [x]")?(c[n.lineIndex]=c[n.lineIndex].replace("[x]","[ ]"),t(0)):t(0):(c[n.lineIndex]=c[n.lineIndex].replace(d,"- [ ] "+d.replace("-","")),t(6))),"insertAt"===e&&o&&o.textToInsert&&(Object(s.isNumber)(o.insertPosition)||Object(s.isString)(o.insertPosition))){var p="currentPos"===o.insertPosition?n.currentPosition:o.insertPosition,f=c.join("\n");c=[f.slice(0,p),o.textToInsert,f.slice(p)].join("").split("\n")}return c.join("\n")}(e,t,(function(e){console.log("applyTextModifAction cb charDecal:",e),i(e)}),n):null}}},p=function(e,n){var t=d({editorType:"mobile",editorRef:n.mobileTextarea}),a=t.getLineTextInfos,r=t.resetCursorPosition,i=function(e){var n=Object(c.useState)(0),t=Object(o.a)(n,2),a=t[0],r=t[1];return{saveYTextarea:function(n){var t=e.current?e.current.scrollTop:0;r(n||t)},resetYTextarea:function(){e.current&&(console.log("resetYTextarea",a),e.current.scrollTop=a)}}}(n.mobileTextarea),l=i.saveYTextarea,p=i.resetYTextarea,f=Object(c.useState)(!1),b=Object(o.a)(f,2),g=b[0],m=b[1];Object(s.debounce)((function(){m(!1)}),500);return{onTextareaChange:function(t){console.log("onTextareaChange");var o=t.target.value,c=o[t.target.selectionStart-1]&&o[t.target.selectionStart-1].charCodeAt(0);if(o.length>e.length){var i=a();if(!i)return;o=function(e,n,t){if(10===n){console.log("updateTextFromLetterInput => ENTER PRESSED");var o=e.lines[e.lineIndex-1],c=o.indexOf("- ["),a=o.indexOf("-"),r="";-1!==c&&"- [ ] "!==o?(r=o.substr(0,c+3)+" ] ",u(r)&&(e.lines[e.lineIndex]=r+e.activeLine,t(r.length))):-1!==a&&"- "!==o&&"- [ ] "!==o&&(r=o.substr(0,a+1)+" ",u(r)&&(e.lines[e.lineIndex]=r+e.activeLine,t(r.length)))}return e.lines.join("\n")}(i,c,(function(e){setTimeout((function(){r(e),p()}))}))}n.onMobileNoteEdition(o)},onTextareaScroll:function(e){if(!g){var n=e.target.scrollTop;l(n),console.log("onTextareaScroll")}}}},f="",b=t(198),g=t(154),m=t(166),h=t(50),O=t(36),v=t(143),_=function(e){var n=Object(c.useState)(""),t=Object(o.a)(n,2),a=t[0],r=t[1],l=function(){e.onSubmit(a)};return Object(i.c)(j,null,Object(i.c)(m.a,{title:h.a.passwordForm.explanation,onClose:function(){e.onClose()}},Object(i.c)("div",null,Object(i.c)(v.a,{value:a,label:h.a.setupForm.password,type:"password",shouldFocus:!0,onChange:function(e){r(e)},onEnterPressed:function(){l()}}),Object(i.c)("button",{className:"submit-button",onClick:function(e){l()}},h.a.passwordForm.submit))))},j=Object(g.a)("div",{target:"e16zhrhc0"})(".submit-button{margin-top:10px;",O.a.els.redButton,";padding:10px 20px;}"),x=t(243),w=t.n(x),E=function(e,n){var t=w.a.generateRSAKey(n,1024),o=w.a.publicKeyString(t);return w.a.encrypt(e,o)},k=function(e,n){var t=n.replace(e,"").length,o=n.length;return Math.round(t/o*100)/100},y=function(e){return e>0&&e<=.9},C=function(e){var n=!1,t={nb:k(/[^0-9]/g,e),up:k(/[^A-Z]/g,e),low:k(/[^a-z]/g,e),spe:k(/[^\/\=\?\+]/g,e)},o=y(t.nb)&&y(t.up)&&y(t.low)&&t.spe>0,c=(e.trim().endsWith("==")||e.trim().endsWith("="),/^[a-zA-Z0-9\/\=\?\+]+$/.test(e)),a=e.length>100;return c&&o&&a&&(n=!0),n},T=function(e){var n=Object(c.useState)(null),t=Object(o.a)(n,2),a=t[0],r=t[1],l=Object(c.useState)(!1),s=Object(o.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),b=f[0],g=f[1],m=Object(c.useState)(null),h=Object(o.a)(m,2),O=h[0],v=h[1],j=function(n){var t=e.fileContent,o=E(t,n);if("failure"===o.status)v(null);else{console.log("encryption done",o),d(!1);var c=o.cipher;e.onTextEncrypted(c)}},x=function(n){var t=function(e,n){var t=w.a.generateRSAKey(n,1024);return w.a.decrypt(e,t)}(e.fileContent,n);if("failure"===t.status)v(null),alert("wrong password");else{g(!0),d(!0),console.log("decryption done",t);var o=t.plaintext;e.onTextDecrypted(o)}};return{APasswordPopup:Object(i.c)(_,{onClose:function(){r(null)},onSubmit:function(e){var n=a;r(null),v(e),"toEncrypt"===n&&j(e),"toDecrypt"===n&&x(e)}}),askForPassword:a,decryptButtonConfig:{title:"decrypt text",icon:"faUnlock",action:function(){O?x(O):r("toDecrypt")}},encryptButtonConfig:{title:"encrypt text",icon:"faLock",action:function(){O?j(O):r("toEncrypt")}},ifEncryptOnLeave:function(n){if(u&&O){console.log("[EVENTS EDITOR] shouldEncryptOnLeave");var t=E(e.fileContent,O);t.cipher&&n(t.cipher)}v(null),g(!1)},noHistoryBackupWhenDecrypted:b}},F=t(288),S=t(188),D=t(52),P=t(183),I=t(90),L=function(e){var n=Object(c.useState)([]),t=Object(o.a)(n,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){D.b.emit("askFileHistory",{filepath:e.file.path,token:Object(I.a)()});var n=D.b.on("getFileHistory",(function(e){var n=Object(s.orderBy)(e.files,["created"],["desc"]);r(n)}));return function(){D.b.off(n)}}),[]),Object(i.c)(R,null,Object(i.c)(m.a,{title:"".concat(h.a.historyPopup.title,'"').concat(e.file.realname,'"'),onClose:function(){e.onClose()}},Object(i.c)("div",{className:"table-wrapper"},Object(i.c)("table",null,Object(i.c)("thead",null,Object(i.c)("tr",null,Object(i.c)("th",null,h.a.historyPopup.thead.name),Object(i.c)("th",null,h.a.historyPopup.thead.date))),Object(i.c)("tbody",null,a.map((function(e){return Object(i.c)("tr",{onClick:function(){Object(S.a)(e)}},Object(i.c)("td",null," ",e.realname," "),Object(i.c)("td",null," ",Object(P.a)(new Date(e.created||0))," "))})))))))},R=Object(g.a)("div",{target:"eaah83e0"})(".popup-wrapper .popupContent{padding:0px;}.table-wrapper{max-height:50vh;overflow-y:auto;padding:0px 20px 20px 20px;table{border-spacing:0px;thead{tr{th{padding:8px;}}}tbody{text-align:left;tr{cursor:pointer;background:#f1f0f0;&:nth-child(2n){background:none;}&:hover{background:rgba(",O.a.colors.mainRGB,", 0.2);}td{padding:8px;}}}}}"),M=t(113),A=t(0),N=t(286),B=t(123),U=function(){var e=[];return window.speechSynthesis.getVoices().forEach((function(n,t){e.push({key:t,label:n.name,obj:n})})),e},W=function e(n){var t=this;Object(A.a)(this,e),this.rawText=void 0,this.voice=void 0,this.text2read=void 0,this.chunkedText=void 0,this.chunkLength=160,this.currChunkId=0,this.currSpeechObj=void 0,this.isLoaded=!1,this.shouldStop=!1,this.chunkText=function(e){for(var n=(e=e.replace(/(\r\n\r\n|\n\n|\r\r|\n)/gm,".")).split(/[.!?]+/),o=[],c=0;c<n.length;c++){var a=n[c];if(a.length>t.chunkLength)for(var r=a.split(" "),i="",l=0;l<r.length;l++)((i+=r[l]+" ").length>t.chunkLength||l===r.length-1)&&(o.push(i),i="");else o.push(a)}return console.log(o),o},this.loadVoice=function(e){console.log("[TTS] LOAD VOICE",e),t.voice=e},this.play=function(){if(t.isLoaded)console.log("[TTS] RESUME play chunk ".concat(t.currChunkId)),window.speechSynthesis.resume();else{if(t.currChunkId>t.chunkedText.length-1)return console.log("[TTS] finished played");t.isLoaded=!0,console.log("[TTS] START play chunk ".concat(t.currChunkId),{txt:t.chunkedText[t.currChunkId]}),t.currSpeechObj=new SpeechSynthesisUtterance,t.currSpeechObj.text=t.chunkedText[t.currChunkId],t.voice&&(t.currSpeechObj.voice=t.voice),console.log(t.currSpeechObj),setTimeout((function(){window.speechSynthesis.speak(t.currSpeechObj)}),0),t.currSpeechObj.addEventListener("end",(function(){t.isLoaded=!1,console.log("[TTS] END play chunk ".concat(t.currChunkId)),t.shouldStop?t.shouldStop=!1:(t.currChunkId+=1,t.play())}))}},this.isPlaying=function(){var e=window.speechSynthesis.speaking;return e&&(e=!window.speechSynthesis.paused),e},this.pause=function(){console.log("[TTS] pause"),window.speechSynthesis.pause()},this.stop=function(){console.log("[TTS] stop"),t.shouldStop=!0,t.isLoaded=!1,window.speechSynthesis.cancel()},this.goToChunk=function(e){console.log("[TTS] goToChunk",e),e<=0||e>t.chunkedText.length-1||(t.stop(),t.currChunkId=e,t.play())},this.goBack=function(){console.log("[TTS] goBack",t.currChunkId),t.goToChunk(t.currChunkId-1)},this.goForward=function(){console.log("[TTS] goForward",t.currChunkId),t.goToChunk(t.currChunkId+1)},this.rawText=n.text,this.text2read=function(e){var n=e;return n=(n=n.replace(B.a.ressource,"")).replace(B.a.ref,""),n=Object(N.a)(n),console.log("222",n),n=n.replace(B.a.baliseHtml,""),console.log("cleanText2Speech",n),n}(n.text),this.chunkedText=this.chunkText(this.text2read),console.log("[TTS] init new manager ",{p:n,text:this.chunkedText,length:this.chunkedText.length})},z=t(116);var K=function(e){var n=Object(c.useState)(!1),t=Object(o.a)(n,2),a=t[0],r=t[1],l=Object(M.a)("tts-selected-voice",0),s=Object(o.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)(0),f=Object(o.a)(p,2),g=f[0],O=f[1],_=Object(c.useState)(0),j=Object(o.a)(_,2),x=j[0],w=j[1],E=Object(c.useRef)();return Object(c.useEffect)((function(){setTimeout((function(){U()[u]&&(console.log("2voice loaded",u),E.current.loadVoice(U()[u].obj))})),E.current=new W({text:e.fileContent})}),[]),Object(c.useEffect)((function(){U()[u]&&(console.log("voice loaded",u),E.current.loadVoice(U()[u].obj))}),[u]),Object(b.a)((function(){r(E.current.isPlaying()),O(E.current.currChunkId),w(E.current.chunkedText.length)}),500),Object(i.c)(H,null,Object(i.c)(m.a,{title:"".concat(h.a.ttsPopup.title),onClose:function(){E.current.stop(),e.onClose()}},Object(i.c)(v.a,{value:u,type:"select",list:U(),label:h.a.ttsPopup.voice,onSelectChange:function(e){d(parseInt(e))}}),g," / ",x,Object(i.c)("br",null),Object(i.c)("input",{type:"range",defaultValue:g,min:"0",max:x,onChange:function(e){console.log(e.target.value),E.current.goToChunk(parseInt(e.target.value))}}),Object(i.c)("input",{type:"number",defaultValue:g,min:"0",max:x,onChange:function(e){console.log(e.target.value),E.current.goToChunk(parseInt(e.target.value))}}),Object(i.c)("br",null),Object(i.c)("div",{className:"buttons"},Object(i.c)("button",{onClick:function(e){E.current.goBack()}},Object(i.c)(z.a,{name:"faFastBackward",color:"black"})),Object(i.c)("button",{onClick:function(e){a?E.current.pause():E.current.play()}},Object(i.c)(z.a,{name:a?"faPause":"faPlay",color:"black"})),Object(i.c)("button",{onClick:function(e){E.current.goForward()}},Object(i.c)(z.a,{name:"faFastForward",color:"black"})))))},H=Object(g.a)("div",{target:"ez98axn0"})({name:"rvko2c",styles:".popup-wrapper .popupContent{padding:20px;}.buttons{display:flex;padding:20px 0px 0px 0px;button{width:30%;padding:10px;}}"}),V=t(153),G=t(287),Y=t(147),q=function(e){var n=Object(c.useState)(!1),t=Object(o.a)(n,2),u=t[0],g=(t[1],Object(c.useState)("")),m=Object(o.a)(g,2),O=m[0],v=m[1],_=Object(c.useRef)(null),j=function(e){var n=Object(c.useState)(!1),t=Object(o.a)(n,2),a=t[0],r=t[1];Object(c.useEffect)((function(){return e.onEditorDidMount&&(console.log("[EVENTS EDITOR] EDITOR DID MOUNT"),e.onEditorDidMount()),function(){e.onEditorWillUnmount&&(i(),console.log("[EVENTS EDITOR] WILL UNMOUNT"),e.onEditorWillUnmount())}}),[]),Object(c.useEffect)((function(){i()}),[e.file.path]),Object(c.useEffect)((function(){e.onNoteContentDidLoad&&(console.log("[EVENTS EDITOR] => on note content did load ".concat(e.file.path)),e.onNoteContentDidLoad())}),[e.fileContent,e.file.path]);var i=function(){""!==f&&e.onNoteLeaving&&(console.log("[EVENTS EDITOR] => leaving edited ".concat(f," to ").concat(e.file.path)),e.onNoteLeaving(a,f)),f=e.file.path};return{triggerNoteEdition:function(n){if(!e.canEdit)return console.warn("[EVENTS EDITOR] => onEdition  CANNOT EDIT AS OFFLINE");a?e.onNoteEdition&&(console.log("[EVENTS EDITOR] => onEdition (".concat(e.file.path,")")),e.onNoteEdition(n,!1)):e.onNoteEdition&&(console.log("[EVENTS EDITOR] => onEdition (FIRST ONE) (".concat(e.file.path,")")),e.onNoteEdition(n,!0)),r(!0)}}}({file:e.file,fileContent:e.fileContent,canEdit:e.canEdit,onEditorDidMount:function(){},onEditorWillUnmount:function(){},onNoteContentDidLoad:function(){D.a&&(v(e.fileContent),y(e.file.folder),k())},onNoteEdition:function(n,t){t&&e.onSavingHistoryFile(e.file.path,e.fileContent,"enter"),v(n),e.onFileEdited(e.file.path,n)},onNoteLeaving:function(n,t){Object(a.b)("desktop")&&Object(r.d)(),J((function(n){e.onFileEdited(t,n)}))}}).triggerNoteEdition;Object(c.useEffect)((function(){J((function(n){e.onFileEdited(e.file.path,n)}))}),[e.isLeavingNote]),function(e,n){var t=Object(c.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1];Object(b.a)((function(){e!==r?(i(e),console.log("[HISTORY FILE] : content changed, saving history version"),n.shouldCreateIntervalNoteHistory()):console.log("[HISTORY FILE] : content not changed, do nothing")}),3e5)}(O,{shouldCreateIntervalNoteHistory:function(){if(X)return console.log("[HISTORY FILE] : noHistoryBackupWhenDecrypted");e.onSavingHistoryFile(e.file.path,O,"int"),console.log("[HISTORY FILE] : creating history file for ".concat(e.file.path))}});var x=Object(F.b)({onUploadSuccess:function(e){U(e,"currentPos")}}),w=x.UploadDragZone,E=x.uploadButtonConfig,k=x.reinitUploadLogic,y=x.updateUploadFolder,I=Object(c.useRef)(null),R=p(O,{mobileTextarea:I,onMobileNoteEdition:j}),M=R.onTextareaChange,A=R.onTextareaScroll,N=d({editorType:Object(a.a)(),editorRef:"desktop"!==Object(a.a)()?I:_}).applyTextModifAction,U=function(e,n){var t=N("insertAt",{textToInsert:e,insertPosition:n});t&&j(t)},W=T({fileContent:O,onTextEncrypted:j,onTextDecrypted:j}),z=W.APasswordPopup,H=W.askForPassword,q=W.decryptButtonConfig,$=W.encryptButtonConfig,J=W.ifEncryptOnLeave,X=W.noHistoryBackupWhenDecrypted,Z=[{title:"back",icon:"faAngleLeft",action:function(){e.onBackButton()}},Object(a.b)("desktop")?{title:"toggle views",icon:"faAdjust",action:function(){e.onViewToggle()}}:{},E,C(O)?q:$,Object(a.b)("desktop")?Object(S.b)(e.file):{},{title:"insert unique id",icon:"faFingerprint",action:function(){var n="".concat(e.file.folder);U("[link|".concat(e.file.realname," ").concat(n,"]\n"),0)}},{title:"print/download",icon:"faFileDownload",action:function(){window.print()}},{title:h.a.editorBar.explanation.history,icon:"faHistory",action:function(){te(!ne)}},{title:h.a.editorBar.lightbox,icon:"faImages",action:function(){var n=function(e,n){var t=e.match(B.a.image),o=[];return Object(s.each)(t,(function(e){var t=e.match(B.a.firstPartImg),c=t&&t[0]?t[0].replace("![","").replace("]","").replace("(",""):"",a=e.replace(B.a.firstPartImg,"").replace(")",""),r={url:Object(Y.a)(n.folder)+"/"+a,title:c,file:n};o.push(r)})),console.log(t,o),o}(e.fileContent,e.file);e.onLightboxClick(0,n)}},{title:h.a.editorBar.tts,icon:"faCommentDots",action:function(){re(!ae)}},{title:"delete note",class:"delete",icon:"faTrash",action:function(){window.confirm("".concat(h.a.trashNote))&&e.onFileDelete(e.file.path)}}],Q=Object(c.useState)(!1),ee=Object(o.a)(Q,2),ne=ee[0],te=ee[1],oe=Object(c.useState)(!1),ce=Object(o.a)(oe,2),ae=ce[0],re=ce[1];return Object(i.c)("div",{className:"editor-area"},w,Object(i.c)("div",{className:"infos-editor-wrapper"},Object(i.c)("div",{className:"file-path-wrapper"},e.file.path.replace("/".concat(e.file.name),"")),Object(i.c)(l,{title:e.file.name.replace(".md",""),onEdited:e.onFileTitleEdited}),Object(i.c)("div",{className:"toolbar-and-dates-wrapper"},Object(i.c)("div",{className:"toolbar-wrapper"},Object(i.c)(V.a,{class:"editor-main-toolbar",buttons:Z})),Object(i.c)("div",{className:"dates-wrapper"},Object(i.c)("div",{className:"date modified"},"modified: ",Object(P.a)(new Date(e.file.modified||0))),Object(i.c)("div",{className:"date created"},"created: ",Object(P.a)(new Date(e.file.created||0)))))),Object(i.c)("div",{className:"main-editor-wrapper"},"mobile"!==Object(a.a)()&&Object(i.c)(r.a,{value:O,vimMode:u,readOnly:!e.canEdit,ref:_,onChange:j,onScroll:e.onScroll,posY:e.posY}),"mobile"===Object(a.a)()&&Object(i.c)("textarea",{className:"textarea-editor",ref:I,readOnly:!e.canEdit,value:O,onScroll:function(n){e.onScroll(n),A(n)},onChange:M})),"desktop"!==Object(a.a)()&&Object(i.c)(G.a,{onButtonClicked:function(e){var n=N(e);n&&j(n)}}),H&&z,ne&&Object(i.c)(L,{file:e.file,onClose:function(){te(!1)}}),ae&&Object(i.c)(K,{fileContent:O,onClose:function(){re(!1)}}))},$="\n.file-path-wrapper {\n  padding-top: ".concat(Object(a.b)("desktop")?O.a.sizes.block:O.a.sizes.block/2,"px;\n  font-size: 13px;\n  font-weight: 700;\n  color: #b6b5b5;\n  cursor: pointer;\n  text-transform: capitalize;\n}\n.big-title {\n  color: ").concat(O.a.colors.main,";\n  font-size: 30px;\n  font-weight: 800;\n  width: 100%;\n  text-transform: uppercase;\n}\n\n.dates-wrapper {\n    color: ").concat(O.a.colors.editor.interfaceGrey,";\n    .modified {\n      color: grey;\n    }\n  }\n"),J=function(e){return"\n.editor-area {\n  width: ".concat(Object(a.b)("desktop")?"50%":"editor"===e?"100vw":"0vw",";\n  display: ").concat(Object(a.b)("desktop")||"editor"===e?"block":"none",";\n  position: relative;\n\n  .infos-editor-wrapper {\n    ").concat(Object(a.b)("desktop")?"":"height: ".concat(O.a.sizes.mobile.editorTopWrapper,"px;"),"\n    ").concat(Object(a.b)("desktop")?"width: calc(200% - ".concat(3*O.a.sizes.block*2,"px);"):"","\n    padding: 0px ").concat(Object(a.b)("desktop")?3*O.a.sizes.block:2*O.a.sizes.block,"px;\n    position: relative;\n\n    ").concat($,"\n\n    .title-input-wrapper {\n      position:relative;\n      margin-top: ").concat(Object(a.b)("desktop")?6:0,"px;\n      .press-to-save {\n        position: absolute;\n        top: 39px;\n        font-size: 8px;\n        color: ").concat(O.a.colors.main,";\n        right: 0px;\n      }\n      input {\n        padding: 0px;\n        border: none;\n        background: none;\n      }\n    }\n\n    \n\n    .toolbar-and-dates-wrapper {\n      display: flex;\n    }\n\n    .dates-wrapper {\n      display: ").concat(Object(a.b)("desktop")?"block":"none",";\n      margin: ").concat(O.a.sizes.block,"px 0px;\n      .date {\n        text-align: right;\n      }\n    }\n    \n\n    .toolbar-wrapper {  \n      flex: 1 1 auto;\n      ul.buttons-toolbar-component {\n        display: flex;\n        list-style: none;\n        padding: 0px 0px 0px 0px;\n        margin: ").concat(Object(a.b)("desktop")?"".concat(O.a.sizes.block,"px 0px"):"".concat(O.a.sizes.block/3,"px 0px ").concat(O.a.sizes.block/1.5,"px 0px "),";\n        li {\n          margin-right: 10px;\n        }\n      }  \n\n      .upload-button-wrapper {\n        position: relative;  \n        .input-file-hidden {\n          width: 0.1px;\n          height: 0.1px;\n          opacity: 0;\n          overflow: hidden;\n          position: absolute;\n          z-index: -1;\n        }\n      }\n    }\n  }\n\n\n\n\n  .main-editor-wrapper {\n    // 10 = monaco browser gutter\n    // padding: 0px ").concat(Object(a.b)("desktop")?3*O.a.sizes.block-10:2*O.a.sizes.block,"px;\n    ").concat(Object(a.b)("desktop")?"padding: 0px ".concat(3*O.a.sizes.block/2,"px 0px ").concat(3*O.a.sizes.block-10,"px;"):"","\n    ").concat(Object(a.b)("desktop")?"":"padding: 0px ".concat(2*O.a.sizes.block,"px 0px ").concat(2*O.a.sizes.block,"px;"),"\n    ").concat(Object(a.b)("desktop")?"":"margin: 0px 0px ".concat(O.a.sizes.mobile.bottomBarHeight,"px 0px;"),"\n    .monaco-editor {\n      margin: 0px;\n    }\n    .textarea-editor {\n      border: none;\n      width: 100%;\n      height: calc(100vh - ").concat(O.a.sizes.mobile.editorTopWrapper+O.a.sizes.mobile.editorBar+2*O.a.sizes.mobile.bottomBarHeight,"px);\n      margin: 0px;\n      padding: 0px;\n      background: rgba(255,255,255,0.7);\n    }\n  }\n}\n")}},286:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var o=t(609),c=function(e){return o(e)}},287:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return i}));t(22);var o=t(36),c=t(153),a=t(19),r=function(e){return Object(a.c)("div",null,Object(a.c)(c.a,{class:"mobile-text-manip-toolbar",colors:[o.a.colors.editor.mobileToolbar.font,o.a.colors.editor.mobileToolbar.font],buttons:[{icon:"faAngleLeft",action:function(){return e.onButtonClicked("<-")}},{icon:"faAngleRight",action:function(){return e.onButtonClicked("->")}},{icon:"faCheckSquare",action:function(){return e.onButtonClicked("[x]")}},{icon:"faAngleUp",action:function(){return e.onButtonClicked("^")}},{icon:"faAngleDown",action:function(){return e.onButtonClicked("v")}},{icon:"faEraser",action:function(){return e.onButtonClicked("X")}}]}))},i="\n  .mobile-text-manip-toolbar {\n    position: fixed;\n    bottom: ".concat(o.a.sizes.mobile.editorBar+10,"px;\n    display: flex;\n    list-style: none;\n    width: 100%;\n    padding: 0px;\n    align-content: center;\n    justify-content: center;\n    align-items: center;\n    height: ").concat(o.a.sizes.mobile.editorBar,"px;\n    background: ").concat(o.a.colors.editor.mobileToolbar.bg,";\n    li {\n      flex: 1 1 auto;\n      justify-content: center;\n      display: flex;\n    }\n  }\n")},288:function(e,n,t){"use strict";t.d(n,"b",(function(){return j})),t.d(n,"a",(function(){return x}));var o,c=t(14),a=t(22),r=t.n(a),i=t(116),l=t(97),s=!1,u=function(e){s||(s=!0,window.addEventListener("paste",(function(n){console.log("PASTE"),function(e,n){0==e.clipboardData&&"function"==typeof n&&n(void 0);var t=e.clipboardData.items;console.log("[PASTE] informations on files pasted : ",e,t,t.length),void 0==t&&"function"==typeof n&&n(void 0);for(var o=0;o<t.length;o++)if(-1!=t[o].type.indexOf("image")){var c=t[o].getAsFile();"function"==typeof n&&n(c)}}(n,(function(n){n&&e.onImagePasted(n)}))}),!1))},d=t(52),p=t(195),f=t(64),b=t(443),g=function(e){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.items){var n=e.dataTransfer.items;if(!n[0])return;for(var t=0;t<n.length;t++)m(n[t].getAsFile())}},m=function(e){new b(d.a).submitFiles([e])},h=t(90),O=t(231),v=t(167),_=t(19),j=function(e){var n=Object(a.useState)(!1),t=Object(c.a)(n,2),s=t[0],j=t[1],x=Object(a.useRef)(null),w=Object(a.useRef)(null),E=Object(O.a)((function(e){d.b.emit("uploadResourcesInfos",{folderpath:e,token:Object(h.a)()})}),3e3);return{reinitUploadLogic:function(){var n,t;l.a.log.upload&&console.log("[UPLOAD] cleanUploadLogic"),d.b.off(o),l.a.log.upload&&console.log("[UPLOAD] initUploadLogic"),n=function(n){var t="![".concat(Object(p.b)(n.name),"](").concat(n.path,")\n\n");e.onUploadSuccess(t)},o=d.b.on("getUploadedFile",(function(e){n(e)})),u({onImagePasted:function(e){m(e)}}),w.current?(t=w.current,new b(d.a).listenOnInput(t)):l.a.log.upload&&console.error("[UPLOAD] uploadInputRef not detected"),x.current&&function(e){var n=function(e){e.preventDefault(),t()},t=Object(f.debounce)((function(){e.onDragEnd()}),100);l.a.log.upload&&console.log("[UPLOAD] reinit drag/drop events"),window.removeEventListener("drop",g),window.addEventListener("drop",g),window.removeEventListener("dragover",n),window.addEventListener("dragover",n)}({onDragEnd:function(){j(!1)},onDragStart:function(){j(!0)}})},updateUploadFolder:function(e){l.a.log.upload&&console.log("[UPLOAD] updateUploadFolder to ".concat(e)),E(e)},uploadButtonConfig:{title:"upload files",class:"upload-button-wrapper",action:function(){},customHtml:Object(_.c)(r.a.Fragment,null,Object(_.c)("input",{className:"input-file-hidden",id:"file",multiple:!0,name:"file",type:"file",ref:w}),Object(_.c)("label",{for:"file"},Object(_.c)(i.a,{name:"faPaperclip"})))},UploadDragZone:Object(v.a)(Object(_.c)("div",{className:"dragzone ".concat(s?"":"hidden"),ref:x}),[s])}},x="\n    .dragzone {\n        &.hidden {\n        display:none;\n        }\n        display:block;\n        position: absolute;\n        top: 3vh;\n        left: 3vw;\n        width: 94vw;\n        height: 94vh;\n        z-index: 10;\n        background: rgba(255,255,255,0.4);\n    }\n"},36:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t(435),t(436),t(437),t(438);var o=t.p+"static/media/deco-bg-map.7ca9103b.png",c=t.p+"static/media/file-solid.6415173e.svg",a=t.p+"static/media/link-solid.7b689dbd.svg",r=t.p+"static/media/globe-africa-solid.0ad34146.svg",i=t.p+"static/media/search-solid.cc51b702.svg",l={main2:"#E86666",main:"rgba(232,102,102,1)",mainRGB:"232,102,102",dev:["#C3668B","#A766A7","#CE66E8","#E4E866"],compl:["#11abf8","#3fd7a4"],pal1:["#5c1a70","#ffa67c","#ffda77"],grey1:"#797979",grey2:"#615f5f",green:"green",l1:{bg:"#e1e1e1",font:"#615f5f"},l2:{bg:"#eeecec",title:"#797979",text:"#615f5f",date:"#b3b2b2"},editor:{bg:"#ffffff",font:"#525252",interfaceGrey:"#d4d1d1",mobileToolbar:{bg:"#e1e1e1",font:"#747474"}},bg:{l1:"#e1e1e1",dark:"rgb(39, 39, 39)",grey:"rgb(221, 221, 221)",light:"#FFFFFF",black:"#000000"},font:{light:"#FFFFFF",black:"#000000"}},s={desktop:{l:37,l1:38,l2:62,r:63},search:{h:94,padding:15},gallery:{topH:100},block:15,scrollbar:17,l2:{fileLi:{height:77,padding:5,margin:5,img:67}},editor:{padding:45},mobile:{bottomBarHeight:50,editorBar:40,editorTopWrapper:100}},u={els:{button:"\n      background: none;\n      border: none;\n    ",images:"\n      border-radius: 7px;\n      box-shadow: 0px 0px 10px rgb(0 0 0 / 10%);\n      max-width: 100%;\n    ",imageInfos:"\n      position: absolute;\n      top: 0px;\n      height: 55px;\n      left: 0px;\n      width: 100%;\n      background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0) 100%);\n      ul {\n        margin-top: 5px;\n        justify-content: flex-end;\n      }\n    ",redButton:"\n      border: none;\n      background: ".concat(l.main,";\n      &:hover {\n          background: rgba(").concat(l.mainRGB,",0.8);\n      }\n      color: white;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 700;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n    ")},colors:l,elsObjs:{submitButton:{marginTop:"10px",background:"none",border:"none",padding:"10px 20px"}},font:{main:"'Open sans', sans-serif",editor:"Consolas, monaco, monospace"},sizes:s,other:{radius:"border-radius: 5px;"},assets:{decoBgMap:o,linkIcon:a,worldIcon:r,fileIcon:c,searchIcon:i}}},430:function(e,n){},48:function(e,n,t){"use strict";t.d(n,"d",(function(){return o})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return r}));var o=function(e){return"navigator"===e||"editor"===e||"preview"===e},c=function(e){return r()===e};function a(){return!!/iPad/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}var r=function(){var e=window.innerWidth,n="desktop";return e<1e3&&(n="tablet"),e<500&&(n="mobile"),n}},50:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var o={folders:"Folders",files:"files",images:"images",trashNote:"Are you sure to trash that note?",clickHereDisconnected:"(click here if persist)",searchingLabel:"searching...",lastNotes:"Last Notes",newNote:"New Note",dateModified:"Modified :",dateCreated:"Created :",searchPlaceholder:"Search Note",hoursAgo:" hours ago",daysAgo:" days ago",minsAgo:" mins ago",months:["January","February","March","April","May","June","July","August","September","October","November","December"],createFolder:"Create folder",createFolderPrompt:"New Folder name to create in",renameFolder:"Rename folder",renameFolderPrompt:"Rename folder to :",deleteFolder:"Delete folder",deleteFolderPrompt:"Are you sure you want to delete the folder and all its notes (no recovery possible) : ",moveToTrash:"Move to trash",moveToTrashPrompt:"Are you sure you want move folder in .tiro/.trash : ",loadingFolder:"loading...",moveFolderPrompt:"move folder",setupForm:{title:"Login to Tiro",introText:"Welcome to Tiro, please fill these informations to get started",user:"user",password:"password",dataFolder:"folder path",userExplanation:"should have > 3 chars",passwordExplanation:"should have > 3 chars",folderExplanation:"relative from Tiro folder installation (../data for example)",successReload:"Configuration file successfully written, reloading application...",submit:"login"},appviews:{image:"Switch to Gallery View",text:"Switch to Files View"},loginForm:{wrongUserPassword:"Wrong login/password",wrongToken:"Authentication expired, please log again"},passwordForm:{explanation:"please enter your password",submit:"submit"},editorBar:{tts:"Text to speech",explanation:{history:"File history"},lightbox:"Show Images in Slider"},ttsPopup:{title:"Text to speech",voice:"Voice"},settingsPopup:{title:"Tiro Settings",backend:{title:"Server settings",explanation:"Only fill if server is on another port/protocol than the client (usually in development)",protocol:"Https",protocolExpl:"https or http",port:"Port",portExpl:"Port used by backend (ex: 3023)"}},historyPopup:{title:"Versions for ",thead:{date:"date",name:"version"}}}},515:function(e,n){},517:function(e,n){},52:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return d})),t.d(n,"d",(function(){return p}));var o,c,a=t(125),r=t(23),i=t(64),l=t(394),s=t(215),u=t(97),d=function(){var e=Object(s.b)("backend-protocol")?"".concat(Object(s.b)("backend-protocol"),"://"):u.a.global.protocol,n=Object(s.b)("backend-port")?":".concat(Object(s.b)("backend-port")):"".concat(u.a.global.port);return"".concat(e).concat(u.a.global.url).concat(n)},p=function(){return new Promise((function(e,n){o||(o=l(d()),u.a.log.socket&&console.log("[SOCKET] try connecting to ".concat(d(),"...")),(c=b(o)).on("connectionSuccess",(function(n){u.a.log.socket&&console.log("[SOCKET] connection successful!, socket.connected :".concat(o.connected),n),e(o)})))}))},f=function(e,n){return["%c [CLIENT SOCKET 2] ".concat(e),"background: #ccc; color: red",n||null]},b=function(e){var n={};return{on:function(t,o){var c=function(e,n){return function(t){var o;(o=console).log.apply(o,Object(r.a)(f("<== ON ".concat(e," "),Object(a.a)({},t)))),n(t)}}(t,o),l=Object(i.random)(1,1e7);return n[l]={endpoint:t,apiFn:c},e.on(t,c),l},off:function(t){n[t]&&(e.off(n[t].endpoint,n[t].apiFn),delete n[t])},emit:function(n,t){var o;(o=console).log.apply(o,Object(r.a)(f("==> EMIT ".concat(n," "),Object(a.a)({},t)))),e.emit(n,t)}}}},527:function(e,n){},529:function(e,n){},554:function(e,n){},556:function(e,n){},557:function(e,n){},562:function(e,n){},564:function(e,n){},570:function(e,n){},572:function(e,n){},591:function(e,n){},603:function(e,n){},606:function(e,n){},611:function(e,n,t){"use strict";t.r(n);var o=t(22),c=t.n(o),a=t(393),r=t.n(a),i=t(14),l=t(19),s=t(48),u=t(52),d=t(125),p=t(289),f=t(288),b=t(36),g=t(236),m=t(235),h=t(200),O=t(153),v=t(167),_="\n.mobile-view-toggler {\n    position: fixed;\n    bottom: 0px;\n    left: 0px;\n    z-index: 10;\n    display:flex;\n    width: 100%;\n    list-style: none;\n    margin: 0px;\n    padding: 0px;\n    background: ".concat(b.a.colors.main,";\n    li {\n        flex: 1 1 auto;\n        button {\n            ").concat(b.a.els.button,";\n            padding: 8px;\n            width: 100%;\n            svg {\n                color: white;\n                transform: scale(1.1);\n                background: rgba(255,255,255,0);\n                padding: 10px 40px;\n                border-radius: 6px;\n            }\n            &:hover {\n                svg {\n                    color: white;\n                }\n            }\n            &.active {\n                svg {\n                    color: white;\n                    background: rgba(255,255,255,0.2);\n                }\n            }\n        }\n    }\n}\n"),j=t(97),x=t(50),w=t(198),E=function(){return"Tiro (".concat(j.a.version,")")},k="\n.connection-status {\n  font-size: 9px;\n  z-index: 11;\n  a {\n    margin-left: 10px;\n    color: white;\n  }\n  .back-online, .disconnected {\n    position: absolute;\n    text-align:center;\n    color:white;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    padding: 1px;\n  }\n  .back-online{\n    background: green;\n  }\n  .disconnected{\n    background: ".concat(b.a.colors.main,";\n  }\n  .connected {\n    display:none;\n    position: absolute;\n    bottom: 5px;\n    right: 5px;\n    color: ").concat(b.a.colors.green,";\n  }\n}\n"),y=t(116),C=function(e){return Object(l.c)("button",{className:"new-file-button",onClick:function(n){e.onNewFile()}},Object(l.c)(y.a,{name:"faPlusCircle",color:"white"}),Object(l.c)("span",null,x.a.newNote))},T="\n    .new-file-button {\n        ".concat(b.a.els.redButton,"\n        ").concat(b.a.font.main,";\n        padding: ").concat(Object(s.b)("desktop")?"15px 5px":"13px 7px",";\n        margin: ").concat(b.a.sizes.block,"px;\n        width: calc(100% - ").concat(b.a.sizes.block*(Object(s.b)("desktop")&&!Object(s.c)()?2:3),"px );\n        font-size: ").concat(Object(s.b)("desktop")?13:11,"px;\n        svg {\n            margin-right: ").concat(Object(s.b)("desktop")?"10px":"5px",";\n        }\n        \n    }\n"),F=t(0),S=t(1),D=t(4),P=t(5),I=t(154),L=t(64),R=t(183),M=t(147),A=t(399),N=t(398),B=["Az","Crea","Modif"],U=["alphabetical","created","modified"],W=function(e){Object(D.a)(t,e);var n=Object(P.a)(t);function t(e){var o;return Object(F.a)(this,t),(o=n.call(this,e)).oldFiles=[],o.liRefs=[],o.scrollerWrapperRef=c.a.createRef(),o.scrollerListRef=c.a.createRef(),o.canAutoScroll=!1,o.getVisibleItemsDebounced=Object(L.debounce)((function(){var e=o.scrollerWrapperRef.current;if(e){for(var n=e.getBoundingClientRect().height,t=-1,c=[],a=0;a<o.liRefs.length;a++){var r=o.liRefs[a].current;if(r){var i,l=r.getBoundingClientRect().top;if(l>-50&&l<n+100)-1===t&&(t=a),o.props.files[a]&&c.push(null===(i=o.props.files[a])||void 0===i?void 0:i.path)}}o.props.onVisibleItemsChange(c)}}),500),o.onListScroll=function(){o.canAutoScroll=!1,o.getVisibleItemsDebounced()},o.isMultiSelected=function(e){return o.state.selectionEdges[0]<=e&&o.state.selectionEdges[1]>=e},o.itemToScroll=0,o.autoScrollToItem=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.itemToScroll=n?e:o.itemToScroll+e,o.itemToScroll<0&&(o.itemToScroll=0),o.itemToScroll>o.props.files.length&&(o.itemToScroll=o.props.files.length),console.log("scroll to item: ",o.itemToScroll),o.scrollerListRef.current.scrollToItem(o.itemToScroll)},o.state={hoverMode:!1,selectionEdges:[-1,-1]},o}return Object(S.a)(t,[{key:"shouldComponentUpdate",value:function(e,n){if(JSON.stringify(e.files)!==JSON.stringify(this.oldFiles)){this.oldFiles=Object(L.cloneDeep)(e.files),this.liRefs=[];for(var t=0;t<e.files.length;t++)this.liRefs.push(c.a.createRef());this.getVisibleItemsDebounced(),this.setState({selectionEdges:[-1,-1]}),console.log("[LIST] reinit canAutoScroll"),this.canAutoScroll=!0}return this.props.activeFileIndex>0&&this.canAutoScroll&&(this.canAutoScroll=!1,this.autoScrollToItem(this.props.activeFileIndex)),!0}},{key:"render",value:function(){var e=this,n=U[this.props.sortMode],t=b.a.sizes.l2.fileLi.height+2*b.a.sizes.l2.fileLi.padding+b.a.sizes.l2.fileLi.margin,o=window.innerHeight-(b.a.sizes.search.h+b.a.sizes.search.padding),a=Object(s.b)("desktop")?o:o-b.a.sizes.mobile.bottomBarHeight;return Object(l.c)(c.a.Fragment,null,"desktop"!==Object(s.a)()&&Object(l.c)("div",{className:"mobile-buttons-up-down"},Object(l.c)("div",{id:"top",onClick:function(){e.autoScrollToItem(0,!1)}},"="),Object(l.c)("div",{id:"up",onClick:function(){e.autoScrollToItem(-4,!1)}},"^"),Object(l.c)("div",{id:"down",onClick:function(){e.autoScrollToItem(4,!1)}},"v")),Object(l.c)("div",{className:"list-wrapper-scroller",style:{height:a},onScroll:this.onListScroll,ref:this.scrollerWrapperRef},Object(l.c)(N.a,null,(function(o){o.height;var r=o.width;return Object(l.c)(A.a,{itemData:e.props.files,className:"List",ref:e.scrollerListRef,height:a,itemCount:e.props.files.length,itemSize:t,width:r,onScroll:e.onListScroll},(function(t){var o=t.index,a=t.style,i=e.props.files[o],s=e.props.filesPreview[i.path];return Object(l.c)("div",{style:a},Object(l.c)("li",{ref:e.liRefs[o],style:{width:r-2*H.l2.fileLi.padding-2*H.l2.fileLi.margin-35},className:["file-element-list","element-".concat(o),"".concat(e.isMultiSelected(o)?"multiselected":""),"".concat(o===e.props.activeFileIndex?"active":""),"".concat(s&&s.picture?"with-image":"")].join(" "),key:o,draggable:!0,onDragStart:function(){var n=[],t=e.state.selectionEdges;n=-1!==t[0]||-1!==t[1]?e.props.files.slice(t[0],t[1]+1):[i],e.props.onFileDragStart(n)},onDragEnd:function(){e.props.onFileDragEnd()},onClick:function(n){if(e.props.modifierPressed){var t=[e.props.activeFileIndex,o];t.sort(),console.log("[MULTIARR]",t),e.setState({selectionEdges:t})}else e.props.onFileClicked(o),e.setState({selectionEdges:[-1,-1]})}},Object(l.c)("div",{className:"left"},Object(l.c)("h3",{className:"label",onMouseEnter:function(n){e.props.hoverMode&&e.props.onFileClicked(o)}},i.name),Object(l.c)("div",{className:"content"},s&&s.content&&Object(l.c)(c.a.Fragment,null,s.content)),Object(l.c)("div",{className:"date ".concat(n)},Object(R.a)(new Date(("modified"===n?i.modified:i.created)||0)))),Object(l.c)("div",{className:"right"},s&&s.picture&&Object(l.c)("div",{className:"picture",style:{backgroundColor:"white",backgroundImage:"url('".concat(s.picture.startsWith("http")?s.picture:"".concat(Object(M.a)(e.props.files[0].folder),"/").concat(s.picture),"')")}}))))}))}))))}}]),t}(c.a.Component),z=(Object(I.a)("div",{target:"ejbrra60"})(""),Object(d.a)({},b.a)),K=(z.els,z.colors),H=(z.font,z.sizes),V=(z.other,"\n  .list-wrapper {\n    .list-wrapper-scroller{\n        height: 100%;\n        width: calc(100% + 20px);\n        overflow-y:scroll;\n        overflow: hidden;\n    }\n\n    .mobile-buttons-up-down {\n        position: fixed;\n        right: 0px;\n        z-index: 10;\n        top: 50%;\n        div {\n            background: #d6d6d6;\n            padding: 10px;\n            color:white;\n            cursor: pointer;\n        }\n    }\n\n    div.List {\n        list-style: none;\n        margin-right:20px;\n        padding: 0px 0px 0px 0px;\n        &.multiselect-mode {\n          li .label {\n            margin-left: 4px;\n          }\n        }\n\n        // NORMAL\n        li {\n            padding: ".concat(H.l2.fileLi.padding,"px ").concat(H.block-H.l2.fileLi.margin,"px;\n            margin: ").concat(H.l2.fileLi.margin,"px ").concat(H.l2.fileLi.margin+5,"px ").concat(H.l2.fileLi.margin,"px ").concat(H.l2.fileLi.margin,"px ;\n            display: block;\n            cursor: pointer;\n            position: relative;\n            height: ").concat(H.l2.fileLi.height,"px;\n            overflow: hidden;\n            border: 2px rgba(0,0,0,0) solid;\n            \n            // ACTIVE\n            &:hover,\n            &.multiselected,\n            &.active  {\n              background: rgba(").concat(K.mainRGB,",0.1);\n              border-radius: 5px;\n              border: 2px rgba(").concat(K.mainRGB,",0.3) solid;\n            }\n\n            display: flex;\n            justify-content: center;\n            \n            .left {\n              // width: calc(100% - ").concat(H.l2.fileLi.img,"px - 10px);\n              width: 100%;\n              padding-right: 10px;\n\n              display:flex;\n              flex-direction:column;\n\n              .label {\n                margin: 0px;\n                max-height: 35px;\n                margin-bottom: 2px;\n                overflow: hidden;\n                color: ").concat(K.l2.title,";\n                line-break: anywhere;\n              }\n              \n              .content {\n                color: grey;\n                margin-bottom: 3px;\n                font-size: 9px;\n                overflow: hidden;\n                line-break: anywhere;\n                word-break: break-all;\n                ").concat(Object(s.b)("desktop")?"":"max-height: 25px;","\n              }\n\n              .date {\n                color: ").concat(K.l2.date,";\n                font-size: 10px;\n                font-weight: 700;\n              }\n            }\n\n            .right {\n              .picture {\n                width: ").concat(H.l2.fileLi.img,"px;\n                height: ").concat(H.l2.fileLi.img,"px;\n                background-size: cover;\n                z-index: 1;\n                margin-top: 3px;\n                border-radius: 5px;\n                border: 2px white solid;\n              }\n            }\n        }\n    }\n  }\n  ")),G=t(287),Y=t(113),q=function(e){return Object(l.c)("div",{className:"folder-tree-view-component"},Object(l.c)("h3",{className:"subtitle"},x.a.folders),Object(l.c)($,{folder:e.folder,current:e.current,onFolderClicked:e.onFolderClicked,onFolderMenuAction:e.onFolderMenuAction,onFolderOpen:e.onFolderOpen,onFolderClose:e.onFolderClose,onFolderDragStart:e.onFolderDragStart,onFolderDragEnd:e.onFolderDragEnd,onFolderDrop:e.onFolderDrop}))},$=function e(n){var t=Object(Y.a)("treeview-".concat("/"===n.folder.key||""===n.folder.key?"root":n.folder.key),!1),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(o.useState)(!1),u=Object(i.a)(s,2),d=u[0],p=u[1],f=n.current===n.folder.key;return Object(l.c)("li",{className:"folder-wrapper ".concat(f?"current":""),draggable:!0,onDrop:function(e){n.folder.key&&(n.onFolderDrop(n.folder),e.stopPropagation())},onDragStart:function(e){n.folder.key&&(n.onFolderDragStart(n.folder),e.stopPropagation())},onDragEnd:function(){n.folder.key&&n.onFolderDragEnd()},onMouseLeave:function(){d&&p(!1)}},Object(l.c)("div",{className:"folder-title"},Object(l.c)("span",{className:"icon",onClick:function(e){a?n.onFolderClose(n.folder.key):n.onFolderOpen(n.folder.key),r(!a)}},n.folder.hasChildren&&Object(l.c)(y.a,{name:a?"faCaretDown":"faCaretRight",color:b.a.colors.main})),Object(l.c)("span",{className:"title",onClick:function(e){n.onFolderClicked(n.folder.key)}},n.folder.title),Object(l.c)("span",{onClick:function(){p(!d)},className:"context-menu-wrapper"},Object(l.c)(y.a,{name:"faEllipsisH",color:b.a.colors.l1.font}),d&&Object(l.c)("div",{className:"context-menu"},Object(l.c)("ul",null,Object(l.c)("li",{onClick:function(){if(""===n.folder.path)return p(!1);var e=prompt("".concat(x.a.renameFolderPrompt," "),n.folder.title);e&&""!==e&&e!==n.folder.title&&n.onFolderMenuAction("rename",n.folder,e),p(!1)}},x.a.renameFolder),Object(l.c)("li",{onClick:function(){if(""===n.folder.path)return p(!1);var e=prompt("".concat(x.a.createFolderPrompt," ").concat(n.folder.path),"");e&&""!==e&&n.onFolderMenuAction("create",n.folder,e),p(!1)}},x.a.createFolder),-1===n.folder.path.indexOf(".tiro/.trash")&&Object(l.c)("li",{onClick:function(){if(""===n.folder.path)return p(!1);window.confirm("".concat(x.a.moveToTrash).concat(n.folder.path,"?"))&&n.onFolderMenuAction("moveToTrash",n.folder),p(!1)}},x.a.moveToTrash),-1!==n.folder.path.indexOf(".tiro/.trash")&&Object(l.c)("li",{onClick:function(){if(""===n.folder.path)return p(!1);window.confirm("".concat(x.a.deleteFolderPrompt).concat(n.folder.path,"?"))&&n.onFolderMenuAction("delete",n.folder),p(!1)}},x.a.deleteFolder))))),a&&Object(l.c)("ul",{className:"folder-children"},n.folder.children&&n.folder.children.map((function(t,o){return Object(l.c)(e,{key:o,folder:t,current:n.current,onFolderOpen:n.onFolderOpen,onFolderMenuAction:n.onFolderMenuAction,onFolderClose:n.onFolderClose,onFolderClicked:n.onFolderClicked,onFolderDragStart:n.onFolderDragStart,onFolderDragEnd:n.onFolderDragEnd,onFolderDrop:n.onFolderDrop})}))))},J="\n.folder-tree-view-component {\n  padding: ".concat(b.a.sizes.block,"px;\n  padding-right: 0px;\n  margin: 0px 0px 100px 0px;\n  width: calc(100% - ").concat(b.a.sizes.block*(Object(s.b)("desktop")&&!Object(s.c)()?1:2),"px);\n\n  ul.folder-children {\n    margin: 0px 0px 0px 0px;\n    padding: 0px 0px 0px 10px;\n  }\n\n  li.folder-wrapper {\n\n    position: relative;\n    list-style: none;\n    font-size: 13px;\n    font-weight: 600;\n    cursor: pointer;\n\n    .context-menu-wrapper {\n      position: absolute;\n      right: 10px;\n      top: 5px;\n      display:none;\n      .context-menu {\n        position: absolute;\n        right: 0px;\n        top: 15px;\n        background: white;\n        box-shadow: 0px 0px 4px rgb(0 0 0 / 10%);\n        color: black;\n        padding: 0px 0px;\n        width: 100px;\n        z-index: 10;\n        border-radius: 4px;\n        font-size: 10px;\n        ul {\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          li {\n            padding: 4px 11px;\n            &:hover {\n              background: rgba(").concat(b.a.colors.mainRGB,", 0.2)\n            }\n          }\n        }\n      }\n    }\n    .folder-title:hover > .context-menu-wrapper {\n      cursor:pointer;\n      display:block;\n    }\n    &.current > .folder-title {\n        color: ").concat(b.a.colors.main,";\n        text-decoration: underline;\n    }\n    .folder-title {\n      padding: 1px;\n      position:relative;\n      padding-left: 20px;\n      .icon {\n        position: absolute;\n        left: 2px;\n        cursor: pointer;\n        padding: 1px;\n        top: 0px;\n      }\n      \n    }\n  }\n  \n}\n"),X=function(e){var n=Object(d.a)({},e).files;return Object(l.c)(c.a.Fragment,null,n.length>0&&Object(l.c)("div",{className:"last-notes-component"},Object(l.c)("h3",{className:"subtitle"},x.a.lastNotes),Object(l.c)("ul",null,n.map((function(n,t){var o=n.name.replace(".md","");return o=o.length>20?"".concat(o.substr(0,20)):o,Object(l.c)("li",{key:t,title:o,onClick:function(t){e.onClick(n)},className:"note"},Object(l.c)(y.a,{name:"faFile"}),o)})))))},Z="\n.last-notes-component {\n    padding: 0px ".concat(b.a.sizes.block,"px;\n    \n    h3 {\n\n    }\n    ul {\n        height: ").concat(110,"px;\n        overflow: hidden;\n        &:hover {\n            min-height: ").concat(110,"px;\n            height: auto;\n        }\n\n        padding: 0px;\n        margin: 0px;\n        li {\n            cursor: pointer;\n            margin-bottom: 7px;\n            overflow: hidden;\n            height: ").concat(15,"px;\n            list-style: none;\n            font-size: 11px;\n            font-weight: 400;\n            svg {\n                color: ").concat(b.a.colors.main,";\n                margin-right: 10px;\n            }\n        }\n    }\n}\n"),Q=t(143),ee=t(166),ne=t(90),te="\n    .setup-popup-component {\n        .submit-button {\n            margin-top: 10px;\n            ".concat(b.a.els.redButton,";\n            padding: 10px 20px;\n        }\n        .error {\n            color: ").concat(b.a.colors.main,";\n        }\n        .success {\n            color: ").concat(b.a.colors.green,";\n        }\n    }\n"),oe=function(e){Object(D.a)(t,e);var n=Object(P.a)(t);function t(e){var o;return Object(F.a)(this,t),(o=n.call(this,e)).inputRef=void 0,o.submitOnEnter=function(e){if("Enter"===e.key){if(o.props.searchTerm.length<3)return;o.props.onSearchSubmit()}},o.state={search:""},o.inputRef=c.a.createRef(),o}return Object(S.a)(t,[{key:"render",value:function(){var e=this;return Object(l.c)(c.a.Fragment,null,Object(l.c)("div",{className:"search-bar-component"},Object(l.c)("input",{type:"text",placeholder:x.a.searchPlaceholder,ref:this.inputRef,value:this.props.searchTerm,onKeyDown:this.submitOnEnter,onChange:function(n){e.props.onSearchTermUpdate(n.target.value,n.target)}}),Object(l.c)("div",{className:"search-status"},this.props.isSearching&&x.a.searchingLabel)))}}]),t}(c.a.Component),ce="\n    .search-bar-component {\n        input {\n            ".concat(b.a.other.radius,"\n            width: calc(100% - ").concat(2*b.a.sizes.block+20,"px);\n            border: none;\n            background: white;\n            padding:14px 10px;\n            margin: 0px ").concat(b.a.sizes.block,"px ").concat(b.a.sizes.block,"px ").concat(b.a.sizes.block,"px; \n            &::placeholder {\n                color: #afadad;\n            }\n        }\n        .search-status {\n            text-align: center;\n            font-size: 8px;\n        }\n    }\n  "),ae=t(188),re=function(e){var n=Object(o.useState)([]),t=Object(i.a)(n,2),c=t[0],a=t[1],r=function(){return"desktop"===Object(s.a)()?3:1},u=Object(o.useState)(r()),d=Object(i.a)(u,2),p=d[0],f=d[1];return Object(o.useEffect)((function(){f(r())}),[e.forceRender]),Object(o.useEffect)((function(){a([]);for(var n=[],t=0,o=0;o<e.images.length;o++){n[t]||(n[t]={height:0,images:[]});var c=e.images[o];c.index=o,n[t].images.push(c),++t>p-1&&(t=0)}a(n)}),[e.images,p]),Object(l.c)("div",{className:"image-gallery-component-wrapper"},Object(l.c)("div",{className:"masonry-gallery"},c.map((function(n,t){return Object(l.c)("div",{className:"masonry-col",key:t},n.images.map((function(n,t){return Object(l.c)("div",{className:"masonry-col-item",key:t},Object(l.c)("img",{src:Object(M.a)(n.url)}),Object(l.c)("div",{className:"image-infos"},Object(l.c)(O.a,{buttons:[{title:"open note",icon:"faExternalLinkAlt",action:function(){Object(ae.a)(n.file)}},{title:"open lightbox",icon:"faExpand",action:function(){e.onImageClicked(n.index||0,e.images)}}],size:1})))})))}))))},ie=function(e){var n=Object(o.useState)(0),t=Object(i.a)(n,2),c=t[0],a=t[1];Object(o.useEffect)((function(){a(e.startingIndex)}),[e.startingIndex]);var r=function(n){var t=c;t=-1===n&&0===c?e.images.length-1:1===n&&c===e.images.length-1?0:c+n,a(t)};return Object(l.c)("div",{className:"lightbox-component"},Object(l.c)("div",{className:"lightbox-bg"}),Object(l.c)("div",{className:"lightbox-content"},e.images.map((function(n,t){return Object(l.c)("div",{key:t,className:"lightbox-image",style:{display:t===c?"flex":"none"}},Object(l.c)("img",{src:Object(M.a)(n.url)}),Object(l.c)("div",{className:"image-infos"},Object(l.c)("div",{className:"image-name",onClick:function(e){return Object(ae.a)(n.file)}},n.file.name," - ",n.title),Object(l.c)(O.a,{buttons:[{title:"left",icon:"faChevronLeft",action:function(){r(-1)}},{title:"open note",icon:"faExternalLinkAlt",action:function(){Object(ae.a)(n.file)}},{title:"close",icon:"faTimes",action:function(){e.onClose()}},{title:"right",icon:"faChevronRight",action:function(){r(1)}}]})))}))))},le=(Object(s.a)(),Object(d.a)({},b.a)),se=le.els,ue=le.colors,de=(le.font,le.sizes),pe=(le.other,function(e){var n="\n.content-image {\n    width: 90%;\n  }\n.full {\n  .content-image {\n  }\n}\n\n".concat("\n    .main-wrapper.view-image {\n        .mobile-view-toggler {\n            display: none;\n        }\n        \n        .left-wrapper {\n            width: ".concat("desktop"===Object(s.a)()?15:40,"vw ;\n            .left-wrapper-1 {\n                width: 100%\n            }\n            .left-wrapper-2 {\n                display: none;\n            }\n        }\n\n\n        .right-wrapper.dual-viewer-view {\n            display: none;\n        }\n        .right-wrapper {\n            height: 100vh;\n        }\n        .right-wrapper.image-gallery-view {\n            width: ").concat(100-("desktop"===Object(s.a)()?15:40),"vw;\n        }\n    }\n    \n    .main-wrapper.view-text {\n        .right-wrapper.dual-viewer-view {\n            \n        }\n        .right-wrapper.image-gallery-view {\n            display: none;\n        }\n    }\n"),"\n").concat("\n .lightbox-component {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    height: 100vh;\n    \n    .lightbox-bg {\n        top: 0px;\n        left: 0px;\n        width: 100vw;\n        height: 100vh;\n        position: absolute;\n        background: rgba(0,0,0,0.2);\n    }\n\n    .lightbox-content {\n        position: absolute;\n        width: 95vw;\n        height: 95vh;\n        background: black;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%); \n\n        .lightbox-image {\n            position: relative;\n            justify-content: space-around;\n            align-items: center;\n            width: 100%;\n            height: 100%;\n\n            &:hover {\n                .image-infos {\n                    display: block;\n                }\n            }\n            .image-infos {\n                ".concat(b.a.els.imageInfos,"\n                // position: relative;\n                &:hover {\n                    .image-name {\n                        display: block;\n                    }\n                }\n                .image-name {\n                    display: none;\n                    cursor: pointer;\n                    color: grey;\n                    padding: 5px;\n                    font-size: 10px;\n                    position: absolute;\n                    top: 5px;\n                    left: 5px;\n                }\n            }\n            img {\n                max-width: 95vw;\n                max-height: 95vh;\n            }\n        }\n     }\n }\n"),"\n\n").concat("\n    .app-view-switcher-component {\n        margin: 0px 10px 10px 10px;\n        ul.buttons-toolbar-component {\n            li {\n                margin-left: 5px;\n                margin-right: 5px;\n            }\n        }\n    }\n","\n").concat(O.b,"\n\n.main-wrapper {\n  display: flex;\n\n  ").concat("\n .image-gallery-component-wrapper {\n   margin: 0px 17px;\n   overflow-y: scroll;\n  //  height: calc(100vh - ".concat(b.a.sizes.search.padding+b.a.sizes.gallery.topH+("desktop"===Object(s.a)()?0:190),"px);\n   height: calc(100vh - ").concat(b.a.sizes.search.padding+b.a.sizes.gallery.topH,"px);\n  //  height: 100%;\n   width: 100%;\n\n   .masonry-gallery {\n     display: flex;\n     list-style: none;\n     flex-direction: row;\n     flex-wrap: wrap;\n\n     .masonry-col {\n       width: ").concat("desktop"===Object(s.a)()?32:90,"%;\n       margin-right: 1%;\n\n      .masonry-col-item {\n        position: relative;\n        &:hover {\n          .image-infos {\n            display: block;\n          }\n        }\n        .image-infos {\n          display: none;\n         ").concat(b.a.els.imageInfos,"\n        }\n        img {\n          ").concat(b.a.els.images,"\n        }\n        margin-bottom: 10px;\n      }\n     }\n   }\n }\n"),"\n\n  ").concat(ce,"\n\n  ").concat(_,"\n\n  ").concat(k,"\n\n  ").concat(te,"\n\n  ").concat(Q.b,"\n\n  .no-file {\n    text-align: center;\n    margin-top: 49vh;\n  }\n\n\n\n\n\n\n\n\n\n\n\n  ////////////////////////////////////////////v \n  // LEFT 1\n  ////////////////////////////////////////////v\n  \n  ").concat(T,"\n\n  .settings-button {\n    position: fixed;\n    bottom: 10px;\n    right: 10px;\n    z-index: 11;\n  }\n\n\n\n  .left-wrapper {\n    background: ").concat(ue.l2.bg,"; \n    width: ").concat("desktop"===Object(s.a)()?de.desktop.l:"navigator"!==e?0:100,"vw;\n    display: ").concat("desktop"===Object(s.a)()?"flex":"navigator"!==e?"none":"flex",";\n\n\n\n    .left-wrapper-1 {\n      overflow: hidden;\n      background-color: ").concat(ue.l1.bg,"; \n      background-image: url('").concat(b.a.assets.decoBgMap,"');\n      background-blend-mode: color-burn;\n      color: ").concat(ue.l1.font,";\n      width: ").concat(de.desktop.l1,"%;\n      height:100vh;\n      position: relative;\n\n      ").concat(Z,"\n\n      ").concat(J,"\n    }\n\n\n\n\n\n    ////////////////////////////////////////////v \n    // TEXT VIEW : LEFT 2\n    ////////////////////////////////////////////v2\n    .left-wrapper-2 {\n      width: ").concat(de.desktop.l2,"%;\n      height:100vh;\n      overflow: hidden;\n      \n      .top-files-list-wrapper {\n        padding-top: ").concat(de.search.padding,"px;\n        height: ").concat(de.search.h,"px;\n        .subtitle-wrapper {\n          display: flex;\n          h3.subtitle {\n            margin: 0px ").concat(de.block,"px ").concat(de.block,"px ").concat(de.block,"px; \n          }\n          .counter {\n            margin: 0px;\n            margin-top: 2px;\n            color: ").concat(ue.l2.text,";\n            font-size: 10px;\n            font-weight: 800;\n          }\n        }\n      }\n\n      \n    }\n\n    \n\n    \n    \n\n    .files-list-component {\n      position: relative\n    }\n\n    .list-toolbar {\n      position: absolute;\n      top: -93px;\n      right: 0px;\n      color: ").concat(ue.l2.text,";\n      button {\n        color: ").concat(ue.l2.text,";\n        ").concat(se.button,"\n        padding: 0px;\n        margin-right: ").concat(de.block,"px; \n        font-size: 10px;\n        cursor: pointer;\n        span {\n          margin-right: 5px;\n        }\n      }\n\n      .items-list-count {\n        position: absolute;\n        color: grey;\n        font-size: 10px;\n        right: 10px;\n        top: 5px;\n      }\n    }\n\n    \n    ").concat(V,"\n\n    \n  }\n\n  \n\n\n\n\n\n\n\n\n\n  ////////////////////////////////////////////v \n  // IMAGE GALLERY VIEW\n  ////////////////////////////////////////////v\n  .right-wrapper.image-gallery-view {\n    background: ").concat(ue.l2.bg,"; \n    .image-gallery-header {\n      padding-top: ").concat(de.search.padding,"px;\n      height: ").concat(de.gallery.topH,"px;\n\n      .search-bar-component {\n        // padding: 10px 0px;\n      }\n    }\n\n    .image-gallery-component-wrapper {\n      \n    }\n  }\n\n\n\n  ////////////////////////////////////////////v \n  // TEXT VIEW : RIGHT\n  ////////////////////////////////////////////v \n  ").concat(G.b,"\n  .right-wrapper.dual-viewer-view {\n      width: ").concat("desktop"===Object(s.a)()?de.desktop.r:"navigator"!==e?100:0,"vw;\n      display: ").concat("desktop"===Object(s.a)()||"navigator"!==e?"block":"none",";\n      padding-top: 0px;\n    .note-wrapper {\n      .dual-view-wrapper {\n        &.view-editor {\n          .editor-area {\n            width: 100%;\n          }\n          .preview-area {\n            display: none;\n          }\n        }\n        &.view-preview {\n          .editor-area {\n            position: absolute;\n            .main-editor-wrapper {\n              display:none;\n            }\n          }\n          .preview-area {\n            width: 100%;\n            padding: 0px ").concat(3*de.block,"px;\n          }\n        }\n        position:relative;\n        display: ").concat("desktop"===Object(s.a)()?"flex":"block",";\n        \n        \n        \n        ").concat(f.a,"\n        \n\n        ").concat(Object(g.c)(e),"\n\n        ").concat(h.b,"\n\n        ").concat(Object(m.b)(e),"\n        \n      }\n        \n      }\n    \n      \n      \n      h3 {\n        margin-bottom: 0px;\n      }\n      pre {\n        white-space: -moz-pre-wrap; /* Mozilla, supported since 1999 */\n        white-space: -pre-wrap; /* Opera */\n        white-space: -o-pre-wrap; /* Opera */\n        white-space: pre-wrap; /* CSS3 - Text module (Candidate Recommendation) http://www.w3.org/TR/css3-text/#white-space */\n        word-wrap: break-word; /* IE 5.5+ */\n      }\n    }\n  }\n}\n");return Object(p.a)(n,";","")}),fe=t(23),be={title:"",key:"",path:""},ge=function e(n,t){for(var o,c=0;c<t.length;c++)if(t[c].path===n){o=Object(L.cloneDeep)(t[c]);var a=t[c].children;if(Object(L.isArray)(a))for(var r=0;r<a.length;r++){var i=e(a[r].path,t);i&&(o.children[r]=i)}}return o},me=function(e,n){for(var t="add",o=0;o<n.length;o++)e.path===n[o].path&&(n[o]=e,t="update");return"add"===t&&n.push(e),n},he={title:".trash",key:"/.tiro/.trash",path:"/.tiro/.trash"},Oe=function(e,n,t,c){var a=Object(Y.a)("sortMode",2),r=Object(i.a)(a,2),s=r[0],d=r[1],p=Object(o.useState)([]),f=Object(i.a)(p,2),g=f[0],m=f[1],h=Object(o.useState)(1),O=Object(i.a)(h,2),_=O[0],j=(O[1],Object(o.useRef)(0));Object(o.useEffect)((function(){return console.log("[FILES LIST] init socket listener"),j.current=u.b.on("getFiles",(function(e){S(e)})),function(){console.log("[FILES LIST] clean socket listener"),u.b.off(j.current)}}),[]);var x=Object(o.useState)({}),w=Object(i.a)(x,2),E=w[0],k=w[1],C=Object(o.useRef)(0);Object(o.useEffect)((function(){return C.current=u.b.on("getFilesPreview",T),function(){u.b.off(C.current)}}),[E]),Object(o.useEffect)((function(){k({})}),[g]);var T=function(e){for(var n=Object(L.cloneDeep)(E),t=0;t<e.filesPreview.length;t++){var o=e.filesPreview[t];n[o.path]=o}k(n)},F=Object(o.useRef)([]),S=function(e){e.initialResults?F.current=[]:e.temporaryResults?F.current=[].concat(Object(fe.a)(F.current),Object(fe.a)(e.files)):F.current=Object(L.cloneDeep)(e.files),F.current=D(F.current,s),m(F.current),c(F.current,e.temporaryResults||!1,e.initialResults||!1)},D=function(e,n){var t;switch(U[n]){case"alphabetical":t=Object(L.sortBy)(e,[function(e){return e.realname.toLocaleLowerCase()}]);break;case"created":t=Object(L.sortBy)(e,["created"]).reverse();break;case"modified":t=Object(L.sortBy)(e,["modified"]).reverse();break;default:t=Object(L.sortBy)(e,[function(e){return e.realname.toLocaleLowerCase()}])}return t};return{activeFileIndex:e,setActiveFileIndex:n,files:g,setFiles:m,askForFolderFiles:function(e){u.b.emit("askForFiles",{folderPath:e,token:Object(ne.a)()})},FilesListComponent:function(o){return Object(v.a)(Object(l.c)("div",{className:"files-list-component"},Object(l.c)("div",{className:"list-toolbar"},Object(l.c)("button",{type:"button",title:"sort",onClick:function(e){var n=s+1>=U.length?0:s+1;d(n),m(D(g,n))}},Object(l.c)("span",null," ",g.length>0&&Object(l.c)("span",{className:"list-count"},"(",g.length,")")," ",B[s]," "),Object(l.c)(y.a,{name:"faSort",color:b.a.colors.l2.text}))),Object(l.c)("div",{className:"list-wrapper"},Object(l.c)(W,{files:g,filesPreview:E,hoverMode:!1,activeFileIndex:e,modifierPressed:t,sortMode:s,onFileClicked:function(e){n(e),o.onFileClicked(e)},onFileDragStart:o.onFileDragStart,onFileDragEnd:o.onFileDragEnd,onVisibleItemsChange:function(e){!function(e){for(var n=[],t=0;t<e.length;t++){var o=e[t];E[o]||n.push(o)}n.length>1?(console.log("[LIST PREVIEW] askFilesPreview ".concat(e.length," asked but sent request for ").concat(n.length)),u.b.emit("askFilesPreview",{filesPath:n,token:Object(ne.a)()})):console.log("[LIST PREVIEW] no request sent")}(e)}}))),[g,e,s,_,t,E])}}},ve=function(e){var n="".concat(e).substr(0,10);return parseInt(n)},_e=t(178),je=function(e){var n=function(){var e=Object(o.useState)(0),n=Object(i.a)(e,2),t=n[0],c=n[1];return{syncScrollY:t,updateSyncScroll:function(e){var n=(e>0?1:-1)*Math.min(Math.abs(e),40),o=t+n,a=m.c.main.current,r=h.c?h.c.getContentHeight():0,i=Math.max(a.offsetHeight,r);o>-200&&o<i&&c(o)},setPosY:c}}(),t=n.syncScrollY,c=n.updateSyncScroll,a=n.setPosY,r=Object(Y.a)("viewtype","both"),s=Object(i.a)(r,2),u=s[0],d=s[1],p=Object(o.useState)(""),f=Object(i.a)(p,2),b=f[0],O=f[1];return Object(_e.a)("fileContent",{description:"live updated currentFileContent",func:function(){return b}}),Object(o.useEffect)((function(){O(e.fileContent)}),[e.fileContent]),Object(o.useEffect)((function(){a(1)}),[e.file.path]),Object(l.c)("div",{className:"dual-view-wrapper view-".concat(u),onWheelCapture:function(e){c(e.deltaY)}},Object(l.c)(g.a,{file:e.file,posY:t,fileContent:e.fileContent,canEdit:e.canEdit,isLeavingNote:e.isLeavingNote,onScroll:function(e){},onFileTitleEdited:e.onFileTitleEdited,onSavingHistoryFile:e.onSavingHistoryFile,onFileEdited:function(n,t){e.onFileEdited(n,t),O(t)},onFileDelete:e.onFileDelete,onBackButton:e.onBackButton,onLightboxClick:e.onLightboxClick,onViewToggle:function(){"both"===u&&d("editor"),"editor"===u&&d("preview"),"preview"===u&&d("both")}}),Object(l.c)(m.a,{file:e.file,posY:t,fileContent:b}))},xe=t(123),we=t(157),Ee=!1,ke=function(e){if(!e)return null;if(e.startsWith(we.a.metas.headerStart)&&(Ee=!0),e.startsWith(we.a.metas.headerEnd)&&(Ee=!1),""===e)return null;if(!Ee)return null;var n=e.split(": ");if(2!==n.length)return null;var t=n.shift();if(!t)return null;var o,c=n.join(":").trim();if("created"===t||"modified"===t){o=c,c=parseInt(o).toString()===o?ve(c):c;var a=new Date(c).getTime();isNaN(a)||(c=a)}return{name:t,value:c}},ye=function(e,n,t,c,a,r,s,d){var p=Object(o.useState)(null),f=Object(i.a)(p,2),b=f[0],g=f[1],m=Object(o.useState)({}),h=Object(i.a)(m,2),O=h[0],_=h[1],j=Object(o.useState)(!1),x=Object(i.a)(j,2),w=x[0],E=x[1],k=Object(o.useRef)(0);Object(o.useEffect)((function(){return console.log("[FILE CONTENT] init socket listener"),k.current=u.b.on("getFileContent",(function(e){console.log("[FILE CONTENT] getFileContent",e),E(!0);var n=function(e){var n=e.match(xe.a.metas),t={};if(n&&n[0])for(var o=n[0].split("\n"),c=0;c<o.length;c++){var a=ke(o[c]);a&&(t[a.name]=a.value)}return{metas:t,content:e.replaceAll(xe.a.metas,"")}}(e.fileContent);_(n.metas),g(n.content)})),function(){console.log("[FILE CONTENT] clean socket listener"),u.b.off(k.current)}}),[]);var y=function(n,t){var o=Object(L.cloneDeep)(O);o.created||(o.created=ve(e&&e.created?e.created:Date.now())),o.modified=ve(Date.now());var c="".concat(function(e){var n="".concat(we.a.metas.headerStart,"\n");return Object(L.each)(e,(function(e,t){n+="".concat(t,": ").concat(e,"\n")})),n+="".concat(we.a.metas.headerEnd)}(o)).concat(t);console.log("[FILE CONTENT] API -> ask for file save",{filepath:n,contentWithMeta:c}),u.b.emit("saveFileContent",{filepath:n,newFileContent:c,token:Object(ne.a)()})};return{setFileContent:g,fileContent:b,setCanEdit:E,askForFileContent:function(e){e&&e.name.endsWith(".md")&&(g("loading..."),E(!1),u.b.emit("askForFileContent",{filePath:e.path,token:Object(ne.a)()}))},DualViewerComponent:function(o){return Object(v.a)(Object(l.c)("div",{className:"note-wrapper"},e&&Object(l.c)(je,{file:e,canEdit:w,isLeavingNote:o.isLeavingNote,forceRender:o.forceRender,fileContent:b||"",onFileEdited:y,onFileTitleEdited:function(n,t){var o="".concat(e.folder,"/").concat(n,".md"),c="".concat(e.folder,"/").concat(t,".md");console.log("[FILE CONTENT] onFileTitleEdited =>",{initPath:o,endPath:c}),s(o,c),a.current=0},onSavingHistoryFile:function(e,n,t){console.log("[FILE CONTENT] onSavingHistoryFile ".concat(t," => ").concat(e)),u.b.emit("createHistoryFile",{filePath:e,content:n,historyFileType:t,token:Object(ne.a)()})},onFileDelete:function(e){console.log("[FILE CONTENT] onFileDelete => ".concat(e));var o=n;o>0?a.current=o-1:0===o&&c.length>0?a.current=0:r(),u.b.emit("onFileDelete",{filepath:e,token:Object(ne.a)()}),d(t)},onLightboxClick:o.onLightboxClick,onBackButton:o.onBackButton}),!e&&Object(l.c)("div",{className:"no-file"},"No file")),[b,e,w,o.isLeavingNote,o.forceRender])}}},Ce=t(195),Te=t(203),Fe=t(231),Se=function(e){return e.path.substr(0,e.path.length-(e.title.length+1))},De=function(e,n,t,o){var c=function(e,n){console.log("[MOVEFILE] ".concat(e," -> ").concat(n)),u.b.emit("moveFile",{initPath:e,endPath:n,token:Object(ne.a)()})};return{askForMoveFile:c,promptAndBatchMoveFiles:function(n,t){if(window.confirm("move ".concat(null===n||void 0===n?void 0:n.length," files to ").concat(t.key,"? (example: ").concat(n[0].path," to ").concat(t.key,"/").concat(n[0].name))){for(var o=0;o<n.length;o++){var a=n[o],r="".concat(a.path),i="".concat(t.key,"/").concat(a.name);c(r,i)}e()}},promptAndMoveFolder:function(c){var a=Object(d.a)({},c),r=a.folder,i=a.folderToDropInto,l=a.folderBasePath,s=a.newTitle,p=a.renameOnly,f=[r.path,"".concat(p?Se(i):i.path,"/").concat(s||r.title)],b="".concat(l,"/").concat(f[0]),g="".concat(l,"/").concat(f[1]);window.confirm("".concat(x.a.moveFolderPrompt," ").concat(b," to ").concat(g,"?"))&&(!function(e,n){console.log("[MOVEFOLDER] ".concat(e," -> ").concat(n)),u.b.emit("moveFolder",{initPath:e,endPath:n,token:Object(ne.a)()})}(b,g),e(),n(),t(),Object(Te.c)({}),o([Se(r),i.path]),setTimeout((function(){o([Se(r),i.path])}),1e3))}}},Pe=function(e,n,t){((e=e||window.event).keyCode==={up:38,down:40,ctrl:17,shift:16,alt:18,enter:13}[n]||e.key===n)&&t()},Ie=function(e){return e=(e=(e=e.split("//").join("/")).split("\\").join("/")).split("//").join("/")},Le=Object(l.b)("*{-webkit-print-color-adjust:exact!important;color-adjust:exact!important;}*:focus{outline:none;}body{margin:0;padding:0px;background:",b.a.colors.bg.light,";font-size:11px;font-family:",b.a.font.main,";}html,body{height:100vh;overflow:hidden;}button,input{font-family:",b.a.font.main,";font-weight:700;color:",b.a.colors.l2.title,";}@media print{","\n\n    .preview-title, .date,\n    .editor-area, .connected, .left-wrapper, .connection-status, .mobile-view-toggler {\n        display:none!important;\n    }\n    html, body {\n        overflow: auto!important;\n        height: auto!important;\n        background-color: white;\n    }\n    .main-wrapper .right-wrapper.dual-viewer-view {\n        width: 100vw!important;\n    }\n    .preview-area-wrapper {\n        .infos-preview-wrapper {\n            .file-path-wrapper {\n                display:none!important;\n            }\n            .title {\n                margin-bottom: 40px!important;\n                line-height: 40px;\n            }\n            display:block!important;\n        }\n        height: auto!important;\n        display:block!important;\n        overflow: visible!important;\n        width: 100vw!important;\n        margin-top: 20px!important;\n        top: 0;\n        font-family: arial, sans-serif!important;\n        left: 0;\n        margin: 0;\n        padding: 15px;\n        font-size: 14px;\n        line-height: 18px;\n    }\n",";}body{position:relative;}h3.subtitle{margin:0px 0px ",b.a.sizes.block,"px 0px;font-family:",b.a.font.main,";text-transform:uppercase;font-size:14px;font-weight:800;font-style:italic;color:",b.a.colors.main,";}.invisible-scrollbars{height:100vh;padding-right:20px;width:calc(100% + ",b.a.sizes.scrollbar,"px);box-sizing:content-box;overflow-y:scroll;}",""),Re=t(215);r.a.render(Object(l.c)((function(){Object(o.useEffect)((function(){return console.log("========= [APP] MOUNTED on a ".concat(Object(s.a)())),Object(u.d)().then((function(){on(!0),le($)})),function(){console.log("app will unmount")}}),[]);var e=Object(o.useRef)(null),n=Object(o.useRef)(""),t=Object(o.useRef)(""),a=function(){F(-1),qe(null)},r=function(){R([])},p=function(){U([])},f=function(){console.log("[cleanListAndFileContent]"),a(),r(),p()},b=function(n,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n=Ie(n),console.log("[FOLDER CHANGED] to ".concat(n," with view ").concat(t)),dn(!0),setTimeout((function(){we(""),ae(n),f(),"text"===t?(o&&(e.current=0),M(n),dn(!1)):"image"===t&&(ae(n),W(n))}))},g=Object(L.debounce)((function(){je(!1)}),100),m=function(e){var n=Object(o.useState)(!1),t=Object(i.a)(n,2),a=t[0],r=t[1],s=Object(o.useState)(""),d=Object(i.a)(s,2),p=d[0],f=d[1],b=Object(o.useState)(""),g=Object(i.a)(b,2),m=g[0],h=g[1],O=Object(o.useState)(""),v=Object(i.a)(O,2),_=v[0],j=v[1],w=Object(o.useState)(),E=Object(i.a)(w,2),k=E[0],y=E[1],C=Object(o.useRef)(0);return Object(o.useEffect)((function(){return console.log("[SETUP CONFIG] init socket listener"),C.current=u.b.on("getSetupInfos",(function(n){"SUCCESS_CONFIG_CREATION"===n.code?(y(["success","".concat(x.a.setupForm.successReload)]),setTimeout((function(){window.location.reload()}),3e3)):"ASK_SETUP"===n.code?(e.cleanAllApp(),r(!0)):y(["error","".concat(n.code,": ").concat(n.message)])})),function(){console.log("[SETUP CONFIG] clean socket listener"),u.b.off(C.current)}}),[]),{displayWelcomePopup:a,SetupPopupComponent:function(e){return Object(l.c)(c.a.Fragment,null,a&&Object(l.c)("div",{className:"setup-popup-component"},Object(l.c)(ee.a,{title:"Welcome to Tiro",onClose:function(){}},Object(l.c)("p",null,x.a.setupForm.introText)," ",Object(l.c)("br",null),Object(l.c)("div",null,Object(l.c)(Q.a,{value:p,label:x.a.setupForm.user,explanation:x.a.setupForm.userExplanation,onChange:function(e){f(e)}}),Object(l.c)(Q.a,{value:m,label:x.a.setupForm.password,type:"password",explanation:x.a.setupForm.passwordExplanation,onChange:function(e){h(e)}}),Object(l.c)(Q.a,{value:_,label:x.a.setupForm.dataFolder,explanation:x.a.setupForm.folderExplanation,onChange:function(e){j(e)}}),Object(l.c)("input",{type:"button",value:"submit",className:"submit-button",onClick:function(e){y(void 0),u.b.emit("sendSetupInfos",{form:{user:p,password:m,dataFolder:_},token:Object(ne.a)()})}}),k&&Object(l.c)("div",{className:k[0]},k[1])))))}}}({cleanAllApp:function(){console.log("[cleanAllApp]"),en(),ue(),a(),r(),p()}}).SetupPopupComponent,h=Object(ne.b)({onLoginAsked:function(){f()},onLoginSuccess:function(){cn()}}).LoginPopupComponent,_=Object(o.useState)(-1),k=Object(i.a)(_,2),T=k[0],F=k[1],S=function(e){var n=Object(o.useState)(!1),t=Object(i.a)(n,2),c=t[0],a=t[1],r=Object(o.useRef)(!1),l=Object(o.useRef)(!1);return Object(o.useEffect)((function(){return window.onkeydown=function(n){e.onKeyDown(n),Pe(n,"ctrl",(function(){l.current=!0})),Pe(n,"shift",(function(){a(!0)})),Pe(n,"alt",(function(){r.current=!0}))},window.onkeyup=function(n){e.onKeyUp(n),Pe(n,"ctrl",(function(){l.current=!1})),Pe(n,"shift",(function(){a(!1)})),Pe(n,"alt",(function(){r.current=!1}))},function(){}}),[e.activeFileIndex]),{ctrlPressed:l,shiftPressed:c,setShiftPressed:a,altPressed:r}}({activeFileIndex:T,onKeyDown:function(e){Pe(e,"up",(function(){var e=T;e>0&&(F(e-1),Je(I[e-1]))})),Pe(e,"down",(function(){var e=T;e<I.length-1&&(F(e+1),Je(I[e+1]))}))},onKeyUp:function(e){}}),D=S.shiftPressed,P=(S.ctrlPressed,S.altPressed,Oe(T,F,D,(function(o,c,a){if(c?je(c):g(),0!==o.length){if(-1!==T&&T<o.length&&Je(o[T]),Object(L.isNumber)(e.current)){console.log("[LOAD] shouldLoadNoteIndex detected, loading note ".concat(e.current));var r=e.current;o.length>=r+1&&(F(r),Je(o[r])),e.current=null}if(ce===n.current&&xe===t.current||(o.length>=1&&Je(o[0]),F(0),n.current=ce,t.current=xe),!c&&!a){var i=He(o);-1!==i&&o[i]&&(F(i),Je(o[i]))}}}))),I=P.files,R=P.setFiles,M=P.askForFolderFiles,A=P.FilesListComponent,N=function(e){var n=Object(o.useState)([]),t=Object(i.a)(n,2),c=t[0],a=t[1],r=Object(o.useRef)(0);Object(o.useEffect)((function(){return console.log("[IMAGES LIST] init socket listener"),r.current=u.b.on("getImages",(function(e){l(e)})),function(){console.log("[IMAGES LIST] clean socket listener"),u.b.off(r.current)}}),[]);var l=function(n){a(n.images),e(n.images)};return{images:c,setImages:a,askForFolderImages:function(e){u.b.emit("askForImages",{folderPath:e,token:Object(ne.a)()})},onImagesReceivedCallback:e}}((function(e){console.log("[IMAGES CALLBACK] images nb: ".concat(e.length)),je(!1)})),B=N.images,U=N.setImages,W=N.askForFolderImages,z=function(e){var n=Object(o.useState)("text"),t=Object(i.a)(n,2),c=t[0],a=t[1],r=function(n){console.log("[APP VIEW] switching from ".concat(c," to ").concat(n)),a(n),setTimeout((function(){e.onViewSwitched(n)}))};return{currentAppView:c,switchAppView:r,AppViewSwitcherComponent:function(){var e="text"===c?"image":"text",n=[{icon:"faFileAlt",title:x.a.appviews.text,action:function(n){"image"===c&&r(e)},active:"text"===c},{icon:"faFileImage",title:x.a.appviews.image,action:function(n){"text"===c&&r(e)},active:"image"===c}];return Object(l.c)("div",{className:"app-view-switcher-component"},Object(l.c)(O.a,{buttons:n}))}}}({onViewSwitched:function(e){b(ce,e)}}),K=z.currentAppView,H=z.switchAppView,V=z.AppViewSwitcherComponent,G=function(e){var n=Object(Y.a)("foldersFlat",[]),t=Object(i.a)(n,2),c=t[0],a=t[1],r=Object(o.useState)(be),s=Object(i.a)(r,2),d=s[0],p=s[1],f=Object(Y.a)("folderBasePath",""),b=Object(i.a)(f,2),g=b[0],m=b[1],h=Object(Y.a)("selectedFolder",""),O=Object(i.a)(h,2),_=O[0],j=O[1],x=Object(Y.a)("openFolders",["/"]),w=Object(i.a)(x,2),E=w[0],k=w[1],y=Object(o.useRef)(0);return Object(o.useEffect)((function(){return console.log("[TREE FOLDER] init socket listener"),y.current=u.b.on("getFoldersScan",(function(e){for(var n=c,t=0;t<e.folders.length;t++)e.folders[t]&&(n=me(e.folders[t],n));a(n);var o=ge("/",n);o&&p(o),m(e.pathBase)})),function(){console.log("[TREE FOLDER] clean socket listener"),u.b.off(y.current)}}),[]),{openFolders:E,addToOpenedFolders:function(e){k([].concat(Object(fe.a)(E),[e]))},removeToOpenedFolders:function(e){var n=E,t=n.indexOf(e);t>-1&&n.splice(t,1),k(n)},folderBasePath:g,selectedFolder:_,setSelectedFolder:j,cleanFolderHierarchy:function(){p(be)},askForFolderScan:function(e){console.log("[TREE FOLDER] askForFolderScan with foldersPaths:",{foldersPaths:e}),u.b.emit("askFoldersScan",{foldersPaths:e,token:Object(ne.a)()})},FolderTreeComponent:function(n){return Object(v.a)(Object(l.c)(q,{current:_,folder:d,onFolderClicked:n.onFolderClicked,onFolderMenuAction:n.onFolderMenuAction,onFolderOpen:n.onFolderOpen,onFolderClose:n.onFolderClose,onFolderDragStart:n.onFolderDragStart,onFolderDragEnd:n.onFolderDragEnd,onFolderDrop:n.onFolderDrop}),[d,E,_,e])}}}(K),$=G.openFolders,J=G.addToOpenedFolders,Z=G.removeToOpenedFolders,te=G.folderBasePath,ce=G.selectedFolder,ae=G.setSelectedFolder,le=G.askForFolderScan,se=G.FolderTreeComponent,ue=G.cleanFolderHierarchy,de=function(e,n,t){var c=Object(o.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],d=Object(o.useState)(!1),p=Object(i.a)(d,2),f=p[0],b=p[1];Object(_e.a)("triggerSearch",{description:"trigger a search programmatically",func:function(e){console.log("[SEARCH FROM LINK] for ".concat(e)),e=Object(Ce.a)(e,[["_","-"]]),g(e)}});var g=function(o){console.log("[APP -> TRIGGER SEARCH] with type ".concat(t," : ").concat(o)),s(o),b(!0),e.current=0,u.b.emit("searchFor",{term:o,token:Object(ne.a)(),type:t}),n()};return{isSearching:f,setIsSearching:b,searchTerm:r,setSearchTerm:s,triggerSearch:g,SearchBarComponent:function(e){return Object(v.a)(Object(l.c)(oe,{onSearchSubmit:function(){g(r)},onSearchTermUpdate:function(n,t){""===r&&""!==e.selectedFolder&&(n=n+" "+e.selectedFolder,t&&setTimeout((function(){var n=(t.selectionStart||0)-e.selectedFolder.length-1;t.selectionStart=n,t.selectionEnd=n}),10)),s(n)},searchTerm:r,isSearching:f}),[r,e.selectedFolder,f,t])}}}(e,f,K),ve=de.isSearching,je=de.setIsSearching,xe=de.searchTerm,we=de.setSearchTerm,Ee=de.triggerSearch,ke=de.SearchBarComponent,Se=function(){var e=Object(o.useState)("navigator"),n=Object(i.a)(e,2),t=n[0],a=n[1];return{mobileView:t,setMobileView:a,MobileToolbarComponent:function(e){return Object(v.a)(Object(l.c)(c.a.Fragment,null,"desktop"!==Object(s.a)()&&Object(l.c)(O.a,{class:"mobile-view-toggler",buttons:[{icon:"faStream",class:"".concat("navigator"===t?"active":""),action:function(){a("navigator")}},{icon:"faPenNib",class:"".concat("editor"===t?"active":""),action:function(){a("editor")}},{icon:"faEye",class:"".concat("preview"===t?"active":""),action:function(){a("preview")}}]})),[t,e])}}}(),Me=Se.mobileView,Ae=Se.setMobileView,Ne=Se.MobileToolbarComponent,Be=De(a,r,ue,le),Ue=Be.askForMoveFile,We=Be.promptAndMoveFolder,ze=Be.promptAndBatchMoveFiles,Ke=function(e){var n=Object(d.a)({},e),t=n.changeToFolder,c=n.currentAppView,a=Object(o.useRef)(),r=function(e,n){console.log("[TITLE SEARCH] => ".concat(e,"-").concat(n)),a.current=e,t(n,c,!1)};return Object(_e.a)("searchFileFromTitle",{description:"searchFileFromTitle",func:function(e,n){console.log("[searchFileFromTitle]"),r(e,n)}}),{searchedFileTitle:a,getSearchedTitleFileIndex:function(e){if(!a.current)return-1;console.log('[TITLE SEARCH] getSearchedTitleFileIndex start searching for "'.concat(a.current,'" in ').concat(e.length," files"));var n=0,t=a.current;a.current=void 0;for(var o=0;o<e.length;o++){var c=e[o];if(c.name.includes(t))return console.log("[TITLE SEARCH] NOTE FOUND ".concat(c.name,",").concat(o)),o}return n},searchFileFromTitle:r}}({changeToFolder:b,currentAppView:K}),He=Ke.getSearchedTitleFileIndex,Ve=Ke.searchFileFromTitle,Ge=I[T],Ye=ye(Ge,T,ce,I,e,a,Ue,M),qe=(Ye.fileContent,Ye.setFileContent),$e=Ye.setCanEdit,Je=Ye.askForFileContent,Xe=Ye.DualViewerComponent,Ze=function(e){var n=Object(Y.a)("filesHistory",[]),t=Object(i.a)(n,2),c=t[0],a=t[1];Object(o.useEffect)((function(){console.log("[HISTORY] activeFile changed!",e),e&&r(e),e&&r(e)}),[e]);var r=Object(Fe.a)((function(e){console.log("[HISTORY] Add to history",e.name);for(var n=!0,t=-1,o=c,r=0;r<c.length;r++)c[r].name===e.name&&(n=!1,t=r);n||o.splice(t,1),(o=o.slice(0,20)).unshift(e),a(o)}),1e3);return{filesHistory:c,cleanLastFilesHistory:function(){a([])}}}(Ge),Qe=Ze.filesHistory,en=Ze.cleanLastFilesHistory,nn=function(e){var n=Object(o.useRef)([]),t=Object(o.useState)(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(o.useState)(!1),d=Object(i.a)(s,2),p=d[0],f=d[1],b="(DISCONNECTED)",g=Object(o.useRef)(b);Object(w.a)((function(){g.current=g.current===b?"(/!\\ DISCONNECTED /!\\)":b;var e=a?"".concat(E()," (Connected)"):"".concat(E()," ").concat(g.current);document.title=e}),1e3),Object(o.useEffect)((function(){return n.current[0]=u.b.on("disconnect",(function(){m(!1),e(!1)})),n.current[1]=u.b.on("reconnect",(function(){m(!0),f(!0),setTimeout((function(){f(!1)}),1e3),e(!0)})),n.current[2]=u.b.on("connect",(function(){m(!0),f(!0),setTimeout((function(){f(!1)}),1e3),e(!0)})),function(){n.current.forEach((function(e){u.b.off(e)}))}}),[]);var m=function(e){console.log("[SOCKET CONNECTION TOGGLE] to ".concat(e)),r(e)};return{connectionStatusComponent:function(){var e=["connected","connected"];return p&&(e=["back-online","back online"]),a||(e=["disconnected","disconnected"]),Object(l.c)("div",{className:"connection-status"},Object(l.c)("div",{className:e[0]},e[1],!a&&Object(l.c)("a",{href:"".concat(Object(u.c)(),"/socket.io/"),target:"_blank"},x.a.clickHereDisconnected)))},toggleSocketConnection:m}}($e),tn=nn.connectionStatusComponent,on=nn.toggleSocketConnection;Object(w.a)((function(){}),1e3);var cn=function(e,n,t,c,a,r,i){var l=Object(o.useRef)(!1);Object(o.useEffect)((function(){u()}),[]);var s=function(){var e=Object(Te.a)();i.reactToUrlParams(e)},u=function(){s(),Object(Te.b)({onUrlParamsChange:function(e){l.current=!0,i.reactToUrlParams(e)}})},d=Object(Fe.a)((function(){if(l.current)return l.current=!1;var e=c?c.realname:"";("text"!==r||c)&&Object(Te.c)({title:e,folder:t,search:n,appview:r})}),200);return Object(o.useEffect)((function(){d()}),[a,t,e,r]),{reactToUrl:s}}(ve,xe,ce,Ge,T,K,{reactToUrlParams:function(e){setTimeout((function(){console.log("[URL] to url params changes ".concat(JSON.stringify(e))),e.folder&&e.title&&Ve(e.title,e.folder),e.search&&(console.log("reactToUrlParams -> triggersearch"),Ee(e.search)),e.mobileview&&Ae(e.mobileview),e.appview&&H(e.appview)}),1e3)}}).reactToUrl,an=function(){var e=Object(o.useState)(!1),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(o.useRef)(0);return Object(o.useEffect)((function(){var e=Object(L.debounce)((function(){a.current=a.current+1,c(!0),setTimeout((function(){c(!1)}),200)}),200);return window.addEventListener("resize",(function(){e()})),function(){}}),[]),{forceResponsiveRender:t,frr:a}}().forceResponsiveRender,rn=Object(o.useRef)([]);Object(_e.a)("variables",{description:"variables for script uses",func:function(){return{file:I[T],config:j.a}}});var ln=Object(o.useState)(!1),sn=Object(i.a)(ln,2),un=sn[0],dn=sn[1],pn=Object(o.useState)(!1),fn=Object(i.a)(pn,2),bn=fn[0],gn=fn[1],mn=Object(o.useState)([]),hn=Object(i.a)(mn,2),On=hn[0],vn=hn[1],_n=Object(o.useState)(0),jn=Object(i.a)(_n,2),xn=jn[0],wn=jn[1],En=function(e,n){console.log("[LIGHTBOX] open ".concat(n.length," images to index ").concat(e),{images:n}),vn(n),wn(e)};return Object(l.c)("div",{className:pe(Me)},Object(l.c)(l.a,{styles:Le}),Object(l.c)("div",{role:"dialog",className:"main-wrapper view-".concat(K)},h({}),m({}),tn(),Ne(an),Object(l.c)("div",{className:"left-wrapper"},Object(l.c)("div",{className:"left-wrapper-1"},Object(l.c)("div",{className:"invisible-scrollbars"},"text"===K&&Object(l.c)(C,{onNewFile:function(){u.b.emit("createNote",{folderPath:ce,token:Object(ne.a)()}),e.current=0}}),"text"===K&&Object(l.c)(X,{files:Qe,onClick:function(e){Ve(e.name,e.folder)}}),se({onFolderClicked:function(e){je(!0),b(e,K)},onFolderMenuAction:function(e,n,t){var o,c,a;"rename"===e&&t?We({folder:n,folderToDropInto:n,folderBasePath:te,newTitle:t,renameOnly:!0}):"create"===e&&t?(c=t,a=n,console.log("[askFolderCreate]",c,a),u.b.emit("askFolderCreate",{newFolderName:c,parent:a,token:Object(ne.a)()}),le([n.path])):"moveToTrash"===e?We({folder:n,folderToDropInto:he,folderBasePath:te,newTitle:t}):"delete"===e&&(o=n,console.log("[askFolderDelete]",o),u.b.emit("askFolderDelete",{folderToDelete:o,token:Object(ne.a)()}),le([n.path]))},onFolderOpen:function(e){J(e),le([e])},onFolderClose:function(e){Z(e)},onFolderDragStart:function(e){console.log("[DRAG MOVE] onFolderDragStart",e),rn.current=[{type:"folder",folder:e}]},onFolderDragEnd:function(){console.log("[DRAG MOVE] onFolderDragEnd"),rn.current=[]},onFolderDrop:function(e){!function(e){console.log("[DRAG MOVE] processDragDropAction ->",rn.current,e);var n=rn.current[0];"file"===n.type&&n.files?ze(n.files,e):"folder"===n.type&&n.folder&&We({folder:n.folder,folderToDropInto:e,folderBasePath:te})}(e)}})),Object(l.c)("div",{className:"settings-button",onClick:function(){gn(!bn)}},Object(l.c)(y.a,{name:"faCog",color:"grey"})),bn&&Object(l.c)(Re.a,{onClose:function(){gn(!1)}})),Object(l.c)("div",{className:"left-wrapper-2"},Object(l.c)("div",{className:"top-files-list-wrapper"},Object(l.c)("div",{className:"subtitle-wrapper"},Object(l.c)(V,null)),ke({selectedFolder:ce})),Object(l.c)("div",{className:"files-list-wrapper"},A({selectedFolder:ce,searchTerm:xe,onFileClicked:function(e){F(e),Je(I[e])},onFileDragStart:function(e){console.log("[DRAG MOVE] onFileDragStart",e),rn.current=[{type:"file",files:e}]},onFileDragEnd:function(){console.log("[DRAG MOVE] onFileDragEnd"),rn.current=[]}})))),Object(l.c)("div",{className:"right-wrapper image-gallery-view"},Object(l.c)("div",{className:"image-gallery-header"},Object(l.c)("div",{className:"subtitle-wrapper"},Object(l.c)(V,null)),ke({selectedFolder:ce})),Object(l.c)(re,{images:B,onImageClicked:En,forceRender:an})),Object(l.c)("div",{className:"right-wrapper dual-viewer-view"},Xe({isLeavingNote:un,forceRender:an,onLightboxClick:En,onBackButton:function(){var e=Qe[0];Qe[0]&&(console.log("BACK BUTTON to",Qe[0].name),Ve(e.name,e.folder))}}))),On.length>0&&Object(l.c)(ie,{images:On,startingIndex:xn,onClose:function(e,n){console.log("[LIGHTBOX] close"),vn([]),wn(0)}}))}),null),document.getElementById("root"))},90:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return b}));var o=t(14),c=t(22),a=t.n(c),r=t(157),i=t(143),l=t(166),s=t(52),u=t(50),d=t(19),p=function(){var e=function(e){var n,t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?null===(n=t.pop())||void 0===n?void 0:n.split(";").shift():void 0}("tiro-login-token");return e||""},f=function(e){!function(e,n,t){var o=new Date;o.setTime(o.getTime()+60*t*60*1e3);var c="expires="+o.toUTCString();document.cookie=e+"="+n+";"+c+";path=/"}("tiro-login-token",e,r.a.tokenRefreshInHours)},b=function(e){var n=Object(c.useState)(!1),t=Object(o.a)(n,2),r=t[0],b=t[1],g=Object(c.useState)(""),m=Object(o.a)(g,2),h=m[0],O=m[1],v=Object(c.useState)(""),_=Object(o.a)(v,2),j=_[0],x=_[1],w=Object(c.useState)(),E=Object(o.a)(w,2),k=E[0],y=E[1],C=Object(c.useRef)(0);Object(c.useEffect)((function(){return C.current=s.b.on("getLoginInfos",(function(n){switch(n.code){case"SUCCESS":if(!n.token)return;f(n.token),b(!1),e.onLoginSuccess();break;case"WRONG_TOKEN":b(!0),y(["error",u.a.loginForm.wrongToken]),e.onLoginAsked();break;case"WRONG_USER_PASSWORD":y(["error",u.a.loginForm.wrongUserPassword]),b(!0)}})),function(){s.b.off(C.current)}}),[]);var T=function(){y(void 0),s.b.emit("sendLoginInfos",{user:h,password:j,token:p()})},F=Object(c.useState)(1),S=Object(o.a)(F,2),D=S[0],P=S[1];return{displayLoginPopup:r,LoginPopupComponent:function(e){return Object(d.c)(a.a.Fragment,null,r&&Object(d.c)("div",{className:"setup-popup-component"},Object(d.c)(l.a,{title:u.a.setupForm.title,onClose:function(){}},Object(d.c)("div",null,Object(d.c)(i.a,{shouldFocus:1===D,value:h,onEnterPressed:function(){P(2)},label:u.a.setupForm.user,onChange:function(e){O(e)}}),Object(d.c)(i.a,{shouldFocus:2===D,value:j,label:u.a.setupForm.password,type:"password",onEnterPressed:function(){T()},onChange:function(e){x(e)}}),Object(d.c)("button",{value:"submit",className:"submit-button",onClick:function(e){T()}},u.a.setupForm.submit),k&&Object(d.c)("div",{className:k[0]},k[1])))))}}}},97:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var o={log:{socket:!0,eventManager:!0,upload:!1},version:"20.14.2 26/10/2021 -- Beautiful Bird",global:{protocol:"//",url:"".concat(window.location.hostname),port:"80"===window.location.port?"":":".concat(window.location.port)},params:{previewArea:{scrollSpeed:1.3}}}}},[[611,3,4]]]);