(this["webpackJsonptiro-notes-client"]=this["webpackJsonptiro-notes-client"]||[]).push([[2],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(14),c=n(22);function a(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(o){return console.log(o),t}})),a=Object(o.a)(n,2),r=a[0],i=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(o){console.log(o)}}]}},117:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var o=n(118),c=n.n(o),a=n(124),r={img:c()().find(".").then("jpg").or("jpeg").or("png").or("gif").or("webm").or("svg"),imgMdConfig:c()().anythingBut("[]|").maybe("|").beginCapture().anythingBut("[]|").endCapture().maybe("|").beginCapture().anythingBut("[]|").endCapture()},i={metas:c()().find(a.a.metas.headerStart).beginCapture().anythingBut("").endCapture().then(a.a.metas.headerEnd),baliseHtml:c()().find("<").anythingBut("<>").then(">"),ressource:c()().find("![").beginCapture().anythingBut("[]").endCapture().then("](").beginCapture().anythingBut("()").endCapture().then(")"),ref:c()().find("[").anythingBut("[]").then("](").anythingBut("()").then(")"),extimage:c()().find("![").anythingBut("[]").then("](").beginCapture().then("http").anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),image:c()().find("![").anythingBut("[]").then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),imageAndTitleCapture:c()().find("![").beginCapture().anythingBut("[]").endCapture().then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),imageAndConfig:c()().find("![").then(r.imgMdConfig).then("](").beginCapture().anythingBut("()").then(r.img).anythingBut("()").endCapture().then(")"),searchlink:c()().find("[search|").beginCapture().anythingBut("[]").endCapture().then("]"),linklink:c()().find("[link|").beginCapture().anythingBut("[]").endCapture().then(" ").beginCapture().then("/").anythingBut("[]").endCapture().then("]"),latexTag:c()().find("[[latex]]").beginCapture().anythingBut("").endCapture().then("[[latex]]"),scriptTag:c()().find("[[script]]").beginCapture().anythingBut("").endCapture().then("[[script]]"),url2transform:c()().find("!").beginCapture().find("http").maybe("s").then("://").beginCapture().anything().endCapture().endCapture(),searchFolder:c()().find(" /").anything().endOfLine(),searchFolderNoSpace:c()().find("/").anything().endOfLine(),firstPartImg:c()().find("![").anythingBut("[]").then("](")},l=function(e){return c()().find(e).beginCapture().anythingBut("").endCapture().then(e)}},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n(0),c=n(1),a=n(4),r=n(5),i=n(22),l=n.n(i),s=n(395),u=n(396),d=n(19),p=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.c)(s.a,{icon:u[this.props.name],color:this.props.color||"black",size:this.props.size||"1x"})}}]),n}(l.a.Component)},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={tokenRefreshInHours:96,path:{staticResources:"static"},metas:{headerStart:"=== HEADER ===",headerEnd:"=== END HEADER ==="},strings:{folders:"Folders",files:"files",images:"images",trashNote:"Are you sure to trash that note?",clickHereDisconnected:"(click here if persist)",searchingLabel:"searching...",lastNotes:"Last Notes",newNote:"New Note",dateModified:"Modified :",dateCreated:"Created :",searchPlaceholder:"Search Note",hoursAgo:" hours ago",daysAgo:" days ago",minsAgo:" mins ago",months:["January","February","March","April","May","June","July","August","September","October","November","December"],createFolder:"Create folder",createFolderPrompt:"New Folder name to create in",renameFolder:"Rename folder",renameFolderPrompt:"Rename folder to :",deleteFolder:"Delete folder",deleteFolderPrompt:"Are you sure you want to delete the folder and all its notes (no recovery possible) : ",moveToTrash:"Move to trash",moveToTrashPrompt:"Are you sure you want move folder in .tiro/.trash : ",loadingFolder:"loading...",moveFolderPrompt:"move folder",setupForm:{title:"Login to Tiro",introText:"Welcome to Tiro, please fill these informations to get started",user:"user",password:"password",dataFolder:"folder path",userExplanation:"should have > 3 chars",passwordExplanation:"should have > 3 chars",folderExplanation:"relative from Tiro folder installation (../data for example)",successReload:"Configuration file successfully written, reloading application...",submit:"login",noFolder1:"folder path",noFolder2:"doesn't exists, please create it or choose another folder (no data will be deleted)."},appviews:{image:"Switch to Gallery View",text:"Switch to Files View"},loginForm:{wrongUserPassword:"Wrong login/password",wrongToken:"Authentication expired, please log again"},passwordForm:{explanation:"please enter your password",submit:"submit"},editorBar:{tts:"Text to speech",explanation:{history:"File history"},lightbox:"Show Images in Slider"},ttsPopup:{title:"Text to speech",voice:"Voice"},settingsPopup:{title:"Tiro Settings",backend:{title:"Server settings",explanation:"Only fill if server is on another port/protocol than the client (usually in development)",protocol:"Https",protocolExpl:"https or http",port:"Port",portExpl:"Port used by backend (ex: 3023)"}},historyPopup:{title:"Versions for ",thead:{date:"date",name:"version"}},rgNotWorking:"ERROR: Tiro requires Ripgrep to be working, it seems that ripgrep (rg command) is either not installed or not functionning correctly on you computer. To install it, follow these instructions : https://github.com/BurntSushi/ripgrep#installation"},client:{log:{socket:!0,eventManager:!0,upload:!1},version:"0.27",params:{previewArea:{scrollSpeed:1.3}}}}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(112),c=n(22),a=n(19),r=function(e){var t,n=Object(o.a)({},e).value,r=Object(c.useRef)(),i=function(){e.shouldFocus&&r.current.focus()};return Object(c.useEffect)((function(){i()}),[e.shouldFocus]),Object(c.useEffect)((function(){i()}),[]),Object(a.c)("div",{className:"input-component ".concat(e.id?e.id:""," ").concat(e.type)},e.label&&Object(a.c)("span",null,e.label," :"),Object(a.c)("div",{className:"input-wrapper"},"select"!==e.type&&Object(a.c)("input",{ref:r,type:e.type?e.type:"text",value:e.value,onFocus:function(){e.onFocus&&e.onFocus()},onClick:function(){!e.shouldNotSelectOnClick&&r.current.select()},onKeyPress:function(t){"Enter"==(t.code||t.key)&&e.onEnterPressed&&e.onEnterPressed()},onChange:function(t){e.onChange&&e.onChange(t.target.value)}}),"select"===e.type&&Object(a.c)("select",{value:e.value,onChange:function(t){e.onSelectChange&&e.onSelectChange(t.target.value)}},null===(t=e.list)||void 0===t?void 0:t.map((function(e,t){return Object(a.c)("option",{value:e.key,selected:n===e.key},e.label," ")}))),e.explanation&&Object(a.c)("div",{className:"explanation"}," ",e.explanation," ")))},i="\n    .input-component {\n        display: flex;\n        align-items: center;\n        padding-bottom: 10px;\n        input, select {\n            max-width: 100%;\n        }\n        &.select {\n            span {\n                width: 20%;\n            }\n        }\n        span {\n            width: 30%;\n            font-weight: 700;\n            text-transform: uppercase;\n        }\n        .input-wrapper {\n            width: 70%;\n            input {\n                padding: 7px;\n                border: none;\n                background: #ececec;\n                border-radius: 5px;\n            }\n            .explanation {\n                font-size: 11px;\n                color: grey;\n            }\n        }\n    }\n"},148:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f}));var o=n(124),c=n(117),a=n(196),r=n(52),i=n(181),l=function(e){var t='<a class="external-link preview-link" href="#" '.concat("onclick=\"window.open('$1','$1','width=600,height=600');\"",">$2</a>");return e.replace(c.b.url2transform,t)},s=function(e){return e.replace(c.b.linklink,"<a class=\"title-search-link preview-link\" href=\"javascript:window.tiroCli.searchFileFromTitle.func('$1','$2');\">$1</a>")},u=function(e){var t=e.replace(c.b.searchlink,'<a class="search-link preview-link" href="javascript:window.tiroCli.triggerSearch.func(\'$1$2\');">$1</a>');return t=Object(a.a)(t,[[">[__id_",">["],[">[__tags_",">["],[">[__tag_",">["],[" ]</a>","]</a>"]])},d=function(e){var t=e.replace("".concat(Object(r.c)(),"/").concat(o.a.path.staticResources,"/"),""),n="".concat(Object(r.c)(),"/").concat(o.a.path.staticResources,"/").concat(t);return e.startsWith("http")?e:n},p=function(e,t){return Object(i.c)(t,c.b.ressource,(function(t){var n=t.split("](")[1].slice(0,-1),o=t.split("](")[0].replace("![",""),c=n.split("."),a=c[c.length-1];"7z"===a&&(a="d7z");var r="".concat(d(e),"/").concat(n),i="onclick=\"window.open('".concat(r,"','popupdl','width=800,height=1000');\"");return'\n<div class="resource-link-wrapper">\n<div class="resource-link-icon '.concat(a,'"></div>\n<a class="resource-link preview-link" href="#" ').concat(i,">").concat(o," (").concat(a,")</a>\n</div>")}))},f=function(e,t){t=t.replace(c.b.extimage,'<img class="content-image" src="$1"  />');var n='<img class="content-image" style="'.concat("\n        width: $1px;\n        max-width: 100%;\n        // min-height: $1px;\n        transform: rotate($2deg);\n    ",'" src="').concat(d(e),'/$3"  />');return t.replace(c.b.imageAndConfig,n)}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var o=n(112),c=n(22),a=n.n(c),r=n(289),i=n(34),l=n(119),s=n(19),u=function(e){var t=Object(o.a)({},e),n=t.colors,c=t.size,a=Object(r.a)("button.toolbar-button{&.active{svg{color:",n?n[1]:i.a.colors.main,";}}svg{transform:scale(",c||1.3,");color:",n?n[0]:i.a.colors.editor.interfaceGrey,";&:hover{color:",n?n[1]:i.a.colors.main,";}}}","");return Object(s.c)("div",{className:a},Object(s.c)("ul",{className:"buttons-toolbar-component ".concat(e.class)},e.buttons.map((function(e,t){return e.action&&Object(s.c)("li",{title:e.title,key:t},Object(s.c)(d,e))}))))},d=function(e){var t=Object(s.c)(a.a.Fragment,null);e.title&&(t=Object(s.c)(a.a.Fragment,null,e.title)),e.icon&&(t=Object(s.c)(l.a,{name:e.icon})),e.customHtml&&(t=e.customHtml);var n="toolbar-button ".concat(e.class&&e.class," ").concat(e.active&&"active");return Object(s.c)("button",{className:n,onClick:function(t){e.action&&e.action(t)}},t)},p="\n    ul.buttons-toolbar-component {\n        display: flex;\n        list-style: none;\n        padding: 0px;\n        margin: 0px;\n        button.toolbar-button {\n            ".concat(i.a.els.button,";\n            cursor: pointer;\n        }\n    }\n")},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(14),c=n(22),a=n.n(c),r=n(58),i=n(114),l=n(178),s=n(19),u=function(e,t){var n=Object(i.a)("showRenderId",!1),u=Object(o.a)(n,2),d=u[0],p=u[1];Object(l.a)("toggleRenderId",{description:"toggle display of renderId for each block",func:function(){console.log("[toggleRenderId]"),p(!d),setTimeout((function(){window.location.reload()}),1e3)}});var f=Object(r.random)(0,1e3);return Object(c.useMemo)((function(){var t=(new Date).getTime(),n=(new Error).stack,o=(null===n||void 0===n||n.split("\n")[6].replace("at ","").replace(/\(.*\)/gi,"").trim(),Object(s.c)(a.a.Fragment,null,d&&Object(s.c)("p",{style:{position:"absolute",fontSize:"10px",color:"rgba(255,0,0,0.8)"}},f),e));(new Date).getTime();return o}),t)}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(0),c=n(1),a=n(4),r=n(5),i=n(155),l=n(22),s=n.n(l),u=n(34),d=n(48),p=n(19),f=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(p.c)(b,null,Object(p.c)("div",{className:"overlay-click-popup",onClick:function(t){e.props.onClose()}}),Object(p.c)("div",{className:"popup-wrapper ".concat(Object(d.c)()?"ipad":"")},Object(p.c)("div",{className:"popupTitle"}," ",this.props.title),Object(p.c)("div",{className:"popupContent"},this.props.children)))}}]),n}(s.a.Component),b=Object(i.a)("div",{target:"e1rdg440"})(".overlay-click-popup{position:fixed;z-index:1000;top:0px;left:0px;width:100vw;height:100vh;background:rgba(0,0,0,0.1);}.popup-wrapper{position:fixed;z-index:1001;left:50%;top:50%;width:auto;max-width:90%;transform:translate(-50%,-50%);background:white;border-radius:6px;box-shadow:0px 0px 5px rgba(0,0,0,.2);&.ipad{top:20%;}.popupTitle{margin:0px 0px 20px 0px;text-align:left;background:",u.a.colors.main,";color:white;font-weight:700;text-transform:uppercase;font-size:14px;padding:5px 0px 5px 20px;border-radius:6px 6px 0px 0px;}.popupContent{padding:0px 20px 20px 20px;}img{padding:0px 5px 0px 0px;margin:5px 5px 0px 0px;}}")},178:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o={},c=function(e,t){o[e]=t};window.tiroCli=o},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l}));var o=n(58),c=n(117),a=n(611),r=function(e){return a(e)},i=function(e,t,n){var c=e,a=c.match(t)||"";return Object(o.each)(a,(function(e){c=c.replace(e,n(e))})),c},l=function(e,t,n){var a=e,r=Object(c.a)(t),i=a.match(r)||"";if(i[0]){var l=i[0].split(t),s=[];Object(o.each)(l,(function(e){""!==e&&s.push(e)})),Object(o.each)(s,(function(e,t){if(t%2===0)try{s[t]=n(s[t])}catch(o){}}));var u=s.join("");console.log("[MD TAG ANALYZER] ".concat(t),s,u),a=a.replace(r,u)}return a}},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(50),c=function(e){var t=((new Date).getTime()-e.getTime())/1e3,n=604800,c="";if(t<=3600)c="".concat(Math.ceil(t/60)," ").concat(o.a.minsAgo);else if(t>3600&&t<=86400)c="".concat(Math.ceil(t/3600)," ").concat(o.a.hoursAgo);else if(t>86400&&t<=n)c="".concat(Math.ceil(t/86400)," ").concat(o.a.daysAgo);else if(t>n){var a=("0"+e.getDate()).slice(-2),r=o.a.months[e.getMonth()],i=e.getFullYear().toString();c="".concat(a," ").concat(r," ").concat(i)}return c}},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var o=n(97),c=n(204),a=function(e){var t={title:e.realname,folder:e.folder,mobileview:"editor"},n="".concat(o.a.global.protocol).concat(o.a.global.url).concat(o.a.global.port,"?").concat(Object(c.d)(t));window.open(n,"popupDetached","width=600,height=600")},r=function(e){return{title:"detach in new window",icon:"faExternalLinkAlt",action:function(){a(e)}}}},196:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var o=function(e){return e.replace(/[^\w\s]/gi,"")},c=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];e=e.split(o[0]).join(o[1])}return e}},199:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(22),c=function(e,t){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=e}),[e]),Object(o.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},201:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var o,c=n(0),a=n(1),r=n(4),i=n(5),l=n(155),s=n(22),u=n.n(s),d=n(402),p=n(34),f=n(397),b=n(19);var g=function(){if(o){o.setSelection({endColumn:0,endLineNumber:0,startColumn:0,startLineNumber:0})}},m=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).reactComp=void 0,a.vimStatusBar=void 0,a.editor=void 0,a.monaco=void 0,a.editorDidMount=function(e,t){a.props.vimMode&&(console.log("[MONACO EDITOR] vim mode started",a.vimStatusBar.current),Object(f.initVimMode)(e,a.vimStatusBar.current)),a.editor=e,a.monaco=t,o=e,e.onDidScrollChange((function(e){a.props.onScroll(e.scrollTop)})),window.monaco=t,t.editor.defineTheme("customLightTheme",{base:"vs",inherit:!0,rules:[{foreground:p.a.colors.editor.font}],colors:{"editor.foreground":"red"}}),t.editor.setTheme("customLightTheme")},a.getCurrentLineInfos=function(){var e=a.editor.getPosition(),t=a.editor.getValue(e).split("\n"),n=t.slice(0,e.lineNumber-1).join("\n").length+e.column-1;return{monacoPosition:a.editor.getPosition(),lines:t,currentPosition:n,activeLine:t[e.lineNumber-1],lineIndex:e.lineNumber-1}},a.reactComp=u.a.createRef(),a.vimStatusBar=u.a.createRef(),a}return Object(a.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.posY===e.posY&&this.props.value===e.value||this.editor.setScrollPosition({scrollTop:this.props.posY}),!0}},{key:"render",value:function(){var e=this;return Object(b.c)(_,null,Object(b.c)("div",{className:"vim-status-bar ".concat(this.props.vimMode?"active":""),ref:this.vimStatusBar}),Object(b.c)(d.a,{ref:this.reactComp,width:"100%",height:"100%",language:"markdown",theme:"vs",value:this.props.value,options:{fontFamily:p.a.font.editor,readOnly:this.props.readOnly,quickSuggestions:!1,automaticLayout:!0,selectOnLineNumbers:!0,minimap:{enabled:!1},wordWrap:"on",fontSize:12,mouseWheelScrollSensitivity:.5,lineNumbers:"off",folding:!1,scrollbar:{handleMouseWheel:!0,verticalScrollbarSize:0}},editorDidMount:this.editorDidMount,onChange:function(t){e.props.onChange(t)}}))}}]),n}(u.a.Component),h='\n  [class^="mtk"]:not(.mtk1) {\n    // color: '.concat(p.a.colors.main,";\n    font-weight: 800;\n  }\n  .mtk6 {color: ").concat(p.a.colors.main,";}\n  .mtk21 {color: ").concat(p.a.colors.main,";}\n\n  .mtk10 {color: ").concat(p.a.colors.compl[1],";} // () =>\n  .mtk8 {color: ").concat(p.a.colors.compl[0],";} // comments\n  .mtk7 {color: ").concat(p.a.colors.compl[0],";}  //  = 0o775\n  .mtk23 {color: ").concat(p.a.colors.compl[0],";} // Promise\n\n  // .mtk10 {color: ").concat(p.a.colors.dev[1],";} // () =>\n  // .mtk8 {color: ").concat(p.a.colors.dev[2],";} // comments\n  // .mtk7 {color: ").concat(p.a.colors.dev[2],";}  //  = 0o775\n  // .mtk23 {color: ").concat(p.a.colors.dev[2],";} // Promise\n\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  .mtk1 {}\n  // .mtk6 {\n  //   color: ").concat(p.a.colors.main,";\n  // }\n  .monaco-editor .scroll-decoration {\n    box-shadow: none;\n  }\n"),_=Object(l.a)("div",{target:"e1et4ttg0"})({name:"10zbdyj",styles:"height:100vh;.scroll-wrapper{width:100%;height:100%;}.vim-status-bar{display:none;position:fixed;bottom:0px;height:18px;padding:5px 5px 7px 5px;width:80%;z-index:1;background:rgba(255,255,255,0.9);&.active{display:block;}input{background:#eeeeee;border:none;margin:0px 5px;}}"})},204:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u}));var o=n(58),c=n(97),a=n(48),r={},i=function(e){window.onpopstate=function(){var t=l();JSON.stringify(t)!==JSON.stringify(r)&&(r=t,console.log("[URL CHANGE DETECTED]",t),e.onUrlParamsChange(t))}},l=function(){var e={},t=window.location.search,n=new URLSearchParams(t);return e.search=n.get("search")||void 0,e.file=n.get("file")?parseInt(n.get("file")):void 0,e.folder=n.get("folder")||void 0,e.title=n.get("title")||void 0,e.appview=n.get("appview")||void 0,e.mobileview=Object(a.d)(n.get("mobileview"))?n.get("mobileview"):void 0,e},s=function(e){var t="",n=0;for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&e[o]&&(t+="".concat(0===n?"":"&").concat(o.toLowerCase(),"=").concat(e[o]),n++);return t},u=function(e){var t="".concat(c.a.global.protocol).concat(c.a.global.url).concat(c.a.global.port,"/?");Object(o.isNumber)(e.file)&&-1!==e.file&&(t+="file=".concat(e.file,"&")),e.title&&(t+="title=".concat(e.title,"&")),e.folder&&""!==e.folder&&!e.search&&(t+="folder=".concat(e.folder,"&")),e.folder||e.search||(t+="folder=/&"),e.search&&""!==e.search&&(t+="search=".concat(e.search,"&")),e.appview&&(t+="appview=".concat(e.appview,"&")),window.history.pushState({},document.title,t),console.log("[URL] update url to ".concat(JSON.stringify({newUrl:t,urlParams:e})))}},216:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var o=n(14),c=n(155),a=n(22),r=n(114),i=n(50),l=n(167),s=n(144),u=n(19);var d=function(e){var t;return null===(t=localStorage.getItem("settings-".concat(e)))||void 0===t?void 0:t.replaceAll('"',"")},p=function(e){var t=Object(r.a)("settings-backend-port",-1),n=Object(o.a)(t,2),c=n[0],d=n[1],p=Object(r.a)("settings-backend-protocol","same"),b=Object(o.a)(p,2),g=b[0],m=b[1],h=i.a.settingsPopup,_=[{title:h.backend.title,fields:[{type:"text",var:c,title:h.backend.port,expl:h.backend.portExpl,modifier:d},{type:"text",var:g,title:h.backend.protocol,expl:h.backend.protocolExpl,modifier:m}]}];return Object(a.useEffect)((function(){}),[]),Object(u.c)(f,null,Object(u.c)(l.a,{title:"".concat(h.title),onClose:function(){e.onClose()}},_.map((function(e){return Object(u.c)("div",{className:"settings-panel"},Object(u.c)("h3",null,e.title),e.fields.map((function(e){return Object(u.c)("div",{className:"field-wrapper"},Object(u.c)(s.a,{value:e.var,label:e.title,type:e.type,onChange:function(t){console.log("[SETTINGS] frontend setting ".concat(e.title," changed for ").concat(t)),e.modifier(t)}}))})))}))))},f=Object(c.a)("div",{target:"e1g771890"})({name:"rvko2c",styles:".popup-wrapper .popupContent{padding:20px;}.buttons{display:flex;padding:20px 0px 0px 0px;button{width:30%;padding:10px;}}"})},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(58),c=n.n(o),a=n(22);function r(e,t){var n=Object(a.useRef)(e),o=function(){var e=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),function(){return e.current}}();return Object(a.useEffect)((function(){n.current={cb:e,delay:t}})),Object(a.useCallback)(c.a.debounce((function(){var e;n.current.delay===t&&o()&&(e=n.current).cb.apply(e,arguments)}),t,{leading:!1,trailing:!0}),[t,c.a.debounce])}},236:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return previewAreaRefs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return PreviewArea})),__webpack_require__.d(__webpack_exports__,"b",(function(){return previewAreaCss}));var _Users_gregoirethiebault_Desktop_dev_github_tiro_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(184),_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(48),_managers_latex_manager__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(398),_managers_markdown_manager__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(181),_managers_scriptsInMarkdown_manager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(399),_managers_string_manager__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(196),_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(34),_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(148),_EditorArea_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(237),_emotion_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(19),previewAreaRefs,PreviewArea=function(e){previewAreaRefs={wrapper:Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),main:Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null)};var t=e.file.path.split("/");t.pop();var n=t.join("/");Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){return window.previewHtmlOutput="",function(){}}),[e.file.path]);var o=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)("right"),c=Object(_Users_gregoirethiebault_Desktop_dev_github_tiro_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,2),a=c[0],r=c[1];return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"preview-area-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"preview-area",ref:previewAreaRefs.wrapper,style:{bottom:function(){var t,n=(null===(t=previewAreaRefs.wrapper.current)||void 0===t?void 0:t.height)||3e3;return Object(lodash__WEBPACK_IMPORTED_MODULE_1__.clamp)(e.posY,0,n)}()}},"desktop"!==Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.a)()&&Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"mobile-buttons-up-down ".concat(a)},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{id:"toggle-pos",onClick:function(){r("right"===a?"left":"right")}},"t"),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{id:"top",onClick:function(){previewAreaRefs.wrapper.current.scrollTop=0}},"="),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{id:"up",onClick:function(){previewAreaRefs.wrapper.current.scrollTop-=300}},"^"),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{id:"down",onClick:function(){previewAreaRefs.wrapper.current.scrollTop+=300}},"v")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"infos-preview-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"file-path-wrapper"},e.file.path.replace("/".concat(e.file.name),"")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("h1",{className:"title big-title"},e.file.name.replace(".md","")),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"dates-wrapper"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"date modified"},"modified: ",Object(_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__.a)(new Date(e.file.modified||0))),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"date created"},"created: ",Object(_managers_date_manager__WEBPACK_IMPORTED_MODULE_3__.a)(new Date(e.file.created||0))))),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)(PreviewRenderer,{filecontent:e.fileContent,currentFolder:n})))},previewAreaCss=function(e){return"\n.preview-area-wrapper {\n    overflow: ".concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.c)()||Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("mobile")?"scroll":"hidden",";\n    height: ").concat((Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop"),"100vh"),";\n    margin-top: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"140":"0","px;\n}\n.preview-area {\n    position: relative;\n    display: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"block":"editor"===e?"none":"block",";\n    padding: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"0px ".concat(3*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.sizes.block,"px 0px ").concat(3*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.sizes.block/2,"px"):"0px ".concat(2*_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.sizes.block,"px"),";\n    // overflow: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.c)()?"scroll":"hidden",";\n\n    ").concat(_EditorArea_component__WEBPACK_IMPORTED_MODULE_11__.b,"\n\n    .infos-preview-wrapper {\n        display: ").concat(Object(_managers_device_manager__WEBPACK_IMPORTED_MODULE_4__.b)("desktop")?"none":"block",";\n    }\n\n    .mobile-buttons-up-down {\n        position: fixed;\n        &.right {\n            right: 0px;\n        }\n        &.left {\n            left: 0px;\n        }\n        top: 50%;\n        div {\n            background: #d6d6d6;\n            padding: 15px;\n            opacity: 0.5;\n            color:white;\n            cursor: pointer;\n        }\n    }\n\n    .title {\n        margin: 0px 0px;\n    }\n\n    .dates-wrapper {\n        margin-bottom: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.sizes.block,"px;\n    }\n\n    color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.colors.editor.font,";\n    h1, h2, h3, h4, h5, h6 {\n        color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.colors.main,";\n    }\n    .preview-link {\n      font-weight: 800;\n      \n      background-repeat: no-repeat;\n      background-position: 4px 2px;\n      padding-left: 20px;\n      background-size: 10px;\n      \n      &.external-link {\n        background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.worldIcon,");\n        }\n        &.search-link {\n            color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.colors.main,";\n            background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.searchIcon,");\n        }\n        &.title-search-link {\n            color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.colors.main,";\n            background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.linkIcon,");\n        }\n        &.resource-link {\n          color: ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.colors.main,";\n      }\n    }\n\n\t\t.resource-link-wrapper {\n\t\t\t\tbackground: #f7f6f6;\n\t\t\t\tpadding: 20px;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tposition: relative;\n\t\t\t\tmargin: 5px 0px;\n\n\t\t\t\t.resource-link-icon {\n\t\t\t\t\t\tbackground-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.fileIcon,");\n\t\t\t\t\t\t&.pdf\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.pdfIcon,"); }\n\n\t\t\t\t\t\t&.xls, &.xlsm, &.xlsx, &.ods\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.excelIcon,"); }\n\n\t\t\t\t\t\t&.avi, &.flv, &.h264, &.m4v, &.mov, &.mp4, &.mpg, &.mpeg, &.rm, &.swf, &.vob, &.wmv, &.mkv\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.videoIcon,"); }\n\n\t\t\t\t\t\t&.d7z, &.arj, &.deb, &.rar, &.gz, &.zip, &.rpm, &.pkg\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.archiveIcon,");}\n\n\t\t\t\t\t\t&.aif, &.mp3, &.cda, &.mid, &.mpa, &.ogg, &.wav, &.wpl, &.wma, &.midi\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.audioIcon,"); }\n\n\t\t\t\t\t\t&.doc, &.docx, &.odt\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.wordIcon,"); }\n\n\t\t\t\t\t\t&.bin, &.dmg, &.iso, &.toast, &.vcd\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttop: 19px;\n\t\t\t\t\t\t\t\ttransform: scale(1.8);\n\t\t\t\t\t\t\t\tbackground-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.diskIcon,");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&.ppt, &.pptx, &.odp, &.key, &.pps\n\t\t\t\t\t\t{ background-image: url(").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.assets.presIcon,"); }\n\n\t\t\t\t\t\ttop: 14px;\n\t\t\t\t\t\tleft: 19px;\n\t\t\t\t\t\twidth: 21px;\n\t\t\t\t\t\theight: 27px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tbackground-image: url(/static/media/file-solid.6415173e.svg);\n\t\t\t\t\t\topacity: 0.08;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\t\ttransform: scale(1.5);\n\t\t\t\t}\n\t\t\t\t.resource-link {\n\t\t\t\t}\n\t\t}\n\n\n    img,\n    .content-image {\n        ").concat(_managers_style_vars_style_manager__WEBPACK_IMPORTED_MODULE_9__.a.els.images,"\n    }\n\n\n    p {\n        margin-top: 0px;\n        margin-bottom: 1em;\n    }\n    .preview-content {\n\t\t\t\toverflow-wrap: break-word;\n\n\n\t\t\t\ttable {\n\t\t\t\t\t\tmargin: 10px 0px;\n\t\t\t\t\t\tpadding 15px;\n\t\t\t\t\t\tborder-spacing: 0;\n\t\t\t\t\t\tborder-collapse: collapse;\n\n\t\t\t\ttr:first-child th:first-child { border-top-left-radius: 10px; }\n\t\t\t\ttr:first-child th:last-child { border-top-right-radius: 10px; }\n\t\t\t\ttr:last-child td:first-child { border-bottom-left-radius: 10px; }\n\t\t\t\ttr:last-child td:last-child { border-bottom-right-radius: 10px; }\n\n\t\t\t\t\t\tth {\n\t\t\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\t\t\tpadding: 10px 10px;\n}\n\t\t\t\t\t\ttd {\n\t\t\t\t\t\t\t\tpadding: 5px 10px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthead tr {\n\t\t\t\t\t\t\t\tbackground: #CCC\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttbody {\n\t\t\t\t\t\t\t\ttr:nth-child(even) {background: #CCC}\n\t\t\t\t\t\t\t\ttr:nth-child(odd) {background: #EEE}\n\t\t\t\t\t\t}\n\t\t\t\t}\n    }\n    pre {\n      code {\n        display: block;\n        border-radius: 8px;\n        padding: 10px;\n      }\n    }\n  }\n")},PreviewRenderer=react__WEBPACK_IMPORTED_MODULE_2___default.a.memo((function(p){var _document,processRender=function(e){return Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__.c)(p.currentFolder,Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__.b)(p.currentFolder,Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__.d)(Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__.e)(Object(_managers_textProcessor_manager__WEBPACK_IMPORTED_MODULE_10__.f)(Object(_managers_latex_manager__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_managers_scriptsInMarkdown_manager__WEBPACK_IMPORTED_MODULE_7__.a)(e)))))))},regex=new RegExp(/<script>([\s\S]*)<\/script>/gm),match=p.filecontent.match(regex),scriptArea=null===(_document=document)||void 0===_document?void 0:_document.getElementById("preview-script-area");if(scriptArea&&(scriptArea.innerHTML=""),match&&match[0]){var code=Object(_managers_string_manager__WEBPACK_IMPORTED_MODULE_8__.a)(match[0],[["<script>",""],["<\/script>",""]]);console.log(code);try{eval(code),scriptArea&&window.previewHtmlOutput&&(scriptArea.innerHTML=window.previewHtmlOutput)}catch(error){console.log("[EVAL CODE] error :",error)}}return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{id:"preview-script-area"}),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_12__.c)("div",{className:"preview-content",ref:previewAreaRefs.main,dangerouslySetInnerHTML:{__html:Object(_managers_markdown_manager__WEBPACK_IMPORTED_MODULE_6__.a)(processRender(p.filecontent))}}))}))},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return $})),n.d(t,"c",(function(){return J}));var o=n(14),c=n(22),a=n(48),r=n(201),i=n(19),l=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],r=n[1],l=Object(c.useState)(!1),s=Object(o.a)(l,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){r(e.title)}),[e.title]),Object(i.c)("div",{className:"title-input-wrapper"},Object(i.c)("input",{className:"big-title",type:"text",value:a,onChange:function(e){var t=e.target.value.replaceAll("/","_");r(t),d(!0)},onKeyDown:function(t){if("Enter"===t.key){if(a.length<3)return;e.onEdited(e.title,a),d(!1)}}}),u&&Object(i.c)("div",{className:"press-to-save"},"press enter to save"))},s=n(58),u=function(e){for(var t=!0,n=0;n<e.length;n++)32!==e[n].charCodeAt(0)&&45!==e[n].charCodeAt(0)&&91!==e[n].charCodeAt(0)&&93!==e[n].charCodeAt(0)&&(t=!1);return t},d=function(e){var t=Object(c.useRef)(0),n=e.editorRef,o=e.editorRef,r=function(){var c,a;"desktop"===e.editorType?(c=null===(a=n.current)||void 0===a?void 0:a.getCurrentLineInfos(),t.current=c&&c.monacoPosition?c.monacoPosition:0):(console.log(12125,e,o,n),c=o.current?function(e){for(var t=e.value.split("\n"),n=e.selectionStart,o=0,c=0;o<n+1;)o+=t[c].length+1,c++;return{currentPosition:n,lines:t,activeLine:t[--c],lineIndex:c}}(o.current):null,t.current=c&&c.currentPosition?c.currentPosition:0);return c},i=function(e){var c=t.current+e;if(console.log("resetCursorPosition to ",c),Object(a.b)("desktop")){var r;null===(r=n.current)||void 0===r||r.editor.setPosition(c)}else{var i=o.current;if(!i)return;i.focus(),setTimeout((function(){i&&(i.selectionStart=c,i.selectionEnd=c)}))}};return{getLineTextInfos:r,resetCursorPosition:i,applyTextModifAction:function(e,t){var n=r();return n?function(e,t,n,o){var c=t.lines;if("^"===e){var a=c[t.lineIndex-1],r=c[t.lineIndex];c[t.lineIndex]=a,c[t.lineIndex-1]=r,n(-a.length-1)}if("v"===e){var i=c[t.lineIndex+1],l=c[t.lineIndex];c[t.lineIndex]=i,c[t.lineIndex+1]=l,n(+i.length+1)}if("X"===e){var u=c[t.lineIndex].length;c.splice(t.lineIndex,1),n(-u-1)}"->"===e&&(c[t.lineIndex]="  "+c[t.lineIndex],n(2)),"<-"===e&&(t.activeLine.startsWith("  ")?(c[t.lineIndex]=c[t.lineIndex].substr(2,c[t.lineIndex].length),n(-2)):n(0));var d=t.activeLine.trim();if("[x]"===e&&(d.startsWith("- [ ]")||d.startsWith("- [x]")?d.startsWith("- [ ]")?(c[t.lineIndex]=c[t.lineIndex].replace("[ ]","[x]"),n(0)):d.startsWith("- [x]")?(c[t.lineIndex]=c[t.lineIndex].replace("[x]","[ ]"),n(0)):n(0):(c[t.lineIndex]=c[t.lineIndex].replace(d,"- [ ] "+d.replace("-","")),n(6))),"insertAt"===e&&o&&o.textToInsert&&(Object(s.isNumber)(o.insertPosition)||Object(s.isString)(o.insertPosition))){var p="currentPos"===o.insertPosition?t.currentPosition:o.insertPosition,f=c.join("\n");c=[f.slice(0,p),o.textToInsert,f.slice(p)].join("").split("\n")}return c.join("\n")}(e,n,(function(e){console.log("applyTextModifAction cb charDecal:",e),i(e)}),t):null}}},p=function(e,t){var n=d({editorType:"mobile",editorRef:t.mobileTextarea}),a=n.getLineTextInfos,r=n.resetCursorPosition,i=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),a=n[0],r=n[1];return{saveYTextarea:function(t){var n=e.current?e.current.scrollTop:0;r(t||n)},resetYTextarea:function(){e.current&&(console.log("resetYTextarea",a),e.current.scrollTop=a)}}}(t.mobileTextarea),l=i.saveYTextarea,p=i.resetYTextarea,f=Object(c.useState)(!1),b=Object(o.a)(f,2),g=b[0],m=b[1];Object(s.debounce)((function(){m(!1)}),500);return{onTextareaChange:function(n){console.log("onTextareaChange");var o=n.target.value,c=o[n.target.selectionStart-1]&&o[n.target.selectionStart-1].charCodeAt(0);if(o.length>e.length){var i=a();if(!i)return;o=function(e,t,n){if(10===t){console.log("updateTextFromLetterInput => ENTER PRESSED");var o=e.lines[e.lineIndex-1],c=o.indexOf("- ["),a=o.indexOf("-"),r="";-1!==c&&"- [ ] "!==o?(r=o.substr(0,c+3)+" ] ",u(r)&&(e.lines[e.lineIndex]=r+e.activeLine,n(r.length))):-1!==a&&"- "!==o&&"- [ ] "!==o&&(r=o.substr(0,a+1)+" ",u(r)&&(e.lines[e.lineIndex]=r+e.activeLine,n(r.length)))}return e.lines.join("\n")}(i,c,(function(e){setTimeout((function(){r(e),p()}))}))}t.onMobileNoteEdition(o)},onTextareaScroll:function(e){if(!g){var t=e.target.scrollTop;l(t),console.log("onTextareaScroll")}}}},f="",b=n(199),g=n(155),m=n(167),h=n(50),_=n(34),O=n(144),v=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],r=n[1],l=function(){e.onSubmit(a)};return Object(i.c)(j,null,Object(i.c)(m.a,{title:h.a.passwordForm.explanation,onClose:function(){e.onClose()}},Object(i.c)("div",null,Object(i.c)(O.a,{value:a,label:h.a.setupForm.password,type:"password",shouldFocus:!0,onChange:function(e){r(e)},onEnterPressed:function(){l()}}),Object(i.c)("button",{className:"submit-button",onClick:function(e){l()}},h.a.passwordForm.submit))))},j=Object(g.a)("div",{target:"e16zhrhc0"})(".submit-button{margin-top:10px;",_.a.els.redButton,";padding:10px 20px;}"),x=n(244),w=n.n(x),E=function(e,t){var n=w.a.generateRSAKey(t,1024),o=w.a.publicKeyString(n);return w.a.encrypt(e,o)},k=function(e,t){var n=t.replace(e,"").length,o=t.length;return Math.round(n/o*100)/100},y=function(e){return e>0&&e<=.9},C=function(e){var t=!1,n={nb:k(/[^0-9]/g,e),up:k(/[^A-Z]/g,e),low:k(/[^a-z]/g,e),spe:k(/[^\/\=\?\+]/g,e)},o=y(n.nb)&&y(n.up)&&y(n.low)&&n.spe>0,c=(e.trim().endsWith("==")||e.trim().endsWith("="),/^[a-zA-Z0-9\/\=\?\+]+$/.test(e)),a=e.length>100;return c&&o&&a&&(t=!0),t},T=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),a=n[0],r=n[1],l=Object(c.useState)(!1),s=Object(o.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),b=f[0],g=f[1],m=Object(c.useState)(null),h=Object(o.a)(m,2),_=h[0],O=h[1],j=function(t){var n=e.fileContent,o=E(n,t);if("failure"===o.status)O(null);else{console.log("encryption done",o),d(!1);var c=o.cipher;e.onTextEncrypted(c)}},x=function(t){var n=function(e,t){var n=w.a.generateRSAKey(t,1024);return w.a.decrypt(e,n)}(e.fileContent,t);if("failure"===n.status)O(null),alert("wrong password");else{g(!0),d(!0),console.log("decryption done",n);var o=n.plaintext;e.onTextDecrypted(o)}};return{APasswordPopup:Object(i.c)(v,{onClose:function(){r(null)},onSubmit:function(e){var t=a;r(null),O(e),"toEncrypt"===t&&j(e),"toDecrypt"===t&&x(e)}}),askForPassword:a,decryptButtonConfig:{title:"decrypt text",icon:"faUnlock",action:function(){_?x(_):r("toDecrypt")}},encryptButtonConfig:{title:"encrypt text",icon:"faLock",action:function(){_?j(_):r("toEncrypt")}},ifEncryptOnLeave:function(t){if(u&&_){console.log("[EVENTS EDITOR] shouldEncryptOnLeave");var n=E(e.fileContent,_);n.cipher&&t(n.cipher)}O(null),g(!1)},noHistoryBackupWhenDecrypted:b}},F=n(288),S=n(189),D=n(52),P=n(184),I=n(90),M=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){D.b.emit("askFileHistory",{filepath:e.file.path,token:Object(I.a)()});var t=D.b.on("getFileHistory",(function(e){var t=Object(s.orderBy)(e.files,["created"],["desc"]);r(t)}));return function(){D.b.off(t)}}),[]),Object(i.c)(R,null,Object(i.c)(m.a,{title:"".concat(h.a.historyPopup.title,'"').concat(e.file.realname,'"'),onClose:function(){e.onClose()}},Object(i.c)("div",{className:"table-wrapper"},Object(i.c)("table",null,Object(i.c)("thead",null,Object(i.c)("tr",null,Object(i.c)("th",null,h.a.historyPopup.thead.name),Object(i.c)("th",null,h.a.historyPopup.thead.date))),Object(i.c)("tbody",null,a.map((function(e){return Object(i.c)("tr",{onClick:function(){Object(S.a)(e)}},Object(i.c)("td",null," ",e.realname," "),Object(i.c)("td",null," ",Object(P.a)(new Date(e.created||0))," "))})))))))},R=Object(g.a)("div",{target:"eaah83e0"})(".popup-wrapper .popupContent{padding:0px;}.table-wrapper{max-height:50vh;overflow-y:auto;padding:0px 20px 20px 20px;table{border-spacing:0px;thead{tr{th{padding:8px;}}}tbody{text-align:left;tr{cursor:pointer;background:#f1f0f0;&:nth-child(2n){background:none;}&:hover{background:rgba(",_.a.colors.mainRGB,", 0.2);}td{padding:8px;}}}}}"),L=n(114),A=n(0),N=n(181),B=n(117),U=function(){var e=[];return window.speechSynthesis.getVoices().forEach((function(t,n){e.push({key:n,label:t.name,obj:t})})),e},W=function e(t){var n=this;Object(A.a)(this,e),this.rawText=void 0,this.voice=void 0,this.text2read=void 0,this.chunkedText=void 0,this.chunkLength=160,this.currChunkId=0,this.currSpeechObj=void 0,this.isLoaded=!1,this.shouldStop=!1,this.chunkText=function(e){for(var t=(e=e.replace(/(\r\n\r\n|\n\n|\r\r|\n)/gm,".")).split(/[.!?]+/),o=[],c=0;c<t.length;c++){var a=t[c];if(a.length>n.chunkLength)for(var r=a.split(" "),i="",l=0;l<r.length;l++)((i+=r[l]+" ").length>n.chunkLength||l===r.length-1)&&(o.push(i),i="");else o.push(a)}return console.log(o),o},this.loadVoice=function(e){console.log("[TTS] LOAD VOICE",e),n.voice=e},this.play=function(){if(n.isLoaded)console.log("[TTS] RESUME play chunk ".concat(n.currChunkId)),window.speechSynthesis.resume();else{if(n.currChunkId>n.chunkedText.length-1)return console.log("[TTS] finished played");n.isLoaded=!0,console.log("[TTS] START play chunk ".concat(n.currChunkId),{txt:n.chunkedText[n.currChunkId]}),n.currSpeechObj=new SpeechSynthesisUtterance,n.currSpeechObj.text=n.chunkedText[n.currChunkId],n.voice&&(n.currSpeechObj.voice=n.voice),console.log(n.currSpeechObj),setTimeout((function(){window.speechSynthesis.speak(n.currSpeechObj)}),0),n.currSpeechObj.addEventListener("end",(function(){n.isLoaded=!1,console.log("[TTS] END play chunk ".concat(n.currChunkId)),n.shouldStop?n.shouldStop=!1:(n.currChunkId+=1,n.play())}))}},this.isPlaying=function(){var e=window.speechSynthesis.speaking;return e&&(e=!window.speechSynthesis.paused),e},this.pause=function(){console.log("[TTS] pause"),window.speechSynthesis.pause()},this.stop=function(){console.log("[TTS] stop"),n.shouldStop=!0,n.isLoaded=!1,window.speechSynthesis.cancel()},this.goToChunk=function(e){console.log("[TTS] goToChunk",e),e<=0||e>n.chunkedText.length-1||(n.stop(),n.currChunkId=e,n.play())},this.goBack=function(){console.log("[TTS] goBack",n.currChunkId),n.goToChunk(n.currChunkId-1)},this.goForward=function(){console.log("[TTS] goForward",n.currChunkId),n.goToChunk(n.currChunkId+1)},this.rawText=t.text,this.text2read=function(e){var t=e;return t=(t=t.replace(B.b.ressource,"")).replace(B.b.ref,""),t=Object(N.a)(t),console.log("222",t),t=t.replace(B.b.baliseHtml,""),console.log("cleanText2Speech",t),t}(t.text),this.chunkedText=this.chunkText(this.text2read),console.log("[TTS] init new manager ",{p:t,text:this.chunkedText,length:this.chunkedText.length})},z=n(119);var K=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],l=Object(L.a)("tts-selected-voice",0),s=Object(o.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)(0),f=Object(o.a)(p,2),g=f[0],_=f[1],v=Object(c.useState)(0),j=Object(o.a)(v,2),x=j[0],w=j[1],E=Object(c.useRef)();return Object(c.useEffect)((function(){setTimeout((function(){U()[u]&&(console.log("2voice loaded",u),E.current.loadVoice(U()[u].obj))})),E.current=new W({text:e.fileContent})}),[]),Object(c.useEffect)((function(){U()[u]&&(console.log("voice loaded",u),E.current.loadVoice(U()[u].obj))}),[u]),Object(b.a)((function(){r(E.current.isPlaying()),_(E.current.currChunkId),w(E.current.chunkedText.length)}),500),Object(i.c)(H,null,Object(i.c)(m.a,{title:"".concat(h.a.ttsPopup.title),onClose:function(){E.current.stop(),e.onClose()}},Object(i.c)(O.a,{value:u,type:"select",list:U(),label:h.a.ttsPopup.voice,onSelectChange:function(e){d(parseInt(e))}}),g," / ",x,Object(i.c)("br",null),Object(i.c)("input",{type:"range",defaultValue:g,min:"0",max:x,onChange:function(e){console.log(e.target.value),E.current.goToChunk(parseInt(e.target.value))}}),Object(i.c)("input",{type:"number",defaultValue:g,min:"0",max:x,onChange:function(e){console.log(e.target.value),E.current.goToChunk(parseInt(e.target.value))}}),Object(i.c)("br",null),Object(i.c)("div",{className:"buttons"},Object(i.c)("button",{onClick:function(e){E.current.goBack()}},Object(i.c)(z.a,{name:"faFastBackward",color:"black"})),Object(i.c)("button",{onClick:function(e){a?E.current.pause():E.current.play()}},Object(i.c)(z.a,{name:a?"faPause":"faPlay",color:"black"})),Object(i.c)("button",{onClick:function(e){E.current.goForward()}},Object(i.c)(z.a,{name:"faFastForward",color:"black"})))))},H=Object(g.a)("div",{target:"ez98axn0"})({name:"rvko2c",styles:".popup-wrapper .popupContent{padding:20px;}.buttons{display:flex;padding:20px 0px 0px 0px;button{width:30%;padding:10px;}}"}),V=n(154),G=n(287),q=n(148),Y=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),u=n[0],g=(n[1],Object(c.useState)("")),m=Object(o.a)(g,2),_=m[0],O=m[1],v=Object(c.useRef)(null),j=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){return e.onEditorDidMount&&(console.log("[EVENTS EDITOR] EDITOR DID MOUNT"),e.onEditorDidMount()),function(){e.onEditorWillUnmount&&(i(),console.log("[EVENTS EDITOR] WILL UNMOUNT"),e.onEditorWillUnmount())}}),[]),Object(c.useEffect)((function(){i()}),[e.file.path]),Object(c.useEffect)((function(){e.onNoteContentDidLoad&&(console.log("[EVENTS EDITOR] => on note content did load ".concat(e.file.path)),e.onNoteContentDidLoad())}),[e.fileContent,e.file.path]);var i=function(){""!==f&&e.onNoteLeaving&&(console.log("[EVENTS EDITOR] => leaving edited ".concat(f," to ").concat(e.file.path)),e.onNoteLeaving(a,f)),f=e.file.path};return{triggerNoteEdition:function(t){if(!e.canEdit)return console.warn("[EVENTS EDITOR] => onEdition  CANNOT EDIT AS OFFLINE");a?e.onNoteEdition&&(console.log("[EVENTS EDITOR] => onEdition (".concat(e.file.path,")")),e.onNoteEdition(t,!1)):e.onNoteEdition&&(console.log("[EVENTS EDITOR] => onEdition (FIRST ONE) (".concat(e.file.path,")")),e.onNoteEdition(t,!0)),r(!0)}}}({file:e.file,fileContent:e.fileContent,canEdit:e.canEdit,onEditorDidMount:function(){},onEditorWillUnmount:function(){},onNoteContentDidLoad:function(){D.a&&(O(e.fileContent),y(e.file.folder),k())},onNoteEdition:function(t,n){n&&e.onSavingHistoryFile(e.file.path,e.fileContent,"enter"),O(t),e.onFileEdited(e.file.path,t)},onNoteLeaving:function(t,n){Object(a.b)("desktop")&&Object(r.d)(),X((function(t){e.onFileEdited(n,t)}))}}).triggerNoteEdition;Object(c.useEffect)((function(){X((function(t){e.onFileEdited(e.file.path,t)}))}),[e.isLeavingNote]),function(e,t){var n=Object(c.useState)(""),a=Object(o.a)(n,2),r=a[0],i=a[1];Object(b.a)((function(){e!==r?(i(e),console.log("[HISTORY FILE] : content changed, saving history version"),t.shouldCreateIntervalNoteHistory()):console.log("[HISTORY FILE] : content not changed, do nothing")}),3e5)}(_,{shouldCreateIntervalNoteHistory:function(){if(Z)return console.log("[HISTORY FILE] : noHistoryBackupWhenDecrypted");e.onSavingHistoryFile(e.file.path,_,"int"),console.log("[HISTORY FILE] : creating history file for ".concat(e.file.path))}});var x=Object(F.b)({onUploadSuccess:function(e){W(e,"currentPos")}}),w=x.UploadDragZone,E=x.uploadButtonConfig,k=x.reinitUploadLogic,y=x.updateUploadFolder,I=x.uploadProgress,R=Object(c.useRef)(null),L=p(_,{mobileTextarea:R,onMobileNoteEdition:j}),A=L.onTextareaChange,N=L.onTextareaScroll,U=d({editorType:Object(a.a)(),editorRef:"desktop"!==Object(a.a)()?R:v}).applyTextModifAction,W=function(e,t){var n=U("insertAt",{textToInsert:e,insertPosition:t});n&&j(n)},z=T({fileContent:_,onTextEncrypted:j,onTextDecrypted:j}),H=z.APasswordPopup,Y=z.askForPassword,$=z.decryptButtonConfig,J=z.encryptButtonConfig,X=z.ifEncryptOnLeave,Z=z.noHistoryBackupWhenDecrypted,Q=[{title:"back",icon:"faAngleLeft",action:function(){e.onBackButton()}},Object(a.b)("desktop")?{title:"toggle views",icon:"faAdjust",action:function(){e.onViewToggle()}}:{},E,C(_)?$:J,Object(a.b)("desktop")?Object(S.b)(e.file):{},{title:"insert unique id",icon:"faFingerprint",action:function(){var t="".concat(e.file.folder);W("[link|".concat(e.file.realname," ").concat(t,"]\n"),0)}},{title:"print/download",icon:"faFileDownload",action:function(){window.print()}},{title:h.a.editorBar.explanation.history,icon:"faHistory",action:function(){oe(!ne)}},{title:h.a.editorBar.lightbox,icon:"faImages",action:function(){var t=function(e,t){var n=e.match(B.b.image),o=[];return Object(s.each)(n,(function(e){var n=e.match(B.b.firstPartImg),c=n&&n[0]?n[0].replace("![","").replace("]","").replace("(",""):"",a=e.replace(B.b.firstPartImg,"").replace(")",""),r={url:Object(q.a)(t.folder)+"/"+a,title:c,file:t};o.push(r)})),console.log(n,o),o}(e.fileContent,e.file);e.onLightboxClick(0,t)}},{title:h.a.editorBar.tts,icon:"faCommentDots",action:function(){ie(!re)}},{title:"delete note",class:"delete",icon:"faTrash",action:function(){window.confirm("".concat(h.a.trashNote))&&e.onFileDelete(e.file.path)}}],ee=Object(c.useState)(!1),te=Object(o.a)(ee,2),ne=te[0],oe=te[1],ce=Object(c.useState)(!1),ae=Object(o.a)(ce,2),re=ae[0],ie=ae[1];return Object(i.c)("div",{className:"editor-area"},""!==I&&Object(i.c)("div",{className:"upload-progress"}," ",I),w,Object(i.c)("div",{className:"infos-editor-wrapper"},Object(i.c)("div",{className:"file-path-wrapper"},e.file.path.replace("/".concat(e.file.name),"")),Object(i.c)(l,{title:e.file.name.replace(".md",""),onEdited:e.onFileTitleEdited}),Object(i.c)("div",{className:"toolbar-and-dates-wrapper"},Object(i.c)("div",{className:"toolbar-wrapper"},Object(i.c)(V.a,{class:"editor-main-toolbar",buttons:Q})),Object(i.c)("div",{className:"dates-wrapper"},Object(i.c)("div",{className:"date modified"},"modified: ",Object(P.a)(new Date(e.file.modified||0))),Object(i.c)("div",{className:"date created"},"created: ",Object(P.a)(new Date(e.file.created||0)))))),Object(i.c)("div",{className:"main-editor-wrapper"},"desktop"===Object(a.a)()&&Object(i.c)(r.a,{value:_,vimMode:u,readOnly:!e.canEdit,ref:v,onChange:j,onScroll:e.onScroll,posY:e.posY}),"desktop"!==Object(a.a)()&&Object(i.c)("textarea",{className:"textarea-editor",ref:R,readOnly:!e.canEdit,value:_,onScroll:function(t){e.onScroll(t),N(t)},onChange:A})),"desktop"!==Object(a.a)()&&Object(i.c)(G.a,{onButtonClicked:function(e){var t=U(e);t&&j(t)}}),Y&&H,ne&&Object(i.c)(M,{file:e.file,onClose:function(){oe(!1)}}),re&&Object(i.c)(K,{fileContent:_,onClose:function(){ie(!1)}}))},$="\n.file-path-wrapper {\n  padding-top: ".concat(Object(a.b)("desktop")?_.a.sizes.block:_.a.sizes.block/2,"px;\n  font-size: 13px;\n  font-weight: 700;\n  color: #b6b5b5;\n  cursor: pointer;\n  text-transform: capitalize;\n}\n.big-title {\n  color: ").concat(_.a.colors.main,";\n  font-size: 30px;\n  font-weight: 800;\n  width: 100%;\n  text-transform: uppercase;\n}\n\n.dates-wrapper {\n    color: ").concat(_.a.colors.editor.interfaceGrey,";\n    .modified {\n      color: grey;\n    }\n  }\n"),J=function(e){return"\n.editor-area {\n  width: ".concat(Object(a.b)("desktop")?"50%":"editor"===e?"100vw":"0vw",";\n  display: ").concat(Object(a.b)("desktop")||"editor"===e?"block":"none",";\n  position: relative;\n\n  .infos-editor-wrapper {\n    ").concat(Object(a.b)("desktop")?"":"height: ".concat(_.a.sizes.mobile.editorTopWrapper,"px;"),"\n    ").concat(Object(a.b)("desktop")?"width: calc(200% - ".concat(3*_.a.sizes.block*2,"px);"):"","\n    padding: 0px ").concat(Object(a.b)("desktop")?3*_.a.sizes.block:2*_.a.sizes.block,"px;\n    position: relative;\n\n    ").concat($,"\n\n    .title-input-wrapper {\n      position:relative;\n      margin-top: ").concat(Object(a.b)("desktop")?6:0,"px;\n      .press-to-save {\n        position: absolute;\n        top: 39px;\n        font-size: 8px;\n        color: ").concat(_.a.colors.main,";\n        right: 0px;\n      }\n      input {\n        padding: 0px;\n        border: none;\n        background: none;\n      }\n    }\n\n    \n\n    .toolbar-and-dates-wrapper {\n      display: flex;\n    }\n\n    .dates-wrapper {\n      display: ").concat(Object(a.b)("desktop")?"block":"none",";\n      margin: ").concat(_.a.sizes.block,"px 0px;\n      .date {\n        text-align: right;\n      }\n    }\n    \n\n    .toolbar-wrapper {  \n      flex: 1 1 auto;\n      ul.buttons-toolbar-component {\n        display: flex;\n        list-style: none;\n        padding: 0px 0px 0px 0px;\n        margin: ").concat(Object(a.b)("desktop")?"".concat(_.a.sizes.block,"px 0px"):"".concat(_.a.sizes.block/3,"px 0px ").concat(_.a.sizes.block/1.5,"px 0px "),";\n        li {\n          margin-right: 10px;\n        }\n      }  \n\n      .upload-button-wrapper {\n        position: relative;  \n        .input-file-hidden {\n          width: 0.1px;\n          height: 0.1px;\n          opacity: 0;\n          overflow: hidden;\n          position: absolute;\n          z-index: -1;\n        }\n      }\n    }\n  }\n\n\n\n\n  .main-editor-wrapper {\n    // 10 = monaco browser gutter\n    // padding: 0px ").concat(Object(a.b)("desktop")?3*_.a.sizes.block-10:2*_.a.sizes.block,"px;\n    ").concat(Object(a.b)("desktop")?"padding: 0px ".concat(3*_.a.sizes.block/2,"px 0px ").concat(3*_.a.sizes.block-10,"px;"):"","\n    ").concat(Object(a.b)("desktop")?"":"padding: 0px ".concat(2*_.a.sizes.block,"px 0px ").concat(2*_.a.sizes.block,"px;"),"\n    ").concat(Object(a.b)("desktop")?"":"margin: 0px 0px ".concat(_.a.sizes.mobile.bottomBarHeight,"px 0px;"),"\n    .monaco-editor {\n      margin: 0px;\n    }\n    .textarea-editor {\n      border: none;\n      width: 100%;\n      height: calc(100vh - ").concat(_.a.sizes.mobile.editorTopWrapper+_.a.sizes.mobile.editorBar+2*_.a.sizes.mobile.bottomBarHeight,"px);\n      margin: 0px;\n      padding: 0px;\n      background: rgba(255,255,255,0.7);\n    }\n  }\n}\n")}},287:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n(22);var o=n(34),c=n(154),a=n(19),r=function(e){return Object(a.c)("div",null,Object(a.c)(c.a,{class:"mobile-text-manip-toolbar",colors:[o.a.colors.editor.mobileToolbar.font,o.a.colors.editor.mobileToolbar.font],buttons:[{icon:"faAngleLeft",action:function(){return e.onButtonClicked("<-")}},{icon:"faAngleRight",action:function(){return e.onButtonClicked("->")}},{icon:"faCheckSquare",action:function(){return e.onButtonClicked("[x]")}},{icon:"faAngleUp",action:function(){return e.onButtonClicked("^")}},{icon:"faAngleDown",action:function(){return e.onButtonClicked("v")}},{icon:"faEraser",action:function(){return e.onButtonClicked("X")}}]}))},i="\n  .mobile-text-manip-toolbar {\n    position: fixed;\n    bottom: ".concat(o.a.sizes.mobile.editorBar+10,"px;\n    display: flex;\n    list-style: none;\n    width: 100%;\n    padding: 0px;\n    align-content: center;\n    justify-content: center;\n    align-items: center;\n    height: ").concat(o.a.sizes.mobile.editorBar,"px;\n    background: ").concat(o.a.colors.editor.mobileToolbar.bg,";\n    li {\n      flex: 1 1 auto;\n      justify-content: center;\n      display: flex;\n    }\n  }\n")},288:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return k}));var o,c=n(14),a=n(22),r=n.n(a),i=n(119),l=n(97),s=!1,u=function(e){s||(s=!0,window.addEventListener("paste",(function(t){console.log("PASTE"),function(e,t){0==e.clipboardData&&"function"==typeof t&&t(void 0);var n=e.clipboardData.items;console.log("[PASTE] informations on files pasted : ",e,n,n.length),void 0==n&&"function"==typeof t&&t(void 0);for(var o=0;o<n.length;o++)if(-1!=n[o].type.indexOf("image")){var c=n[o].getAsFile();"function"==typeof t&&t(c)}}(t,(function(t){t&&e.onImagePasted(t)}))}),!1))},d=n(52),p=n(196),f=n(34),b=n(58),g=n(445),m=function(e,t){e.addEventListener("progress",(function(e){var n=Math.round(e.bytesLoaded/e.file.size*100);t(n)}))},h=function(e,t){var n=new g(d.a);n.submitFiles([e]),m(n,t)},_={func:function(){}},O=function(e){!function(e,t){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.items){var n=e.dataTransfer.items;if(!n[0])return;for(var o=0;o<n.length;o++)h(n[o].getAsFile(),t)}}(e,_.func)},v=n(90),j=n(232),x=n(160),w=n(19),E=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),s=n[0],f=n[1],E=Object(a.useState)(""),k=Object(c.a)(E,2),y=k[0],C=k[1],T=Object(a.useRef)(null),F=Object(a.useRef)(null),S=function(e){C("".concat(e,"% uploaded")),100===e&&C("")},D=Object(j.a)((function(e){d.b.emit("uploadResourcesInfos",{folderpath:e,token:Object(v.a)()})}),3e3),P={title:"upload files",class:"upload-button-wrapper",action:function(){},customHtml:Object(w.c)(r.a.Fragment,null,Object(w.c)("input",{className:"input-file-hidden",id:"file",multiple:!0,name:"file",type:"file",ref:F}),Object(w.c)("label",{for:"file"},Object(w.c)(i.a,{name:"faPaperclip"})))},I=Object(x.a)(Object(w.c)("div",{className:"dragzone ".concat(s?"":"hidden"),ref:T}),[s]);Object(x.a)(Object(w.c)("div",{className:"dragzone ".concat(s?"":"hidden"),ref:T}),[s]);return{reinitUploadLogic:function(){var t;l.a.log.upload&&console.log("[UPLOAD] cleanUploadLogic"),d.b.off(o),l.a.log.upload&&console.log("[UPLOAD] initUploadLogic"),t=function(t){var n="![".concat(Object(p.b)(t.name),"](").concat(t.path,")\n\n");e.onUploadSuccess(n)},o=d.b.on("getUploadedFile",(function(e){t(e)})),u({onImagePasted:function(e){h(e,S)}}),F.current?function(e,t){var n=new g(d.a);n.listenOnInput(e),m(n,t)}(F.current,S):l.a.log.upload&&console.error("[UPLOAD] uploadInputRef not detected"),T.current&&function(e){_.func=e.onProgress;var t=function(e){e.preventDefault(),n()},n=Object(b.debounce)((function(){e.onDragEnd()}),100);l.a.log.upload&&console.log("[UPLOAD] reinit drag/drop events"),window.removeEventListener("drop",O),window.addEventListener("drop",O),window.removeEventListener("dragover",t),window.addEventListener("dragover",t)}({onDragEnd:function(){f(!1)},onDragStart:function(){f(!0)},onProgress:S})},updateUploadFolder:function(e){l.a.log.upload&&console.log("[UPLOAD] updateUploadFolder to ".concat(e)),D(e)},uploadButtonConfig:P,UploadDragZone:I,uploadProgress:y}},k="\n    .dragzone {\n        &.hidden {\n        display:none;\n        }\n        display:block;\n        position: absolute;\n        top: 3vh;\n        left: 3vw;\n        width: 94vw;\n        height: 94vh;\n        z-index: 10;\n        background: rgba(255,255,255,0.4);\n    }\n\n.upload-progress {\n    position: fixed;\n    left: 0px;\n    width: 100%;\n    z-index: 100;\n    background: ".concat(f.a.colors.green,";\n    padding: 2px;\n    text-align: center;\n    border-radius: 0px 0px 6px 6px;\n    color: white;\n    bottom: 0px;\n    opacity: 1;\n}\n")},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(437),n(438),n(439),n(440);var o=n.p+"static/media/deco-bg-map.7ca9103b.png",c=n.p+"static/media/file-solid.6415173e.svg",a=n.p+"static/media/compact-disc-solid.55b6e50c.svg",r=n.p+"static/media/file-pdf-solid.0a9d75fe.svg",i=n.p+"static/media/file-word-solid.9228e1ff.svg",l=n.p+"static/media/file-excel-solid.217d73db.svg",s=n.p+"static/media/file-video-solid.312288cf.svg",u=n.p+"static/media/file-audio-solid.a76f99f0.svg",d=n.p+"static/media/file-zipper-solid.7db57917.svg",p=n.p+"static/media/file-powerpoint-solid.4d969453.svg",f=n.p+"static/media/link-solid.7b689dbd.svg",b=n.p+"static/media/globe-africa-solid.0ad34146.svg",g=n.p+"static/media/search-solid.cc51b702.svg",m={main2:"#E86666",main:"rgba(232,102,102,1)",mainRGB:"232,102,102",dev:["#C3668B","#A766A7","#CE66E8","#E4E866"],compl:["#11abf8","#3fd7a4"],pal1:["#5c1a70","#ffa67c","#ffda77"],grey1:"#797979",grey2:"#615f5f",green:"green",l1:{bg:"#e1e1e1",font:"#615f5f"},l2:{bg:"#eeecec",title:"#797979",text:"#615f5f",date:"#b3b2b2"},editor:{bg:"#ffffff",font:"#525252",interfaceGrey:"#d4d1d1",mobileToolbar:{bg:"#e1e1e1",font:"#747474"}},bg:{l1:"#e1e1e1",dark:"rgb(39, 39, 39)",grey:"rgb(221, 221, 221)",light:"#FFFFFF",black:"#000000"},font:{light:"#FFFFFF",black:"#000000"}},h={desktop:{l:37,l1:38,l2:62,r:63},search:{h:94,padding:15},gallery:{topH:100},block:15,scrollbar:17,l2:{fileLi:{height:77,padding:5,margin:5,img:67}},editor:{padding:45},mobile:{bottomBarHeight:50,editorBar:40,editorTopWrapper:100}},_={els:{button:"\n      background: none;\n      border: none;\n    ",images:"\n      border-radius: 7px;\n      box-shadow: 0px 0px 10px rgb(0 0 0 / 10%);\n      max-width: 100%;\n    ",imageInfos:"\n      position: absolute;\n      top: 0px;\n      height: 55px;\n      left: 0px;\n      width: 100%;\n      background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0) 100%);\n      ul {\n        margin-top: 5px;\n        justify-content: flex-end;\n      }\n    ",redButton:"\n      border: none;\n      background: ".concat(m.main,";\n      &:hover {\n          background: rgba(").concat(m.mainRGB,",0.8);\n      }\n      color: white;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 700;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n    ")},colors:m,elsObjs:{submitButton:{marginTop:"10px",background:"none",border:"none",padding:"10px 20px"}},font:{main:"'Open sans', sans-serif",editor:"Consolas, monaco, monospace"},sizes:h,other:{radius:"border-radius: 5px;"},assets:{decoBgMap:o,linkIcon:f,worldIcon:b,fileIcon:c,diskIcon:a,pdfIcon:r,presIcon:p,audioIcon:u,videoIcon:s,excelIcon:l,wordIcon:i,archiveIcon:d,searchIcon:g}}},398:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(181),c=null,a=!1;a||function(){var e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js",e.crossorigin="anonymous",document.body.appendChild(e),a=!0,console.log("INIT LATEX"),e.onload=function(){c=window.katex}}();var r=function(e){return e='\n<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.css" crossorigin="anonymous">\n'+e,Object(o.b)(e,"[[latex]]",(function(e){return c?c.renderToString(e):e}))}},399:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return transformMarkdownScripts}));var _markdown_manager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(181),transformMarkdownScripts=function transformMarkdownScripts(bodyRaw){var res=Object(_markdown_manager__WEBPACK_IMPORTED_MODULE_0__.b)(bodyRaw,"[[script]]",(function(input){var func="\nconst toeval = function () {\n".concat(input,";\n}\ntoeval();");return eval(func)}));return res}},432:function(e,t){},48:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var o=function(e){return"navigator"===e||"editor"===e||"preview"===e},c=function(e){return r()===e};function a(){return!!/iPad/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}var r=function(){var e=window.innerWidth,t="desktop";return e<1e3&&(t="tablet"),e<500&&(t="mobile"),t}},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=n(124).a.strings},517:function(e,t){},519:function(e,t){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var o,c,a=n(112),r=n(23),i=n(58),l=n(394),s=n(216),u=n(97),d=n(50),p=function(){var e=Object(s.b)("backend-protocol")?"".concat(Object(s.b)("backend-protocol"),"://"):u.a.global.protocol,t=Object(s.b)("backend-port")?":".concat(Object(s.b)("backend-port")):"".concat(u.a.global.port);return"".concat(e).concat(u.a.global.url).concat(t)},f=function(){return new Promise((function(e,t){o||(o=l(p()),u.a.log.socket&&console.log("[SOCKET] try connecting to ".concat(p(),"...")),(c=g(o)).on("connectionSuccess",(function(t){u.a.log.socket&&console.log("[SOCKET] connection successful!, socket.connected :".concat(o.connected),t),t.isRgGood||alert(d.a.rgNotWorking),e(o)})))}))},b=function(e,t){return["%c [CLIENT SOCKET 2] ".concat(e),"background: #ccc; color: red",t||null]},g=function(e){var t={};return{on:function(n,o){var c=function(e,t){return function(n){var o;(o=console).log.apply(o,Object(r.a)(b("<== ON ".concat(e," "),Object(a.a)({},n)))),t(n)}}(n,o),l=Object(i.random)(1,1e7);return t[l]={endpoint:n,apiFn:c},e.on(n,c),l},off:function(n){t[n]&&(e.off(t[n].endpoint,t[n].apiFn),delete t[n])},emit:function(t,n){var o;(o=console).log.apply(o,Object(r.a)(b("==> EMIT ".concat(t," "),Object(a.a)({},n)))),e.emit(t,n)}}}},529:function(e,t){},531:function(e,t){},556:function(e,t){},558:function(e,t){},559:function(e,t){},564:function(e,t){},566:function(e,t){},572:function(e,t){},574:function(e,t){},593:function(e,t){},605:function(e,t){},608:function(e,t){},613:function(e,t,n){"use strict";n.r(t);var o=n(22),c=n.n(o),a=n(393),r=n.n(a),i=n(14),l=n(19),s=n(48),u=n(52),d=n(112),p=n(289),f=n(288),b=n(34),g=n(237),m=n(236),h=n(201),_=n(154),O=n(160),v="\n.mobile-view-toggler {\n    position: fixed;\n    bottom: 0px;\n    left: 0px;\n    z-index: 10;\n    display:flex;\n    width: 100%;\n    list-style: none;\n    margin: 0px;\n    padding: 0px;\n    background: ".concat(b.a.colors.main,";\n    li {\n        flex: 1 1 auto;\n        button {\n            ").concat(b.a.els.button,";\n            padding: 8px;\n            width: 100%;\n            svg {\n                color: white;\n                transform: scale(1.1);\n                background: rgba(255,255,255,0);\n                padding: 10px 40px;\n                border-radius: 6px;\n            }\n            &:hover {\n                svg {\n                    color: white;\n                }\n            }\n            &.active {\n                svg {\n                    color: white;\n                    background: rgba(255,255,255,0.2);\n                }\n            }\n        }\n    }\n}\n"),j=n(97),x=n(50),w=n(199),E=function(){return"Tiro (".concat(j.a.version,")")},k="\n.connection-status {\n  font-size: 9px;\n  z-index: 11;\n  a {\n    margin-left: 10px;\n    color: white;\n  }\n  .back-online, .disconnected {\n    position: absolute;\n    text-align:center;\n    color:white;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    padding: 1px;\n  }\n  .back-online{\n    background: green;\n  }\n  .disconnected{\n    background: ".concat(b.a.colors.main,";\n  }\n  .connected {\n    display:none;\n    position: absolute;\n    bottom: 5px;\n    right: 5px;\n    color: ").concat(b.a.colors.green,";\n  }\n}\n"),y=n(119),C=function(e){return Object(l.c)("button",{className:"new-file-button",onClick:function(t){e.onNewFile()}},Object(l.c)(y.a,{name:"faPlusCircle",color:"white"}),Object(l.c)("span",null,x.a.newNote))},T="\n    .new-file-button {\n        ".concat(b.a.els.redButton,"\n        ").concat(b.a.font.main,";\n        padding: ").concat(Object(s.b)("desktop")?"15px 5px":"13px 7px",";\n        margin: ").concat(b.a.sizes.block,"px;\n        width: calc(100% - ").concat(b.a.sizes.block*(Object(s.b)("desktop")&&Object(s.c)(),3),"px );\n        font-size: ").concat(Object(s.b)("desktop")?13:11,"px;\n        svg {\n            margin-right: ").concat(Object(s.b)("desktop")?"10px":"5px",";\n        }\n        \n    }\n"),F=n(0),S=n(1),D=n(4),P=n(5),I=n(155),M=n(58),R=n(184),L=n(148),A=n(401),N=n(400),B=["Az","Crea","Modif"],U=["alphabetical","created","modified"],W=function(e){Object(D.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(F.a)(this,n),(o=t.call(this,e)).oldFiles=[],o.liRefs=[],o.scrollerWrapperRef=c.a.createRef(),o.scrollerListRef=c.a.createRef(),o.canAutoScroll=!1,o.getVisibleItemsDebounced=Object(M.debounce)((function(){var e=o.scrollerWrapperRef.current;if(e){for(var t=e.getBoundingClientRect().height,n=-1,c=[],a=0;a<o.liRefs.length;a++){var r=o.liRefs[a].current;if(r){var i,l=r.getBoundingClientRect().top;if(l>-50&&l<t+100)-1===n&&(n=a),o.props.files[a]&&c.push(null===(i=o.props.files[a])||void 0===i?void 0:i.path)}}o.props.onVisibleItemsChange(c)}}),500),o.onListScroll=function(){o.canAutoScroll=!1,o.getVisibleItemsDebounced()},o.isMultiSelected=function(e){return o.state.selectionEdges[0]<=e&&o.state.selectionEdges[1]>=e},o.itemToScroll=0,o.autoScrollToItem=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.itemToScroll=t?e:o.itemToScroll+e,o.itemToScroll<0&&(o.itemToScroll=0),o.itemToScroll>o.props.files.length&&(o.itemToScroll=o.props.files.length),console.log("scroll to item: ",o.itemToScroll),o.scrollerListRef.current.scrollToItem(o.itemToScroll)},o.state={hoverMode:!1,selectionEdges:[-1,-1]},o}return Object(S.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){if(JSON.stringify(e.files)!==JSON.stringify(this.oldFiles)){this.oldFiles=Object(M.cloneDeep)(e.files),this.liRefs=[];for(var n=0;n<e.files.length;n++)this.liRefs.push(c.a.createRef());this.getVisibleItemsDebounced(),this.setState({selectionEdges:[-1,-1]}),console.log("[LIST] reinit canAutoScroll"),this.canAutoScroll=!0}return this.props.activeFileIndex>0&&this.canAutoScroll&&(this.canAutoScroll=!1,this.autoScrollToItem(this.props.activeFileIndex)),!0}},{key:"render",value:function(){var e=this,t=U[this.props.sortMode],n=b.a.sizes.l2.fileLi.height+2*b.a.sizes.l2.fileLi.padding+b.a.sizes.l2.fileLi.margin,o=window.innerHeight-(b.a.sizes.search.h+b.a.sizes.search.padding),a=Object(s.b)("desktop")?o:o-b.a.sizes.mobile.bottomBarHeight;return Object(l.c)(c.a.Fragment,null,"desktop"!==Object(s.a)()&&Object(l.c)("div",{className:"mobile-buttons-up-down"},Object(l.c)("div",{id:"top",onClick:function(){e.autoScrollToItem(0,!1)}},"="),Object(l.c)("div",{id:"up",onClick:function(){e.autoScrollToItem(-4,!1)}},"^"),Object(l.c)("div",{id:"down",onClick:function(){e.autoScrollToItem(4,!1)}},"v")),Object(l.c)("div",{className:"list-wrapper-scroller",style:{height:a},onScroll:this.onListScroll,ref:this.scrollerWrapperRef},Object(l.c)(N.a,null,(function(o){o.height;var r=o.width;return Object(l.c)(A.a,{itemData:e.props.files,className:"List",ref:e.scrollerListRef,height:a,itemCount:e.props.files.length,itemSize:n,width:r,onScroll:e.onListScroll},(function(n){var o=n.index,a=n.style,i=e.props.files[o],s=e.props.filesPreview[i.path];return Object(l.c)("div",{style:a},Object(l.c)("li",{ref:e.liRefs[o],style:{width:r-2*H.l2.fileLi.padding-2*H.l2.fileLi.margin-35},className:["file-element-list","element-".concat(o),"".concat(e.isMultiSelected(o)?"multiselected":""),"".concat(o===e.props.activeFileIndex?"active":""),"".concat(s&&s.picture?"with-image":"")].join(" "),key:o,draggable:!0,onDragStart:function(){var t=[],n=e.state.selectionEdges;t=-1!==n[0]||-1!==n[1]?e.props.files.slice(n[0],n[1]+1):[i],e.props.onFileDragStart(t)},onDragEnd:function(){e.props.onFileDragEnd()},onClick:function(t){if(e.props.modifierPressed){var n=[e.props.activeFileIndex,o];n.sort(),console.log("[MULTIARR]",n),e.setState({selectionEdges:n})}else e.props.onFileClicked(o),e.setState({selectionEdges:[-1,-1]})}},Object(l.c)("div",{className:"left"},Object(l.c)("h3",{className:"label",onMouseEnter:function(t){e.props.hoverMode&&e.props.onFileClicked(o)}},i.name),Object(l.c)("div",{className:"content"},s&&s.content&&Object(l.c)(c.a.Fragment,null,s.content)),Object(l.c)("div",{className:"date ".concat(t)},Object(R.a)(new Date(("modified"===t?i.modified:i.created)||0)))),Object(l.c)("div",{className:"right"},s&&s.picture&&Object(l.c)("div",{className:"picture",style:{backgroundColor:"white",backgroundImage:"url('".concat(s.picture.startsWith("http")?s.picture:"".concat(Object(L.a)(e.props.files[0].folder),"/").concat(s.picture),"')")}}))))}))}))))}}]),n}(c.a.Component),z=(Object(I.a)("div",{target:"ejbrra60"})(""),Object(d.a)({},b.a)),K=(z.els,z.colors),H=(z.font,z.sizes),V=(z.other,"\n  .list-wrapper {\n    .list-wrapper-scroller{\n        height: 100%;\n        width: calc(100% + 20px);\n        overflow-y:scroll;\n        overflow: hidden;\n    }\n\n    .mobile-buttons-up-down {\n        position: fixed;\n        right: 0px;\n        z-index: 10;\n        top: 50%;\n        div {\n            background: #d6d6d6;\n            padding: 10px;\n            color:white;\n            cursor: pointer;\n        }\n    }\n\n    div.List {\n        list-style: none;\n        margin-right:20px;\n        padding: 0px 0px 0px 0px;\n        &.multiselect-mode {\n          li .label {\n            margin-left: 4px;\n          }\n        }\n\n        // NORMAL\n        li {\n            padding: ".concat(H.l2.fileLi.padding,"px ").concat(H.block-H.l2.fileLi.margin,"px;\n            margin: ").concat(H.l2.fileLi.margin,"px ").concat(H.l2.fileLi.margin+5,"px ").concat(H.l2.fileLi.margin,"px ").concat(H.l2.fileLi.margin,"px ;\n            display: block;\n            cursor: pointer;\n            position: relative;\n            height: ").concat(H.l2.fileLi.height,"px;\n            overflow: hidden;\n            border: 2px rgba(0,0,0,0) solid;\n            \n            // ACTIVE\n            &:hover,\n            &.multiselected,\n            &.active  {\n              background: rgba(").concat(K.mainRGB,",0.1);\n              border-radius: 5px;\n              border: 2px rgba(").concat(K.mainRGB,",0.3) solid;\n            }\n\n            display: flex;\n            justify-content: center;\n            \n            .left {\n              // width: calc(100% - ").concat(H.l2.fileLi.img,"px - 10px);\n              width: 100%;\n              padding-right: 10px;\n\n              display:flex;\n              flex-direction:column;\n\n              .label {\n                margin: 0px;\n                max-height: 35px;\n                margin-bottom: 2px;\n                overflow: hidden;\n                color: ").concat(K.l2.title,";\n                line-break: anywhere;\n              }\n              \n              .content {\n                color: grey;\n                margin-bottom: 3px;\n                font-size: 9px;\n                overflow: hidden;\n                line-break: anywhere;\n                word-break: break-all;\n                ").concat(Object(s.b)("desktop")?"":"max-height: 25px;","\n              }\n\n              .date {\n                color: ").concat(K.l2.date,";\n                font-size: 10px;\n                font-weight: 700;\n              }\n            }\n\n            .right {\n              .picture {\n                width: ").concat(H.l2.fileLi.img,"px;\n                height: ").concat(H.l2.fileLi.img,"px;\n                background-size: cover;\n                z-index: 1;\n                margin-top: 3px;\n                border-radius: 5px;\n                border: 2px white solid;\n              }\n            }\n        }\n    }\n  }\n  ")),G=n(287),q=n(114),Y=function(e){return Object(l.c)("div",{className:"folder-tree-view-component"},Object(l.c)("h3",{className:"subtitle"},x.a.folders),Object(l.c)($,{folder:e.folder,current:e.current,onFolderClicked:e.onFolderClicked,onFolderMenuAction:e.onFolderMenuAction,onFolderOpen:e.onFolderOpen,onFolderClose:e.onFolderClose,onFolderDragStart:e.onFolderDragStart,onFolderDragEnd:e.onFolderDragEnd,onFolderDrop:e.onFolderDrop}))},$=function e(t){var n=Object(q.a)("treeview-".concat("/"===t.folder.key||""===t.folder.key?"root":t.folder.key),!1),c=Object(i.a)(n,2),a=c[0],r=c[1],s=Object(o.useState)(!1),u=Object(i.a)(s,2),d=u[0],p=u[1],f=t.current===t.folder.key;return Object(l.c)("li",{className:"folder-wrapper ".concat(f?"current":""),draggable:!0,onDrop:function(e){t.folder.key&&(t.onFolderDrop(t.folder),e.stopPropagation())},onDragStart:function(e){t.folder.key&&(t.onFolderDragStart(t.folder),e.stopPropagation())},onDragEnd:function(){t.folder.key&&t.onFolderDragEnd()},onMouseLeave:function(){d&&p(!1)}},Object(l.c)("div",{className:"folder-title"},Object(l.c)("span",{className:"icon",onClick:function(e){a?t.onFolderClose(t.folder.key):t.onFolderOpen(t.folder.key),r(!a)}},t.folder.hasChildren&&Object(l.c)(y.a,{name:a?"faCaretDown":"faCaretRight",color:b.a.colors.main})),Object(l.c)("span",{className:"title",onClick:function(e){t.onFolderClicked(t.folder.key)}},t.folder.title),Object(l.c)("span",{onClick:function(){p(!d)},className:"context-menu-wrapper"},Object(l.c)(y.a,{name:"faEllipsisH",color:b.a.colors.l1.font}),d&&Object(l.c)("div",{className:"context-menu"},Object(l.c)("ul",null,Object(l.c)("li",{onClick:function(){if(""===t.folder.path)return p(!1);var e=prompt("".concat(x.a.renameFolderPrompt," "),t.folder.title);e&&""!==e&&e!==t.folder.title&&t.onFolderMenuAction("rename",t.folder,e),p(!1)}},x.a.renameFolder),Object(l.c)("li",{onClick:function(){if(""===t.folder.path)return p(!1);var e=prompt("".concat(x.a.createFolderPrompt," ").concat(t.folder.path),"");e&&""!==e&&t.onFolderMenuAction("create",t.folder,e),p(!1)}},x.a.createFolder),-1===t.folder.path.indexOf(".tiro/.trash")&&Object(l.c)("li",{onClick:function(){if(""===t.folder.path)return p(!1);window.confirm("".concat(x.a.moveToTrash).concat(t.folder.path,"?"))&&t.onFolderMenuAction("moveToTrash",t.folder),p(!1)}},x.a.moveToTrash),-1!==t.folder.path.indexOf(".tiro/.trash")&&Object(l.c)("li",{onClick:function(){if(""===t.folder.path)return p(!1);window.confirm("".concat(x.a.deleteFolderPrompt).concat(t.folder.path,"?"))&&t.onFolderMenuAction("delete",t.folder),p(!1)}},x.a.deleteFolder))))),a&&Object(l.c)("ul",{className:"folder-children"},t.folder.children&&t.folder.children.map((function(n,o){return Object(l.c)(e,{key:o,folder:n,current:t.current,onFolderOpen:t.onFolderOpen,onFolderMenuAction:t.onFolderMenuAction,onFolderClose:t.onFolderClose,onFolderClicked:t.onFolderClicked,onFolderDragStart:t.onFolderDragStart,onFolderDragEnd:t.onFolderDragEnd,onFolderDrop:t.onFolderDrop})}))))},J="\n.folder-tree-view-component {\n  padding: ".concat(b.a.sizes.block,"px;\n  padding-right: 0px;\n  margin: 0px 0px 100px 0px;\n  width: calc(100% - ").concat(b.a.sizes.block*(Object(s.b)("desktop")&&!Object(s.c)()?1:2),"px);\n\n  ul.folder-children {\n    margin: 0px 0px 0px 0px;\n    padding: 0px 0px 0px 10px;\n  }\n\n  li.folder-wrapper {\n\n    position: relative;\n    list-style: none;\n    font-size: 13px;\n    font-weight: 600;\n    cursor: pointer;\n\n    .context-menu-wrapper {\n      position: absolute;\n      right: 30px;\n      top: 5px;\n      display:none;\n      .context-menu {\n        position: absolute;\n        right: 0px;\n        top: 15px;\n        background: white;\n        box-shadow: 0px 0px 4px rgb(0 0 0 / 10%);\n        color: black;\n        padding: 0px 0px;\n        width: 100px;\n        z-index: 10;\n        border-radius: 4px;\n        font-size: 10px;\n        ul {\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          li {\n            padding: 4px 11px;\n            &:hover {\n              background: rgba(").concat(b.a.colors.mainRGB,", 0.2)\n            }\n          }\n        }\n      }\n    }\n    .folder-title:hover > .context-menu-wrapper {\n      cursor:pointer;\n      display:block;\n    }\n    &.current > .folder-title {\n        color: ").concat(b.a.colors.main,";\n        text-decoration: underline;\n    }\n    .folder-title {\n      padding: 1px;\n      position:relative;\n      padding-left: 20px;\n      .icon {\n        position: absolute;\n        left: 2px;\n        cursor: pointer;\n        padding: 1px;\n        top: 0px;\n      }\n      \n    }\n  }\n  \n}\n"),X=function(e){var t=Object(d.a)({},e).files;return Object(l.c)(c.a.Fragment,null,t.length>0&&Object(l.c)("div",{className:"last-notes-component"},Object(l.c)("h3",{className:"subtitle"},x.a.lastNotes),Object(l.c)("ul",null,t.map((function(t,n){var o=t.name.replace(".md","");return o=o.length>20?"".concat(o.substr(0,20)):o,Object(l.c)("li",{key:n,title:o,onClick:function(n){e.onClick(t)},className:"note"},Object(l.c)(y.a,{name:"faFile"}),o)})))))},Z="\n.last-notes-component {\n    padding: 0px ".concat(b.a.sizes.block,"px;\n    \n    h3 {\n\n    }\n    ul {\n        height: ").concat(110,"px;\n        overflow: hidden;\n        &:hover {\n            min-height: ").concat(110,"px;\n            height: auto;\n        }\n\n        padding: 0px;\n        margin: 0px;\n        li {\n            cursor: pointer;\n            margin-bottom: 7px;\n            overflow: hidden;\n            height: ").concat(15,"px;\n            list-style: none;\n            font-size: 11px;\n            font-weight: 400;\n            svg {\n                color: ").concat(b.a.colors.main,";\n                margin-right: 10px;\n            }\n        }\n    }\n}\n"),Q=n(144),ee=n(167),te=n(90),ne="\n    .setup-popup-component {\n        .submit-button {\n            margin-top: 10px;\n            ".concat(b.a.els.redButton,";\n            padding: 10px 20px;\n        }\n        .error {\n            color: ").concat(b.a.colors.main,";\n        }\n        .success {\n            color: ").concat(b.a.colors.green,";\n        }\n    }\n"),oe=function(e){Object(D.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(F.a)(this,n),(o=t.call(this,e)).inputRef=void 0,o.submitOnEnter=function(e){if("Enter"===e.key){if(o.props.searchTerm.length<3)return;o.props.onSearchSubmit()}},o.state={search:""},o.inputRef=c.a.createRef(),o}return Object(S.a)(n,[{key:"render",value:function(){var e=this;return Object(l.c)(c.a.Fragment,null,Object(l.c)("div",{className:"search-bar-component"},Object(l.c)("input",{type:"text",placeholder:x.a.searchPlaceholder,ref:this.inputRef,value:this.props.searchTerm,onKeyDown:this.submitOnEnter,onChange:function(t){e.props.onSearchTermUpdate(t.target.value,t.target)}}),Object(l.c)("div",{className:"search-status"},this.props.isSearching&&x.a.searchingLabel)))}}]),n}(c.a.Component),ce="\n    .search-bar-component {\n        input {\n            ".concat(b.a.other.radius,"\n            width: calc(100% - ").concat(2*b.a.sizes.block+20,"px);\n            border: none;\n            background: white;\n            padding:14px 10px;\n            margin: 0px ").concat(b.a.sizes.block,"px ").concat(b.a.sizes.block,"px ").concat(b.a.sizes.block,"px; \n            &::placeholder {\n                color: #afadad;\n            }\n        }\n        .search-status {\n            text-align: center;\n            font-size: 8px;\n        }\n    }\n  "),ae=n(189),re=function(e){var t=Object(o.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],r=function(){return"desktop"===Object(s.a)()?3:1},u=Object(o.useState)(r()),d=Object(i.a)(u,2),p=d[0],f=d[1];return Object(o.useEffect)((function(){f(r())}),[e.forceRender]),Object(o.useEffect)((function(){a([]);for(var t=[],n=0,o=0;o<e.images.length;o++){t[n]||(t[n]={height:0,images:[]});var c=e.images[o];c.index=o,t[n].images.push(c),++n>p-1&&(n=0)}a(t)}),[e.images,p]),Object(l.c)("div",{className:"image-gallery-component-wrapper"},Object(l.c)("div",{className:"masonry-gallery"},c.map((function(t,n){return Object(l.c)("div",{className:"masonry-col",key:n},t.images.map((function(t,n){return Object(l.c)("div",{className:"masonry-col-item",key:n},Object(l.c)("img",{src:Object(L.a)(t.url)}),Object(l.c)("div",{className:"image-infos"},Object(l.c)(_.a,{buttons:[{title:"open note",icon:"faExternalLinkAlt",action:function(){Object(ae.a)(t.file)}},{title:"open lightbox",icon:"faExpand",action:function(){e.onImageClicked(t.index||0,e.images)}}],size:1})))})))}))))},ie=function(e){var t=Object(o.useState)(0),n=Object(i.a)(t,2),c=n[0],a=n[1];Object(o.useEffect)((function(){a(e.startingIndex)}),[e.startingIndex]);var r=function(t){var n=c;n=-1===t&&0===c?e.images.length-1:1===t&&c===e.images.length-1?0:c+t,a(n)};return Object(l.c)("div",{className:"lightbox-component"},Object(l.c)("div",{className:"lightbox-bg"}),Object(l.c)("div",{className:"lightbox-content"},e.images.map((function(t,n){return Object(l.c)("div",{key:n,className:"lightbox-image",style:{display:n===c?"flex":"none"}},Object(l.c)("img",{src:Object(L.a)(t.url)}),Object(l.c)("div",{className:"image-infos"},Object(l.c)("div",{className:"image-name",onClick:function(e){return Object(ae.a)(t.file)}},t.file.name," - ",t.title),Object(l.c)(_.a,{buttons:[{title:"left",icon:"faChevronLeft",action:function(){r(-1)}},{title:"open note",icon:"faExternalLinkAlt",action:function(){Object(ae.a)(t.file)}},{title:"close",icon:"faTimes",action:function(){e.onClose()}},{title:"right",icon:"faChevronRight",action:function(){r(1)}}]})))}))))},le=(Object(s.a)(),Object(d.a)({},b.a)),se=le.els,ue=le.colors,de=(le.font,le.sizes),pe=(le.other,function(e){var t="\n.content-image {\n    width: 90%;\n  }\n.full {\n  .content-image {\n  }\n}\n\n".concat("\n    .main-wrapper.view-image {\n        .mobile-view-toggler {\n            display: none;\n        }\n        \n        .left-wrapper {\n            width: ".concat("desktop"===Object(s.a)()?15:40,"vw ;\n            .left-wrapper-1 {\n                width: 100%\n            }\n            .left-wrapper-2 {\n                display: none;\n            }\n        }\n\n\n        .right-wrapper.dual-viewer-view {\n            display: none;\n        }\n        .right-wrapper {\n            height: 100vh;\n        }\n        .right-wrapper.image-gallery-view {\n            width: ").concat(100-("desktop"===Object(s.a)()?15:40),"vw;\n        }\n    }\n    \n    .main-wrapper.view-text {\n        .right-wrapper.dual-viewer-view {\n            \n        }\n        .right-wrapper.image-gallery-view {\n            display: none;\n        }\n    }\n"),"\n").concat("\n .lightbox-component {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    height: 100vh;\n    \n    .lightbox-bg {\n        top: 0px;\n        left: 0px;\n        width: 100vw;\n        height: 100vh;\n        position: absolute;\n        background: rgba(0,0,0,0.2);\n    }\n\n    .lightbox-content {\n        position: absolute;\n        width: 95vw;\n        height: 95vh;\n        background: black;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%); \n\n        .lightbox-image {\n            position: relative;\n            justify-content: space-around;\n            align-items: center;\n            width: 100%;\n            height: 100%;\n\n            &:hover {\n                .image-infos {\n                    display: block;\n                }\n            }\n            .image-infos {\n                ".concat(b.a.els.imageInfos,"\n                // position: relative;\n                &:hover {\n                    .image-name {\n                        display: block;\n                    }\n                }\n                .image-name {\n                    display: none;\n                    cursor: pointer;\n                    color: grey;\n                    padding: 5px;\n                    font-size: 10px;\n                    position: absolute;\n                    top: 5px;\n                    left: 5px;\n                }\n            }\n            img {\n                max-width: 95vw;\n                max-height: 95vh;\n            }\n        }\n     }\n }\n"),"\n\n").concat("\n    .app-view-switcher-component {\n        margin: 0px 10px 10px 10px;\n        ul.buttons-toolbar-component {\n            li {\n                margin-left: 5px;\n                margin-right: 5px;\n            }\n        }\n    }\n","\n").concat(_.b,"\n\n.main-wrapper {\n  display: flex;\n\n  ").concat("\n .image-gallery-component-wrapper {\n   margin: 0px 17px;\n   overflow-y: scroll;\n  //  height: calc(100vh - ".concat(b.a.sizes.search.padding+b.a.sizes.gallery.topH+("desktop"===Object(s.a)()?0:190),"px);\n   height: calc(100vh - ").concat(b.a.sizes.search.padding+b.a.sizes.gallery.topH,"px);\n  //  height: 100%;\n   width: 100%;\n\n   .masonry-gallery {\n     display: flex;\n     list-style: none;\n     flex-direction: row;\n     flex-wrap: wrap;\n\n     .masonry-col {\n       width: ").concat("desktop"===Object(s.a)()?32:90,"%;\n       margin-right: 1%;\n\n      .masonry-col-item {\n        position: relative;\n        &:hover {\n          .image-infos {\n            display: block;\n          }\n        }\n        .image-infos {\n          display: none;\n         ").concat(b.a.els.imageInfos,"\n        }\n        img {\n          ").concat(b.a.els.images,"\n        }\n        margin-bottom: 10px;\n      }\n     }\n   }\n }\n"),"\n\n  ").concat(ce,"\n\n  ").concat(v,"\n\n  ").concat(k,"\n\n  ").concat(ne,"\n\n  ").concat(Q.b,"\n\n  .no-file {\n    text-align: center;\n    margin-top: 49vh;\n  }\n\n\n\n\n\n\n\n\n\n\n\n  ////////////////////////////////////////////v \n  // LEFT 1\n  ////////////////////////////////////////////v\n  \n  ").concat(T,"\n\n  .settings-button {\n    position: fixed;\n    bottom: 10px;\n    right: 10px;\n    z-index: 11;\n  }\n\n\n\n  .left-wrapper {\n    background: ").concat(ue.l2.bg,"; \n    width: ").concat("desktop"===Object(s.a)()?de.desktop.l:"navigator"!==e?0:100,"vw;\n    display: ").concat("desktop"===Object(s.a)()?"flex":"navigator"!==e?"none":"flex",";\n\n\n\n    .left-wrapper-1 {\n      overflow: hidden;\n      background-color: ").concat(ue.l1.bg,"; \n      background-image: url('").concat(b.a.assets.decoBgMap,"');\n      background-blend-mode: color-burn;\n      color: ").concat(ue.l1.font,";\n      width: ").concat(de.desktop.l1,"%;\n      height:100vh;\n      position: relative;\n\n      ").concat(Z,"\n\n      ").concat(J,"\n    }\n\n\n\n\n\n    ////////////////////////////////////////////v \n    // TEXT VIEW : LEFT 2\n    ////////////////////////////////////////////v2\n    .left-wrapper-2 {\n      width: ").concat(de.desktop.l2,"%;\n      height:100vh;\n      overflow: hidden;\n      \n      .top-files-list-wrapper {\n        padding-top: ").concat(de.search.padding,"px;\n        height: ").concat(de.search.h,"px;\n        .subtitle-wrapper {\n          display: flex;\n          h3.subtitle {\n            margin: 0px ").concat(de.block,"px ").concat(de.block,"px ").concat(de.block,"px; \n          }\n          .counter {\n            margin: 0px;\n            margin-top: 2px;\n            color: ").concat(ue.l2.text,";\n            font-size: 10px;\n            font-weight: 800;\n          }\n        }\n      }\n\n      \n    }\n\n    \n\n    \n    \n\n    .files-list-component {\n      position: relative\n    }\n\n    .list-toolbar {\n      position: absolute;\n      top: -93px;\n      right: 0px;\n      color: ").concat(ue.l2.text,";\n      button {\n        color: ").concat(ue.l2.text,";\n        ").concat(se.button,"\n        padding: 0px;\n        margin-right: ").concat(de.block,"px; \n        font-size: 10px;\n        cursor: pointer;\n        span {\n          margin-right: 5px;\n        }\n      }\n\n      .items-list-count {\n        position: absolute;\n        color: grey;\n        font-size: 10px;\n        right: 10px;\n        top: 5px;\n      }\n    }\n\n    \n    ").concat(V,"\n\n    \n  }\n\n  \n\n\n\n\n\n\n\n\n\n  ////////////////////////////////////////////v \n  // IMAGE GALLERY VIEW\n  ////////////////////////////////////////////v\n  .right-wrapper.image-gallery-view {\n    background: ").concat(ue.l2.bg,"; \n    .image-gallery-header {\n      padding-top: ").concat(de.search.padding,"px;\n      height: ").concat(de.gallery.topH,"px;\n\n      .search-bar-component {\n        // padding: 10px 0px;\n      }\n    }\n\n    .image-gallery-component-wrapper {\n      \n    }\n  }\n\n\n\n  ////////////////////////////////////////////v \n  // TEXT VIEW : RIGHT\n  ////////////////////////////////////////////v \n  ").concat(G.b,"\n  .right-wrapper.dual-viewer-view {\n      width: ").concat("desktop"===Object(s.a)()?de.desktop.r:"navigator"!==e?100:0,"vw;\n      display: ").concat("desktop"===Object(s.a)()||"navigator"!==e?"block":"none",";\n      padding-top: 0px;\n    .note-wrapper {\n      .dual-view-wrapper {\n        &.view-editor {\n          .editor-area {\n            width: 100%;\n          }\n          .preview-area {\n            display: none;\n          }\n        }\n        &.view-preview {\n          .editor-area {\n            position: absolute;\n            .main-editor-wrapper {\n              display:none;\n            }\n          }\n          .preview-area {\n            width: 100%;\n            padding: 0px ").concat(3*de.block,"px;\n          }\n        }\n        position:relative;\n        display: ").concat("desktop"===Object(s.a)()?"flex":"block",";\n        \n        \n        \n        ").concat(f.a,"\n        \n\n        ").concat(Object(g.c)(e),"\n\n        ").concat(h.b,"\n\n        ").concat(Object(m.b)(e),"\n        \n      }\n        \n      }\n    \n      \n      \n      h3 {\n        margin-bottom: 0px;\n      }\n      pre {\n        white-space: -moz-pre-wrap; /* Mozilla, supported since 1999 */\n        white-space: -pre-wrap; /* Opera */\n        white-space: -o-pre-wrap; /* Opera */\n        white-space: pre-wrap; /* CSS3 - Text module (Candidate Recommendation) http://www.w3.org/TR/css3-text/#white-space */\n        word-wrap: break-word; /* IE 5.5+ */\n      }\n    }\n  }\n}\n");return Object(p.a)(t,";","")}),fe=n(23),be={title:"",key:"",path:""},ge=function e(t,n){for(var o,c=0;c<n.length;c++)if(n[c].path===t){o=Object(M.cloneDeep)(n[c]);var a=n[c].children;if(Object(M.isArray)(a))for(var r=0;r<a.length;r++){var i=e(a[r].path,n);i&&(o.children[r]=i)}}return o},me=function(e,t){for(var n="add",o=0;o<t.length;o++)e.path===t[o].path&&(t[o]=e,n="update");return"add"===n&&t.push(e),t},he={title:".trash",key:"/.tiro/.trash",path:"/.tiro/.trash"},_e=function(e,t,n,c){var a=Object(q.a)("sortMode",2),r=Object(i.a)(a,2),s=r[0],d=r[1],p=Object(o.useState)([]),f=Object(i.a)(p,2),g=f[0],m=f[1],h=Object(o.useState)(1),_=Object(i.a)(h,2),v=_[0],j=(_[1],Object(o.useRef)(0));Object(o.useEffect)((function(){return console.log("[FILES LIST] init socket listener"),j.current=u.b.on("getFiles",(function(e){S(e)})),function(){console.log("[FILES LIST] clean socket listener"),u.b.off(j.current)}}),[]);var x=Object(o.useState)({}),w=Object(i.a)(x,2),E=w[0],k=w[1],C=Object(o.useRef)(0);Object(o.useEffect)((function(){return C.current=u.b.on("getFilesPreview",T),function(){u.b.off(C.current)}}),[E]),Object(o.useEffect)((function(){k({})}),[g]);var T=function(e){for(var t=Object(M.cloneDeep)(E),n=0;n<e.filesPreview.length;n++){var o=e.filesPreview[n];t[o.path]=o}k(t)},F=Object(o.useRef)([]),S=function(e){e.initialResults?F.current=[]:e.temporaryResults?F.current=[].concat(Object(fe.a)(F.current),Object(fe.a)(e.files)):F.current=Object(M.cloneDeep)(e.files),F.current=D(F.current,s),m(F.current),c(F.current,e.temporaryResults||!1,e.initialResults||!1)},D=function(e,t){var n;switch(U[t]){case"alphabetical":n=Object(M.sortBy)(e,[function(e){return e.realname.toLocaleLowerCase()}]);break;case"created":n=Object(M.sortBy)(e,["created"]).reverse();break;case"modified":n=Object(M.sortBy)(e,["modified"]).reverse();break;default:n=Object(M.sortBy)(e,[function(e){return e.realname.toLocaleLowerCase()}])}return n};return{activeFileIndex:e,setActiveFileIndex:t,files:g,setFiles:m,askForFolderFiles:function(e){u.b.emit("askForFiles",{folderPath:e,token:Object(te.a)()})},FilesListComponent:function(o){return Object(O.a)(Object(l.c)("div",{className:"files-list-component"},Object(l.c)("div",{className:"list-toolbar"},Object(l.c)("button",{type:"button",title:"sort",onClick:function(e){var t=s+1>=U.length?0:s+1;d(t),m(D(g,t))}},Object(l.c)("span",null," ",g.length>0&&Object(l.c)("span",{className:"list-count"},"(",g.length,")")," ",B[s]," "),Object(l.c)(y.a,{name:"faSort",color:b.a.colors.l2.text}))),Object(l.c)("div",{className:"list-wrapper"},Object(l.c)(W,{files:g,filesPreview:E,hoverMode:!1,activeFileIndex:e,modifierPressed:n,sortMode:s,onFileClicked:function(e){t(e),o.onFileClicked(e)},onFileDragStart:o.onFileDragStart,onFileDragEnd:o.onFileDragEnd,onVisibleItemsChange:function(e){!function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];E[o]||t.push(o)}t.length>1?(console.log("[LIST PREVIEW] askFilesPreview ".concat(e.length," asked but sent request for ").concat(t.length)),u.b.emit("askFilesPreview",{filesPath:t,token:Object(te.a)()})):console.log("[LIST PREVIEW] no request sent")}(e)}}))),[g,e,s,v,n,E])}}},Oe=function(e){var t="".concat(e).substr(0,10);return parseInt(t)},ve=n(178),je=function(e){var t=function(){var e=Object(o.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1];return{syncScrollY:n,updateSyncScroll:function(e){var t=(e>0?1:-1)*Math.min(Math.abs(e),40),o=n+t,a=m.c.main.current,r=h.c?h.c.getContentHeight():0,i=Math.max(a.offsetHeight,r);o>-200&&o<i&&c(o)},setPosY:c}}(),n=t.syncScrollY,c=t.updateSyncScroll,a=t.setPosY,r=Object(q.a)("viewtype","both"),s=Object(i.a)(r,2),u=s[0],d=s[1],p=Object(o.useState)(""),f=Object(i.a)(p,2),b=f[0],_=f[1];return Object(ve.a)("fileContent",{description:"live updated currentFileContent",func:function(){return b}}),Object(o.useEffect)((function(){_(e.fileContent)}),[e.fileContent]),Object(o.useEffect)((function(){a(1)}),[e.file.path]),Object(l.c)("div",{className:"dual-view-wrapper view-".concat(u),onWheelCapture:function(e){c(e.deltaY)}},Object(l.c)(g.a,{file:e.file,posY:n,fileContent:e.fileContent,canEdit:e.canEdit,isLeavingNote:e.isLeavingNote,onScroll:function(e){},onFileTitleEdited:e.onFileTitleEdited,onSavingHistoryFile:e.onSavingHistoryFile,onFileEdited:function(t,n){e.onFileEdited(t,n),_(n)},onFileDelete:e.onFileDelete,onBackButton:e.onBackButton,onLightboxClick:e.onLightboxClick,onViewToggle:function(){"both"===u&&d("editor"),"editor"===u&&d("preview"),"preview"===u&&d("both")}}),Object(l.c)(m.a,{file:e.file,posY:n,fileContent:b}))},xe=n(117),we=n(124),Ee=!1,ke=function(e){if(!e)return null;if(e.startsWith(we.a.metas.headerStart)&&(Ee=!0),e.startsWith(we.a.metas.headerEnd)&&(Ee=!1),""===e)return null;if(!Ee)return null;var t=e.split(": ");if(2!==t.length)return null;var n=t.shift();if(!n)return null;var o,c=t.join(":").trim();if("created"===n||"modified"===n){o=c,c=parseInt(o).toString()===o?Oe(c):c;var a=new Date(c).getTime();isNaN(a)||(c=a)}return{name:n,value:c}},ye=function(e,t,n,c,a,r,s,d){var p=Object(o.useState)(null),f=Object(i.a)(p,2),b=f[0],g=f[1],m=Object(o.useState)({}),h=Object(i.a)(m,2),_=h[0],v=h[1],j=Object(o.useState)(!1),x=Object(i.a)(j,2),w=x[0],E=x[1],k=Object(o.useRef)(0);Object(o.useEffect)((function(){return console.log("[FILE CONTENT] init socket listener"),k.current=u.b.on("getFileContent",(function(e){console.log("[FILE CONTENT] getFileContent",e),E(!0);var t=function(e){var t=e.match(xe.b.metas),n={};if(t&&t[0])for(var o=t[0].split("\n"),c=0;c<o.length;c++){var a=ke(o[c]);a&&(n[a.name]=a.value)}return{metas:n,content:e.replaceAll(xe.b.metas,"")}}(e.fileContent);v(t.metas),g(t.content)})),function(){console.log("[FILE CONTENT] clean socket listener"),u.b.off(k.current)}}),[]);var y=function(t,n){var o=Object(M.cloneDeep)(_);o.created||(o.created=Oe(e&&e.created?e.created:Date.now())),o.modified=Oe(Date.now());var c="".concat(function(e){var t="".concat(we.a.metas.headerStart,"\n");return Object(M.each)(e,(function(e,n){t+="".concat(n,": ").concat(e,"\n")})),t+="".concat(we.a.metas.headerEnd)}(o)).concat(n);console.log("[FILE CONTENT] API -> ask for file save",{filepath:t,contentWithMeta:c}),u.b.emit("saveFileContent",{filepath:t,newFileContent:c,token:Object(te.a)()})};return{setFileContent:g,fileContent:b,setCanEdit:E,askForFileContent:function(e){e&&e.name.endsWith(".md")&&(g("loading..."),E(!1),u.b.emit("askForFileContent",{filePath:e.path,token:Object(te.a)()}))},DualViewerComponent:function(o){return Object(O.a)(Object(l.c)("div",{className:"note-wrapper"},e&&Object(l.c)(je,{file:e,canEdit:w,isLeavingNote:o.isLeavingNote,forceRender:o.forceRender,fileContent:b||"",onFileEdited:y,onFileTitleEdited:function(t,n){var o="".concat(e.folder,"/").concat(t,".md"),c="".concat(e.folder,"/").concat(n,".md");console.log("[FILE CONTENT] onFileTitleEdited =>",{initPath:o,endPath:c}),s(o,c),a.current=0},onSavingHistoryFile:function(e,t,n){console.log("[FILE CONTENT] onSavingHistoryFile ".concat(n," => ").concat(e)),u.b.emit("createHistoryFile",{filePath:e,content:t,historyFileType:n,token:Object(te.a)()})},onFileDelete:function(e){console.log("[FILE CONTENT] onFileDelete => ".concat(e));var o=t;o>0?a.current=o-1:0===o&&c.length>0?a.current=0:r(),u.b.emit("onFileDelete",{filepath:e,token:Object(te.a)()}),d(n)},onLightboxClick:o.onLightboxClick,onBackButton:o.onBackButton}),!e&&Object(l.c)("div",{className:"no-file"},"No file")),[b,e,w,o.isLeavingNote,o.forceRender])}}},Ce=n(196),Te=n(204),Fe=n(232),Se=function(e){return e.path.substr(0,e.path.length-(e.title.length+1))},De=function(e,t,n,o){var c=function(e,t){console.log("[MOVEFILE] ".concat(e," -> ").concat(t)),u.b.emit("moveFile",{initPath:e,endPath:t,token:Object(te.a)()})};return{askForMoveFile:c,promptAndBatchMoveFiles:function(t,n){if(window.confirm("move ".concat(null===t||void 0===t?void 0:t.length," files to ").concat(n.key,"? (example: ").concat(t[0].path," to ").concat(n.key,"/").concat(t[0].name))){for(var o=0;o<t.length;o++){var a=t[o],r="".concat(a.path),i="".concat(n.key,"/").concat(a.name);c(r,i)}e()}},promptAndMoveFolder:function(c){var a=Object(d.a)({},c),r=a.folder,i=a.folderToDropInto,l=a.folderBasePath,s=a.newTitle,p=a.renameOnly,f=[r.path,"".concat(p?Se(i):i.path,"/").concat(s||r.title)],b="".concat(l,"/").concat(f[0]),g="".concat(l,"/").concat(f[1]);window.confirm("".concat(x.a.moveFolderPrompt," ").concat(b," to ").concat(g,"?"))&&(!function(e,t){console.log("[MOVEFOLDER] ".concat(e," -> ").concat(t)),u.b.emit("moveFolder",{initPath:e,endPath:t,token:Object(te.a)()})}(b,g),e(),t(),n(),Object(Te.c)({}),o([Se(r),i.path]),setTimeout((function(){o([Se(r),i.path])}),1e3))}}},Pe=function(e,t,n){((e=e||window.event).keyCode==={up:38,down:40,ctrl:17,shift:16,alt:18,enter:13}[t]||e.key===t)&&n()},Ie=function(e){return e=(e=(e=e.split("//").join("/")).split("\\").join("/")).split("//").join("/")},Me=Object(l.b)("*{-webkit-print-color-adjust:exact!important;color-adjust:exact!important;}*:focus{outline:none;}body{margin:0;padding:0px;background:",b.a.colors.bg.light,";font-size:11px;font-family:",b.a.font.main,";}html,body{height:100vh;overflow:hidden;}button,input{font-family:",b.a.font.main,";font-weight:700;color:",b.a.colors.l2.title,";}@media print{","\n\n    .preview-title, .date,\n    .editor-area, .connected, .left-wrapper, .connection-status, .mobile-view-toggler {\n        display:none!important;\n    }\n    html, body {\n        overflow: auto!important;\n        height: auto!important;\n        background-color: white;\n    }\n    .main-wrapper .right-wrapper.dual-viewer-view {\n        width: 100vw!important;\n    }\n    .preview-area-wrapper {\n        .infos-preview-wrapper {\n            .file-path-wrapper {\n                display:none!important;\n            }\n            .title {\n                margin-bottom: 40px!important;\n                line-height: 40px;\n            }\n            display:block!important;\n        }\n        height: auto!important;\n        display:block!important;\n        overflow: visible!important;\n        width: 100vw!important;\n        margin-top: 20px!important;\n        top: 0;\n        font-family: arial, sans-serif!important;\n        left: 0;\n        margin: 0;\n        padding: 15px;\n        font-size: 14px;\n        line-height: 18px;\n    }\n",";}body{position:relative;}h3.subtitle{margin:0px 0px ",b.a.sizes.block,"px 0px;font-family:",b.a.font.main,";text-transform:uppercase;font-size:14px;font-weight:800;font-style:italic;color:",b.a.colors.main,";}.invisible-scrollbars{height:100vh;padding-right:20px;width:calc(100% + ",b.a.sizes.scrollbar,"px);box-sizing:content-box;overflow-y:scroll;}",""),Re=n(216);r.a.render(Object(l.c)((function(){Object(o.useEffect)((function(){return console.log("========= [APP] MOUNTED on a ".concat(Object(s.a)())),Object(u.d)().then((function(){ot(!0),le($)})),function(){console.log("app will unmount")}}),[]);var e=Object(o.useRef)(null),t=Object(o.useRef)(""),n=Object(o.useRef)(""),a=function(){F(-1),Ye(null)},r=function(){R([])},p=function(){U([])},f=function(){console.log("[cleanListAndFileContent]"),a(),r(),p()},b=function(t,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=Ie(t),console.log("[FOLDER CHANGED] to ".concat(t," with view ").concat(n)),ut(!0),setTimeout((function(){we(""),ae(t),f(),"text"===n?(o&&(e.current=0),L(t),ut(!1)):"image"===n&&(ae(t),W(t))}))},g=Object(M.debounce)((function(){je(!1)}),100),m=function(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(""),d=Object(i.a)(s,2),p=d[0],f=d[1],b=Object(o.useState)(""),g=Object(i.a)(b,2),m=g[0],h=g[1],_=Object(o.useState)(""),O=Object(i.a)(_,2),v=O[0],j=O[1],w=Object(o.useState)(),E=Object(i.a)(w,2),k=E[0],y=E[1],C=Object(o.useRef)(0);return Object(o.useEffect)((function(){return console.log("[SETUP CONFIG] init socket listener"),C.current=u.b.on("getSetupInfos",(function(t){"SUCCESS_CONFIG_CREATION"===t.code?(y(["success","".concat(x.a.setupForm.successReload)]),setTimeout((function(){window.location.reload()}),3e3)):"ASK_SETUP"===t.code?(e.cleanAllApp(),r(!0),t.defaultFolder&&j(t.defaultFolder)):y(["error","".concat(t.code,": ").concat(t.message)])})),function(){console.log("[SETUP CONFIG] clean socket listener"),u.b.off(C.current)}}),[]),{displayWelcomePopup:a,SetupPopupComponent:function(e){return Object(l.c)(c.a.Fragment,null,a&&Object(l.c)("div",{className:"setup-popup-component"},Object(l.c)(ee.a,{title:"Welcome to Tiro",onClose:function(){}},Object(l.c)("p",null,x.a.setupForm.introText)," ",Object(l.c)("br",null),Object(l.c)("div",null,Object(l.c)(Q.a,{value:p,label:x.a.setupForm.user,explanation:x.a.setupForm.userExplanation,onChange:function(e){f(e)},shouldNotSelectOnClick:!0}),Object(l.c)(Q.a,{value:m,label:x.a.setupForm.password,type:"password",explanation:x.a.setupForm.passwordExplanation,onChange:function(e){h(e)},shouldNotSelectOnClick:!0}),Object(l.c)(Q.a,{value:v,label:x.a.setupForm.dataFolder,explanation:x.a.setupForm.folderExplanation,onChange:function(e){j(e)},shouldNotSelectOnClick:!0}),Object(l.c)("input",{type:"button",value:"submit",className:"submit-button",onClick:function(e){y(void 0),u.b.emit("sendSetupInfos",{form:{user:p,password:m,dataFolder:v},token:Object(te.a)()})}}),k&&Object(l.c)("div",{className:k[0]},k[1])))))}}}({cleanAllApp:function(){console.log("[cleanAllApp]"),et(),ue(),a(),r(),p()}}).SetupPopupComponent,h=Object(te.b)({onLoginAsked:function(){f()},onLoginSuccess:function(){ct()}}).LoginPopupComponent,v=Object(o.useState)(-1),k=Object(i.a)(v,2),T=k[0],F=k[1],S=function(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(o.useRef)(!1),l=Object(o.useRef)(!1);return Object(o.useEffect)((function(){return window.onkeydown=function(t){e.onKeyDown(t),Pe(t,"ctrl",(function(){l.current=!0})),Pe(t,"shift",(function(){a(!0)})),Pe(t,"alt",(function(){r.current=!0}))},window.onkeyup=function(t){e.onKeyUp(t),Pe(t,"ctrl",(function(){l.current=!1})),Pe(t,"shift",(function(){a(!1)})),Pe(t,"alt",(function(){r.current=!1}))},function(){}}),[e.activeFileIndex]),{ctrlPressed:l,shiftPressed:c,setShiftPressed:a,altPressed:r}}({activeFileIndex:T,onKeyDown:function(e){Pe(e,"up",(function(){var e=T;e>0&&(F(e-1),Je(I[e-1]))})),Pe(e,"down",(function(){var e=T;e<I.length-1&&(F(e+1),Je(I[e+1]))}))},onKeyUp:function(e){}}),D=S.shiftPressed,P=(S.ctrlPressed,S.altPressed,_e(T,F,D,(function(o,c,a){if(c?je(c):g(),0!==o.length){if(-1!==T&&T<o.length&&Je(o[T]),Object(M.isNumber)(e.current)){console.log("[LOAD] shouldLoadNoteIndex detected, loading note ".concat(e.current));var r=e.current;o.length>=r+1&&(F(r),Je(o[r])),e.current=null}if(ce===t.current&&xe===n.current||(o.length>=1&&Je(o[0]),F(0),t.current=ce,n.current=xe),!c&&!a){var i=He(o);-1!==i&&o[i]&&(F(i),Je(o[i]))}}}))),I=P.files,R=P.setFiles,L=P.askForFolderFiles,A=P.FilesListComponent,N=function(e){var t=Object(o.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(o.useRef)(0);Object(o.useEffect)((function(){return console.log("[IMAGES LIST] init socket listener"),r.current=u.b.on("getImages",(function(e){l(e)})),function(){console.log("[IMAGES LIST] clean socket listener"),u.b.off(r.current)}}),[]);var l=function(t){a(t.images),e(t.images)};return{images:c,setImages:a,askForFolderImages:function(e){u.b.emit("askForImages",{folderPath:e,token:Object(te.a)()})},onImagesReceivedCallback:e}}((function(e){console.log("[IMAGES CALLBACK] images nb: ".concat(e.length)),je(!1)})),B=N.images,U=N.setImages,W=N.askForFolderImages,z=function(e){var t=Object(o.useState)("text"),n=Object(i.a)(t,2),c=n[0],a=n[1],r=function(t){console.log("[APP VIEW] switching from ".concat(c," to ").concat(t)),a(t),setTimeout((function(){e.onViewSwitched(t)}))};return{currentAppView:c,switchAppView:r,AppViewSwitcherComponent:function(){var e="text"===c?"image":"text",t=[{icon:"faFileAlt",title:x.a.appviews.text,action:function(t){"image"===c&&r(e)},active:"text"===c},{icon:"faFileImage",title:x.a.appviews.image,action:function(t){"text"===c&&r(e)},active:"image"===c}];return Object(l.c)("div",{className:"app-view-switcher-component"},Object(l.c)(_.a,{buttons:t}))}}}({onViewSwitched:function(e){b(ce,e)}}),K=z.currentAppView,H=z.switchAppView,V=z.AppViewSwitcherComponent,G=function(e){var t=Object(q.a)("foldersFlat",[]),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(o.useState)(be),s=Object(i.a)(r,2),d=s[0],p=s[1],f=Object(q.a)("folderBasePath",""),b=Object(i.a)(f,2),g=b[0],m=b[1],h=Object(q.a)("selectedFolder",""),_=Object(i.a)(h,2),v=_[0],j=_[1],x=Object(q.a)("openFolders",["/"]),w=Object(i.a)(x,2),E=w[0],k=w[1],y=Object(o.useRef)(0);return Object(o.useEffect)((function(){return console.log("[TREE FOLDER] init socket listener"),y.current=u.b.on("getFoldersScan",(function(e){for(var t=c,n=0;n<e.folders.length;n++)e.folders[n]&&(t=me(e.folders[n],t));a(t);var o=ge("/",t);o&&p(o),m(e.pathBase)})),function(){console.log("[TREE FOLDER] clean socket listener"),u.b.off(y.current)}}),[]),{openFolders:E,addToOpenedFolders:function(e){k([].concat(Object(fe.a)(E),[e]))},removeToOpenedFolders:function(e){var t=E,n=t.indexOf(e);n>-1&&t.splice(n,1),k(t)},folderBasePath:g,selectedFolder:v,setSelectedFolder:j,cleanFolderHierarchy:function(){p(be)},askForFolderScan:function(e){console.log("[TREE FOLDER] askForFolderScan with foldersPaths:",{foldersPaths:e}),u.b.emit("askFoldersScan",{foldersPaths:e,token:Object(te.a)()})},FolderTreeComponent:function(t){return Object(O.a)(Object(l.c)(Y,{current:v,folder:d,onFolderClicked:t.onFolderClicked,onFolderMenuAction:t.onFolderMenuAction,onFolderOpen:t.onFolderOpen,onFolderClose:t.onFolderClose,onFolderDragStart:t.onFolderDragStart,onFolderDragEnd:t.onFolderDragEnd,onFolderDrop:t.onFolderDrop}),[d,E,v,e])}}}(K),$=G.openFolders,J=G.addToOpenedFolders,Z=G.removeToOpenedFolders,ne=G.folderBasePath,ce=G.selectedFolder,ae=G.setSelectedFolder,le=G.askForFolderScan,se=G.FolderTreeComponent,ue=G.cleanFolderHierarchy,de=function(e,t,n){var c=Object(o.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],d=Object(o.useState)(!1),p=Object(i.a)(d,2),f=p[0],b=p[1];Object(ve.a)("triggerSearch",{description:"trigger a search programmatically",func:function(e){console.log("[SEARCH FROM LINK] for ".concat(e)),e=Object(Ce.a)(e,[["_","-"]]),g(e)}});var g=function(o){console.log("[APP -> TRIGGER SEARCH] with type ".concat(n," : ").concat(o)),s(o),b(!0),e.current=0,u.b.emit("searchFor",{term:o,token:Object(te.a)(),type:n}),t()};return{isSearching:f,setIsSearching:b,searchTerm:r,setSearchTerm:s,triggerSearch:g,SearchBarComponent:function(e){return Object(O.a)(Object(l.c)(oe,{onSearchSubmit:function(){g(r)},onSearchTermUpdate:function(t,n){""===r&&""!==e.selectedFolder&&(t=t+" "+e.selectedFolder,n&&setTimeout((function(){var t=(n.selectionStart||0)-e.selectedFolder.length-1;n.selectionStart=t,n.selectionEnd=t}),10)),s(t)},searchTerm:r,isSearching:f}),[r,e.selectedFolder,f,n])}}}(e,f,K),Oe=de.isSearching,je=de.setIsSearching,xe=de.searchTerm,we=de.setSearchTerm,Ee=de.triggerSearch,ke=de.SearchBarComponent,Se=function(){var e=Object(o.useState)("navigator"),t=Object(i.a)(e,2),n=t[0],a=t[1];return{mobileView:n,setMobileView:a,MobileToolbarComponent:function(e){return Object(O.a)(Object(l.c)(c.a.Fragment,null,"desktop"!==Object(s.a)()&&Object(l.c)(_.a,{class:"mobile-view-toggler",buttons:[{icon:"faStream",class:"".concat("navigator"===n?"active":""),action:function(){a("navigator")}},{icon:"faPenNib",class:"".concat("editor"===n?"active":""),action:function(){a("editor")}},{icon:"faEye",class:"".concat("preview"===n?"active":""),action:function(){a("preview")}}]})),[n,e])}}}(),Le=Se.mobileView,Ae=Se.setMobileView,Ne=Se.MobileToolbarComponent,Be=De(a,r,ue,le),Ue=Be.askForMoveFile,We=Be.promptAndMoveFolder,ze=Be.promptAndBatchMoveFiles,Ke=function(e){var t=Object(d.a)({},e),n=t.changeToFolder,c=t.currentAppView,a=Object(o.useRef)(),r=function(e,t){console.log("[TITLE SEARCH] => ".concat(e,"-").concat(t)),a.current=e,n(t,c,!1)};return Object(ve.a)("searchFileFromTitle",{description:"searchFileFromTitle",func:function(e,t){console.log("[searchFileFromTitle]"),r(e,t)}}),{searchedFileTitle:a,getSearchedTitleFileIndex:function(e){if(!a.current)return-1;console.log('[TITLE SEARCH] getSearchedTitleFileIndex start searching for "'.concat(a.current,'" in ').concat(e.length," files"));var t=0,n=a.current;a.current=void 0;for(var o=0;o<e.length;o++){var c=e[o];if(c.name.includes(n))return console.log("[TITLE SEARCH] NOTE FOUND ".concat(c.name,",").concat(o)),o}return t},searchFileFromTitle:r}}({changeToFolder:b,currentAppView:K}),He=Ke.getSearchedTitleFileIndex,Ve=Ke.searchFileFromTitle,Ge=I[T],qe=ye(Ge,T,ce,I,e,a,Ue,L),Ye=(qe.fileContent,qe.setFileContent),$e=qe.setCanEdit,Je=qe.askForFileContent,Xe=qe.DualViewerComponent,Ze=function(e){var t=Object(q.a)("filesHistory",[]),n=Object(i.a)(t,2),c=n[0],a=n[1];Object(o.useEffect)((function(){console.log("[HISTORY] activeFile changed!",e),e&&r(e),e&&r(e)}),[e]);var r=Object(Fe.a)((function(e){console.log("[HISTORY] Add to history",e.name);for(var t=!0,n=-1,o=c,r=0;r<c.length;r++)c[r].name===e.name&&(t=!1,n=r);t||o.splice(n,1),(o=o.slice(0,20)).unshift(e),a(o)}),1e3);return{filesHistory:c,cleanLastFilesHistory:function(){a([])}}}(Ge),Qe=Ze.filesHistory,et=Ze.cleanLastFilesHistory,tt=function(e){var t=Object(o.useRef)([]),n=Object(o.useState)(!1),c=Object(i.a)(n,2),a=c[0],r=c[1],s=Object(o.useState)(!1),d=Object(i.a)(s,2),p=d[0],f=d[1],b="(DISCONNECTED)",g=Object(o.useRef)(b);Object(w.a)((function(){g.current=g.current===b?"(/!\\ DISCONNECTED /!\\)":b;var e=a?"".concat(E()," (Connected)"):"".concat(E()," ").concat(g.current);document.title=e}),1e3),Object(o.useEffect)((function(){return t.current[0]=u.b.on("disconnect",(function(){m(!1),e(!1)})),t.current[1]=u.b.on("reconnect",(function(){m(!0),f(!0),setTimeout((function(){f(!1)}),1e3),e(!0)})),t.current[2]=u.b.on("connect",(function(){m(!0),f(!0),setTimeout((function(){f(!1)}),1e3),e(!0)})),function(){t.current.forEach((function(e){u.b.off(e)}))}}),[]);var m=function(e){console.log("[SOCKET CONNECTION TOGGLE] to ".concat(e)),r(e)};return{connectionStatusComponent:function(){var e=["connected","connected"];return p&&(e=["back-online","back online"]),a||(e=["disconnected","disconnected"]),Object(l.c)("div",{className:"connection-status"},Object(l.c)("div",{className:e[0]},e[1],!a&&Object(l.c)("a",{href:"".concat(Object(u.c)(),"/socket.io/"),target:"_blank"},x.a.clickHereDisconnected)))},toggleSocketConnection:m}}($e),nt=tt.connectionStatusComponent,ot=tt.toggleSocketConnection;Object(w.a)((function(){}),1e3);var ct=function(e,t,n,c,a,r,i){var l=Object(o.useRef)(!1);Object(o.useEffect)((function(){u()}),[]);var s=function(){var e=Object(Te.a)();i.reactToUrlParams(e)},u=function(){s(),Object(Te.b)({onUrlParamsChange:function(e){l.current=!0,i.reactToUrlParams(e)}})},d=Object(Fe.a)((function(){if(l.current)return l.current=!1;var e=c?c.realname:"";("text"!==r||c)&&Object(Te.c)({title:e,folder:n,search:t,appview:r})}),200);return Object(o.useEffect)((function(){d()}),[a,n,e,r]),{reactToUrl:s}}(Oe,xe,ce,Ge,T,K,{reactToUrlParams:function(e){setTimeout((function(){console.log("[URL] to url params changes ".concat(JSON.stringify(e))),e.folder&&e.title&&Ve(e.title,e.folder),e.search&&(console.log("reactToUrlParams -> triggersearch"),Ee(e.search)),e.mobileview&&Ae(e.mobileview),e.appview&&H(e.appview)}),1e3)}}).reactToUrl,at=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(o.useRef)(0);return Object(o.useEffect)((function(){var e=Object(M.debounce)((function(){a.current=a.current+1,c(!0),setTimeout((function(){c(!1)}),200)}),200);return window.addEventListener("resize",(function(){e()})),function(){}}),[]),{forceResponsiveRender:n,frr:a}}().forceResponsiveRender,rt=Object(o.useRef)([]);Object(ve.a)("variables",{description:"variables for script uses",func:function(){return{file:I[T],config:j.a}}});var it=Object(o.useState)(!1),lt=Object(i.a)(it,2),st=lt[0],ut=lt[1],dt=Object(o.useState)(!1),pt=Object(i.a)(dt,2),ft=pt[0],bt=pt[1],gt=Object(o.useState)([]),mt=Object(i.a)(gt,2),ht=mt[0],_t=mt[1],Ot=Object(o.useState)(0),vt=Object(i.a)(Ot,2),jt=vt[0],xt=vt[1],wt=function(e,t){console.log("[LIGHTBOX] open ".concat(t.length," images to index ").concat(e),{images:t}),_t(t),xt(e)};return Object(l.c)("div",{className:pe(Le)},Object(l.c)(l.a,{styles:Me}),Object(l.c)("div",{role:"dialog",className:"main-wrapper view-".concat(K)},h({}),m({}),nt(),Ne(at),Object(l.c)("div",{className:"left-wrapper"},Object(l.c)("div",{className:"left-wrapper-1"},Object(l.c)("div",{className:"invisible-scrollbars"},"text"===K&&Object(l.c)(C,{onNewFile:function(){u.b.emit("createNote",{folderPath:ce,token:Object(te.a)()}),e.current=0}}),"text"===K&&Object(l.c)(X,{files:Qe,onClick:function(e){Ve(e.name,e.folder)}}),se({onFolderClicked:function(e){je(!0),b(e,K)},onFolderMenuAction:function(e,t,n){var o,c,a;"rename"===e&&n?We({folder:t,folderToDropInto:t,folderBasePath:ne,newTitle:n,renameOnly:!0}):"create"===e&&n?(c=n,a=t,console.log("[askFolderCreate]",c,a),u.b.emit("askFolderCreate",{newFolderName:c,parent:a,token:Object(te.a)()}),le([t.path])):"moveToTrash"===e?We({folder:t,folderToDropInto:he,folderBasePath:ne,newTitle:n}):"delete"===e&&(o=t,console.log("[askFolderDelete]",o),u.b.emit("askFolderDelete",{folderToDelete:o,token:Object(te.a)()}),le([t.path]))},onFolderOpen:function(e){J(e),le([e])},onFolderClose:function(e){Z(e)},onFolderDragStart:function(e){console.log("[DRAG MOVE] onFolderDragStart",e),rt.current=[{type:"folder",folder:e}]},onFolderDragEnd:function(){console.log("[DRAG MOVE] onFolderDragEnd"),rt.current=[]},onFolderDrop:function(e){!function(e){console.log("[DRAG MOVE] processDragDropAction ->",rt.current,e);var t=rt.current[0];"file"===t.type&&t.files?ze(t.files,e):"folder"===t.type&&t.folder&&We({folder:t.folder,folderToDropInto:e,folderBasePath:ne})}(e)}})),Object(l.c)("div",{className:"settings-button",onClick:function(){bt(!ft)}},Object(l.c)(y.a,{name:"faCog",color:"grey"})),ft&&Object(l.c)(Re.a,{onClose:function(){bt(!1)}})),Object(l.c)("div",{className:"left-wrapper-2"},Object(l.c)("div",{className:"top-files-list-wrapper"},Object(l.c)("div",{className:"subtitle-wrapper"},Object(l.c)(V,null)),ke({selectedFolder:ce})),Object(l.c)("div",{className:"files-list-wrapper"},A({selectedFolder:ce,searchTerm:xe,onFileClicked:function(e){F(e),Je(I[e])},onFileDragStart:function(e){console.log("[DRAG MOVE] onFileDragStart",e),rt.current=[{type:"file",files:e}]},onFileDragEnd:function(){console.log("[DRAG MOVE] onFileDragEnd"),rt.current=[]}})))),Object(l.c)("div",{className:"right-wrapper image-gallery-view"},Object(l.c)("div",{className:"image-gallery-header"},Object(l.c)("div",{className:"subtitle-wrapper"},Object(l.c)(V,null)),ke({selectedFolder:ce})),Object(l.c)(re,{images:B,onImageClicked:wt,forceRender:at})),Object(l.c)("div",{className:"right-wrapper dual-viewer-view"},Xe({isLeavingNote:st,forceRender:at,onLightboxClick:wt,onBackButton:function(){var e=Qe[0];Qe[0]&&(console.log("BACK BUTTON to",Qe[0].name),Ve(e.name,e.folder))}}))),ht.length>0&&Object(l.c)(ie,{images:ht,startingIndex:jt,onClose:function(e,t){console.log("[LIGHTBOX] close"),_t([]),xt(0)}}))}),null),document.getElementById("root"))},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var o=n(14),c=n(22),a=n.n(c),r=n(124),i=n(144),l=n(167),s=n(52),u=n(50),d=n(19),p=function(){var e=function(e){var t,n="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===n.length?null===(t=n.pop())||void 0===t?void 0:t.split(";").shift():void 0}("tiro-login-token");return e||""},f=function(e){!function(e,t,n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3);var c="expires="+o.toUTCString();document.cookie=e+"="+t+";"+c+";path=/"}("tiro-login-token",e,r.a.tokenRefreshInHours)},b=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],b=n[1],g=Object(c.useState)(""),m=Object(o.a)(g,2),h=m[0],_=m[1],O=Object(c.useState)(""),v=Object(o.a)(O,2),j=v[0],x=v[1],w=Object(c.useState)(),E=Object(o.a)(w,2),k=E[0],y=E[1],C=Object(c.useRef)(0);Object(c.useEffect)((function(){return C.current=s.b.on("getLoginInfos",(function(t){switch(t.code){case"SUCCESS":if(!t.token)return;f(t.token),b(!1),e.onLoginSuccess();break;case"WRONG_TOKEN":b(!0),y(["error",u.a.loginForm.wrongToken]),e.onLoginAsked();break;case"WRONG_USER_PASSWORD":y(["error",u.a.loginForm.wrongUserPassword]),b(!0)}})),function(){s.b.off(C.current)}}),[]);var T=function(){y(void 0),s.b.emit("sendLoginInfos",{user:h,password:j,token:p()})},F=Object(c.useState)(1),S=Object(o.a)(F,2),D=S[0],P=S[1];return{displayLoginPopup:r,LoginPopupComponent:function(e){return Object(d.c)(a.a.Fragment,null,r&&Object(d.c)("div",{className:"setup-popup-component"},Object(d.c)(l.a,{title:u.a.setupForm.title,onClose:function(){}},Object(d.c)("div",null,Object(d.c)(i.a,{shouldFocus:1===D,value:h,onEnterPressed:function(){P(2)},label:u.a.setupForm.user,onChange:function(e){_(e)}}),Object(d.c)(i.a,{shouldFocus:2===D,value:j,label:u.a.setupForm.password,type:"password",onEnterPressed:function(){T()},onChange:function(e){x(e)}}),Object(d.c)("button",{value:"submit",className:"submit-button",onClick:function(e){T()}},u.a.setupForm.submit),k&&Object(d.c)("div",{className:k[0]},k[1])))))}}}},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(112),c=n(124),a=Object(o.a)(Object(o.a)({},c.a.client),{},{global:{protocol:"//",url:"".concat(window.location.hostname),port:"80"===window.location.port?"":":".concat(window.location.port)}})}},[[613,3,4]]]);