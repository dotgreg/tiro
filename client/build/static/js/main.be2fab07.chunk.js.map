{"version":3,"sources":["../../shared/sockets/sockets.events.ts","managers/sockets/socket.manager.ts","../../shared/shared.config.ts","config.ts","managers/sockets/eventsListener.sockets.ts","managers/events.manager.ts","../../shared/helpers/lengthObj.helper.ts","managers/date.manager.ts","components/List.component.tsx","managers/math.manager.ts","managers/upload.manager.ts","managers/textProcessor.manager.ts","managers/device.manager.ts","managers/style.manager.ts","components/MonacoEditor.Component.tsx","components/Icon.component.tsx","managers/clipboard.manager.ts","managers/encryption.manager.ts","components/Popup.component.tsx","components/PasswordPopup.component.tsx","components/EditorToolbar.component.tsx","components/Editor.component.tsx","managers/textEditor.manager.ts","managers/string.manager.ts","components/SearchBar.component.tsx","components/TreeView.Component.tsx","managers/icons.manager.ts","managers/keys.manager.ts","managers/url.manager.ts","App.tsx","index.tsx"],"names":["socketEvents","clientSocket","sharedConfig","configClient","log","socket","eventManager","version","global","socketPort","socketUrl","window","location","hostname","staticPort","staticUrl","frontendPort","frontendUrl","socketEventsManager","params","name","events","this","event","callback","key","random","each","eventFunctions","i","f","j","console","toUpperCase","obj","nb","hasOwnProperty","lengthObj","monthNames","formatDateEditor","d","getDate","getMonth","getFullYear","getHours","getMinutes","formatDateList","toString","substr","SortModesLabels","SortModes","List","props","state","hoverMode","sort","sortMode","StyledWrapper","files","map","file","className","activeFileIndex","onClick","e","onFileClicked","multiSelectMode","type","checked","multiSelectArray","includes","onChange","arr","array","value","index","indexOf","splice","removeFromNumberArray","maxVal","max","ctrlPressed","isNumber","push","x","y","numbers","getAllNumbersBetween","onMultiSelectChange","onMouseEnter","Date","modified","created","React","Component","styled","div","siofu","require","transformUrlInLinks","bodyRaw","subst","replace","transformExtrawurstLinks","body","replaceAll","transformRessourcesInHTML","currentFolderPath","ressLink","codeOpenPopup","transformImagesInHTML","deviceType","deviceWidth","innerWidth","res","styleApp","bg","dark","grey","light","GlobalCssApp","css","CssApp","v","MonacoEditorWrapper","reactComp","vimStatusBar","editor","monaco","editorDidMount","vimMode","current","initVimMode","defineTheme","base","inherit","rules","background","colors","monacoEditor","setTheme","onEditorAvailable","setTimeout","getCurrentLineInfos","text","getValue","position","getPosition","splitedText","split","monacoPosition","lines","activeLine","lineNumber","lineIndex","createRef","nextProps","nextState","nextContext","posY","setScrollPosition","scrollTop","insertUnderCaret","trigger","ref","width","height","language","theme","options","automaticLayout","selectOnLineNumbers","minimap","enabled","wordWrap","fontSize","scrollbar","handleMouseWheel","Icon","icon","fa","alreadyListening","initClipboardListener","addEventListener","pasteEvent","clipboardData","undefined","items","length","blob","getAsFile","retrieveImageFromClipboardAsBlob","imageBlob","onImagePasted","encryptText","password","privateKey","cryptico","generateRSAKey","publicKey","publicKeyString","encrypt","Popup","OverlayClickPopup","onClose","PopupWrapper","title","children","PasswordPopup","passwordInput","focus","setState","target","onSubmit","EditorMobileToolbar","onButtonClicked","marked","Editor","textareaMobile","dragzone","uploadInput","previewContentWrapper","previewContent","keyUploadSocketListener","onNoteLeaveLogic","shouldSaveOnLeave","onFileEdited","path","fileContent","shouldEncryptOnLeave","cipher","neutralizeDelayedFileSave","noHistoryBackup","triggerContentSaveLogic","newContent","onSavingHistoryFile","throttledOnFileEdited","debouncedOnFileEdited","historySaveInterval","historyContent","restartAutomaticHistorySave","clearInterval","setInterval","historySaveInMin","throttle","filePath","content","debounce","submitOnEnter","onFilePathEdited","editorScrollLogic","delta","deltaY","Math","min","abs","newY","previewDivWrapper","previewDiv","monacoHeight","getContentHeight","maxHeight","offsetHeight","intervalReinitPassword","startReinitPasswordInterval","encryptContent","status","textEncrypted","decryptContent","decrypt","decryptText","alert","plaintext","currentCarretPos","getLineTextInfos","textarea","pos","selectionStart","c","textareaPosition","currentTop","currentLineInfosInterval","currentLineInfos","startLinesInfosInterval","resetCarretPosition","decal","setPosition","selectionEnd","triggerEditorAction","action","infos","startsWith","activeLineContent","trim","join","oldContentProp","editorEnabled","dragzoneEnabled","reloadEditor","askForPassword","cb","el","imageInMd","textAreaEl","startPos","endPos","substring","insertAtCaret","on","getUploadedFile","data","submitFiles","listenOnInput","listenOnDrop","onDragStart","onDragEnd","uploadOnDrop","emit","uploadResourcesInfos","folderpath","folder","off","currentFolderArr","pop","currentFolder","onWheelCapture","open","href","id","realname","toLowerCase","idtxt","idSearch","a","for","onFileDelete","onKeyDown","wrap","dangerouslySetInnerHTML","__html","SearchBar","searchTerm","onSearchSubmit","search","onSearchTermUpdate","isSearching","motion","motionName","motionAppear","onAppearStart","node","onAppearActive","scrollHeight","onLeaveStart","onLeaveActive","LocalStorageMixin","TreeView","decorate","onDragEnter","expandedKeys","onExpand","autoExpandParent","selectedKeys","selected","draggable","onRightClick","info","onFolderRightClicked","onSelect","onFolderClicked","treeData","displayName","onKey","keyName","keyCode","up","down","ctrl","shift","alt","currentUrlParams","getUrlParams","urlParams","queryString","urlParamsSearch","URLSearchParams","get","parseInt","App","listenerIds","intPageBlink","updatePageTitle","generateTitle","host","isSocketConnected","warning1","warning","document","toggleSocketConnection","toggleMobileView","mobileView","cleanFilesList","askForFolderFiles","folderPath","askForFiles","cleanAndAskForFolderFiles","askForFolderScan","askFolderHierarchy","moveFile","initPath","endPath","shouldRescan","promptAndBatchMoveFiles","confirm","fileId","filenameArr","realFileName","cleanMultiSelect","emptyFileDetails","sortFiles","sortedFiles","sortBy","toLocaleLowerCase","reverse","activeFileContent","loadFileDetails","fileIndex","endsWith","askForFileContent","initKeyboardShortcuts","onkeydown","onkeyup","lastFolderIn","lastSearchIn","shouldLoadFirstNote","onFolderFilesReceived","filter","extension","temporaryResults","selectedFolder","initSearchForContentLinks","ewTriggerSearch","term","triggerSearch","searchFor","ignoreNextUrlChange","updateAppUrl","newUrl","protocol","history","pushState","updateUrl","initUrlParamsLogic","p","newUrlParams","reactToUrlParams","onUrlParamsChange","log2","onpopstate","JSON","stringify","folderHierarchy","Promise","resolve","reject","socketBackend","io","connectionSuccess","connected","then","eventName","getFiles","getFileContent","getFolderHierarchy","disconnect","reconnect","connect","prevProps","prevState","forEach","styles","askForExplorer","isListEmpty","createNote","newMode","filepath","saveFileContent","newFileContent","historyFileType","createHistoryFile","onEditorDetached","askForNotepad","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.be2fab07.chunk.js","sourcesContent":["import { iFile, iFolder } from \"../types.shared\";\r\n\r\nexport enum socketEvents {\r\n    connection = 'connection',\r\n    disconnect = 'disconnect',\r\n    connect = 'connect',\r\n    reconnect = 'reconnect',\r\n    connectionSuccess = 'connectionSuccess',\r\n\r\n    askForFiles = 'askForFiles',\r\n    getFiles = 'getFiles',\r\n\r\n    askForFileContent = 'askForFileContent',\r\n    getFileContent = 'getFileContent',\r\n\r\n    saveFileContent = 'saveFileContent',\r\n    \r\n    getUploadedFile = 'getUploadedFile',\r\n\r\n    moveFile = 'moveFile',\r\n    \r\n    searchFor = 'searchFor',\r\n    \r\n    askFolderHierarchy = 'askFolderHierarchy',\r\n    getFolderHierarchy = 'getFolderHierarchy',\r\n\r\n    createNote = 'createNote',\r\n    createHistoryFile = 'createHistoryFile',\r\n\r\n    onFileDelete = 'onFileDelete',\r\n    askForExplorer = 'askForExplorer',\r\n    askForNotepad = 'askForNotepad',\r\n    uploadResourcesInfos = 'uploadResourcesInfos',\r\n\r\n}\r\n\r\nexport declare namespace iSocketEventsParams {\r\n    export interface askForFiles { folderPath: string }\r\n    export interface getFiles { files: iFile[], temporaryResults?:boolean}\r\n\r\n    export interface askForFileContent {filePath:string}\r\n    export interface getFileContent {fileContent: string}\r\n\r\n    export interface saveFileContent {filepath: string, newFileContent:string}\r\n\r\n    export interface moveFile {initPath: string, endPath:string}\r\n    \r\n    export interface searchFor {term:string}\r\n    export interface getUploadedFile {name:string, path:string}\r\n\r\n    export interface askFolderHierarchy {folderPath:string}\r\n    export interface getFolderHierarchy {folder: iFolder}\r\n\r\n    export interface createNote {folderPath: string}\r\n\r\n    export interface createHistoryFile {filePath: string, content: string, historyFileType: string}\r\n\r\n    export interface onFileDelete {filepath: string}\r\n    export interface askForExplorer {folderpath: string}\r\n    export interface askForNotepad {filepath: string}\r\n\r\n    export interface uploadResourcesInfos {folderpath: string}\r\n}","import * as io from 'socket.io-client'\r\nimport { socketEvents } from '../../../../shared/sockets/sockets.events';\r\nimport { configClient } from '../../config';\r\n\r\nexport let clientSocket:SocketIOClient.Socket\r\nexport const initSocketConnection = ():Promise<SocketIOClient.Socket> => {\r\n    return new Promise((resolve, reject) => {\r\n        let socketBackend = `${configClient.global.socketUrl}:${configClient.global.socketPort}`\r\n        //@ts-ignore\r\n        clientSocket = io(socketBackend);\r\n        configClient.log.socket && console.log(`[SOCKET] connecting to ${socketBackend}...`);\r\n        \r\n        // resolve then connectionSuccess is received from backend\r\n        clientSocket.on(socketEvents.connectionSuccess, (data:any) => {\r\n            configClient.log.socket &&console.log(`[SOCKET] connection successful!, socket.connected :${clientSocket.connected}`, data);\r\n            resolve(clientSocket)\r\n        });\r\n        \r\n\r\n        // clientSocket\r\n    })\r\n}","export const sharedConfig = {\r\n    socketServerPort: 3022, \r\n    frontendServerPort: 3023,\r\n    staticServerPort: 3021,\r\n\r\n    debug: {\r\n        socketEvents: true,\r\n        connection: true,\r\n    },\r\n}","import {sharedConfig} from '../../shared/shared.config';\r\n\r\nexport const configClient = {\r\n    log: {\r\n        socket: true,\r\n        eventManager: true,\r\n    },\r\n    version: 'build 13.2 25/01/2021',\r\n    global: {\r\n        socketPort: sharedConfig.socketServerPort,\r\n        socketUrl: window.location.hostname,\r\n\r\n        staticPort: sharedConfig.staticServerPort,\r\n        staticUrl: window.location.hostname,\r\n\r\n        frontendPort: sharedConfig.frontendServerPort,\r\n        frontendUrl: window.location.hostname,\r\n    }\r\n}","import { clientSocket } from \"./socket.manager\";\r\nimport { socketEvents } from \"../../../../shared/sockets/sockets.events\";\r\nimport EventManager from \"../events.manager\";\r\nimport {each} from 'lodash'\r\n\r\n// Create an event manager specialized for sockets events\r\nexport const socketEventsManager = new EventManager({name: 'Socket Event Manager'})\r\n\r\n// each socket events declared in socketEvents, if happends, trigger our eventManager\r\nexport const bindEventManagerToSocketEvents = () => {\r\n    each(socketEvents, eventName => {\r\n        clientSocket.on(eventName, (data:any) => {\r\n            socketEventsManager.trigger(eventName, data)\r\n        })\r\n    })\r\n}","import { random, each } from \"lodash\";\r\nimport { lengthObj } from \"../../../shared/helpers/lengthObj.helper\";\r\nimport { configClient } from \"../config\";\r\n\r\ninterface iEventManagerParams {\r\n  name: string\r\n}\r\n\r\nexport default class EventManager {\r\n  name: string\r\n  events:{\r\n    [key: string]: {\r\n      [key: number]: Function\r\n    }\r\n  } = {}\r\n\r\n  constructor(params:iEventManagerParams) {\r\n    this.name = params.name\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param event \r\n   * @param callback \r\n   * \r\n   * @return key of the event callback that can be disabled by .off(key)\r\n   * \r\n   */\r\n  on(event:string, callback:Function):number {\r\n    let key = random(1, 10000000)\r\n    if (!this.events[event]) this.events[event] = {}\r\n    this.events[event][key] = callback\r\n    return key\r\n  }\r\n\r\n  off(key:number) {\r\n    each(this.events, (eventFunctions,i) => {\r\n      each(eventFunctions, (f,j:any)=> {\r\n        //@ts-ignore\r\n        if (j == key) { //j,key has string and nubmer type, so ==;\r\n          delete this.events[i][j]\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  destroyEvent(event:string) {\r\n    delete this.events[event]\r\n  }\r\n\r\n  trigger(event:string, params?:any) {\r\n    if(configClient.log.eventManager) console.log(`%c [${this.name.toUpperCase()}] --> trigger ${event}, nb functions:`,'background: #ccc; color: blue', lengthObj(this.events[event]),`data: `, params)\r\n    if(this.events[event]) {\r\n      each(this.events[event], f => {\r\n        f(params)\r\n      })\r\n    }\r\n  }\r\n\r\n  clean() {\r\n    this.events = {}\r\n  }\r\n\r\n}","export const lengthObj = (obj:Object):number => {\r\n    let nb = 0\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            nb++\r\n        }\r\n    }\r\n    return nb\r\n}","const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\nconst monthNamesShort = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\",\r\n  \"July\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"\r\n];\r\n\r\n// export const formatDateEditor = (d: Date): string => {\r\n//     var datestring = d.getFullYear()  + \"-\" + (d.getMonth()+1) + \"-\" + d.getDate() + \" at \" +\r\n//     d.getHours() + \"h\" + d.getMinutes();\r\n//     return datestring\r\n// }\r\nexport const formatDateEditor = (d: Date): string => {\r\n    var datestring =   d.getDate() + \"  \" + monthNames[d.getMonth()] + \" \" + d.getFullYear() + \" at \" +\r\n    d.getHours() + \"h\" + d.getMinutes();\r\n    return datestring\r\n}\r\nexport const formatDateList = (d: Date): string => {\r\n    // var datestring =   d.getDate() + \"  \" + monthNamesShort[d.getMonth()] + \" \" + d.getFullYear() ;\r\n    var datestring =   d.getDate() + \"/\" + d.getMonth() + \"/\" + d.getFullYear().toString().substr(2) ;\r\n    return datestring\r\n}","import React from 'react';\r\nimport styled from '@emotion/styled'\r\nimport { iFile } from '../../../shared/types.shared';\r\nimport { isNumber, max } from 'lodash';\r\nimport { getAllNumbersBetween, removeFromNumberArray } from '../managers/math.manager';\r\nimport { formatDateList } from '../managers/date.manager';\r\n\r\nexport type SortMode = 'none' | 'alphabetical' | 'created' | 'modified'\r\nexport const SortModesLabels = ['none','Az','Crea','Modif']\r\nexport const SortModes = ['none','alphabetical','created','modified']\r\n// export const SortModeArr = ['none','alphabetical','created','modified']\r\n\r\nexport class List extends React.Component<{\r\n    files:iFile[]\r\n    activeFileIndex:number\r\n    hoverMode:boolean\r\n    sortMode:number\r\n    ctrlPressed:boolean\r\n    multiSelectMode:boolean\r\n    multiSelectArray:number[]\r\n    onFileClicked: (fileIndex:number) => void\r\n    onMultiSelectChange: (selectionArr:number[]) => void\r\n}, {\r\n}> {\r\n\r\n    constructor(props:any) {\r\n        super(props)\r\n        this.state = {\r\n          hoverMode: false,\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    render() {\r\n        let sort = SortModes[this.props.sortMode]\r\n      return (\r\n        <StyledWrapper>\r\n            \r\n            <ul>\r\n                {\r\n                    this.props.files.map( (file,key) => \r\n                        <li \r\n                            className={key === this.props.activeFileIndex ? 'active' : ''}\r\n                            key={key}\r\n                            onClick={(e) => { this.props.onFileClicked(key) }}\r\n                        > \r\n                            <span className='checkbox'>\r\n                                {\r\n                                    this.props.multiSelectMode &&\r\n                                    <input \r\n                                        type=\"checkbox\" \r\n                                        checked={this.props.multiSelectArray.includes(key)} \r\n                                        onChange={e => {\r\n                                            let arr = this.props.multiSelectArray\r\n                                            \r\n                                            if (!this.props.multiSelectArray.includes(key)) {\r\n                                                let maxVal = max(arr) || 0\r\n                                                console.log(1,  key, maxVal);\r\n                                                if (this.props.ctrlPressed) {\r\n                                                    if (isNumber(maxVal) && maxVal < key) { \r\n                                                        arr.push(...getAllNumbersBetween(maxVal, key))\r\n                                                        // console.log(2, getAllNumbersBetween(key, maxVal), key, maxVal);\r\n                                                    }\r\n                                                } \r\n                                                arr.push(key)\r\n                                            } else {\r\n                                                arr = removeFromNumberArray(arr, key)\r\n                                            }\r\n                                            this.props.onMultiSelectChange(arr)\r\n                                        }} \r\n                                    />\r\n                                }\r\n                            </span>\r\n                            <span \r\n                                className='label'\r\n                                onMouseEnter={(e) => { \r\n                                    this.props.hoverMode && this.props.onFileClicked(key) \r\n                                }}>\r\n                                    {file.name}\r\n                            </span> \r\n                            <span className={`date ${sort}`} >\r\n                                    {formatDateList(\r\n                                        new Date( \r\n                                            (sort === 'modified' ? file.modified : file.created)  || 0\r\n                                        )\r\n                                    )}\r\n                            </span> \r\n                        </li>    \r\n                    )\r\n                }\r\n            </ul>\r\n        </StyledWrapper>\r\n      );\r\n    }\r\n  }\r\n  \r\n  const StyledWrapper  = styled.div`\r\n    \r\n    \r\n  `","export const getAllNumbersBetween = (x:number, y:number):number[] => {\r\n    var numbers:number[] = [];\r\n    for (let i = x; i < y; i++) {\r\n        numbers.push(i)\r\n    }\r\n    return numbers;\r\n  }\r\n\r\nexport const removeFromNumberArray = (array: number[], value:number):number[] => {\r\n    const index = array.indexOf(value);\r\n    if (index > -1) {\r\n        array.splice(index, 1);\r\n    }   \r\n    return array\r\n}","import { iSocketEventsParams, socketEvents } from \"../../../shared/sockets/sockets.events\";\r\nimport { socketEventsManager } from \"./sockets/eventsListener.sockets\";\r\nimport { clientSocket } from \"./sockets/socket.manager\";\r\n\r\n\r\n  \r\n\r\n  export interface iUploadedFile {\r\n    name:string\r\n    path:string\r\n}\r\n\r\n\r\nvar siofu = require(\"socketio-file-upload\");\r\nexport const listenOnUploadSuccess = (cb:(file:iUploadedFile) => void):number => {\r\n  return socketEventsManager.on(socketEvents.getUploadedFile, \r\n    (data:iSocketEventsParams.getUploadedFile) => {  \r\n          cb(data)\r\n      }\r\n    )\r\n  }\r\n    \r\n  export const uploadFile = (file:any) => {\r\n    var instanceFile = new siofu(clientSocket);\r\n    instanceFile.submitFiles([file]);\r\n  }\r\n\r\n  export const uploadOnInputChange = (el:HTMLTextAreaElement) => {\r\n    var instance = new siofu(clientSocket);\r\n    instance.listenOnInput(el);\r\n  }\r\n\r\n  export const uploadOnDrop = (el:HTMLTextAreaElement, events: {\r\n    onDragStart:Function\r\n    onDragEnd:Function\r\n  }) => {\r\n    var instance = new siofu(clientSocket);\r\n    instance.listenOnDrop(el);\r\n\r\n    window.addEventListener('dragenter', function(e) {\r\n        events.onDragStart()\r\n    });\r\n    \r\n    el.addEventListener('dragleave', function(e) {\r\n        events.onDragEnd()\r\n    });\r\n    window.addEventListener('drop', function(e) {\r\n        events.onDragEnd()\r\n    });\r\n  }","import {sharedConfig} from '../../../shared/shared.config'\r\nimport { configClient } from '../config';\r\n\r\nexport const transformUrlInLinks = (bodyRaw: string):string => {\r\n    const regex =  /(https?:\\/\\/([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\%\\ \\#]*))/gm;\r\n    const codeOpenPopup = `onclick=\"window.open('$1','$1','width=600,height=600');\"`\r\n    const subst = `<a href=\"#\" ${codeOpenPopup}>$2</a>`;\r\n    return bodyRaw.replace(regex, subst);\r\n}\r\n\r\nexport const transformExtrawurstLinks = (bodyRaw: string):string => {\r\n    const regex = /\\[search\\|([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\#]*)([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\ \\\\\\?\\=\\&\\#]*)\\]/gm;\r\n    const subst = `<a class=\"extrawurst-link\" href=\"javascript:window.ewTriggerSearch('$1$2');\">[$1]</a>`;\r\n    let body =  bodyRaw.replace(regex, subst); \r\n    body = body.replaceAll('>[__id_', '>[');\r\n    body = body.replaceAll('>[__tags_', '>[');\r\n    body = body.replaceAll('>[__tag_', '>[');\r\n    body = body.replaceAll(' ]</a>', ']</a>');\r\n    return body\r\n}\r\n\r\n//  @TODO\r\n// add folderPath that ./.resources/image.jpg becomes localhost:8082/dir1/dir2/dir3/.resources/image.jpg\r\nexport const transformRessourcesInHTML = (currentFolderPath:string, bodyRaw: string ):string => {\r\n    const regex = /(\\!\\[([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\ \\#]*)\\]\\(([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\ \\#]*)\\))/gm;\r\n    const ressLink = `http://${configClient.global.staticUrl}:${sharedConfig.staticServerPort}/${currentFolderPath}/$3`\r\n    const codeOpenPopup = `onclick=\"window.open('${ressLink}','popupdl','width=200,height=200');\"`\r\n    const subst = `<a href=\"#\" ${codeOpenPopup}>$2</a>`;\r\n    // const subst = `<a href=\"${ressLink}\" download=\"$2\">$2</a>`;\r\n    return bodyRaw.replace(regex, subst);\r\n}\r\nexport const transformImagesInHTML = (currentFolderPath:string, bodyRaw: string ):string => {\r\n    const regex = /(\\!\\[([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\ \\#]*)\\]\\(([A-Za-z0-9\\/\\:\\.\\_\\-\\/\\\\\\?\\=\\&\\ \\#]*\\.(jpg|jpeg|png|gif))\\))/gm;\r\n    const subst = `<img class=\"content-image\" src=\"http://${configClient.global.staticUrl}:${sharedConfig.staticServerPort}/${currentFolderPath}/$3\"  />`;\r\n    return bodyRaw.replace(regex, subst);\r\n}\r\n\r\n// console.log(transformImagesInHTML(txt));","export const isMobile = ():boolean => {\r\n    let check = false;\r\n    //@ts-ignore\r\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n    return check;\r\n  };\r\n\r\nexport type DeviceType = 'desktop'|'tablet'|'mobile'\r\nexport type MobileView = 'navigator'|'editor'|'preview'\r\n\r\nexport const deviceType = ():DeviceType => {\r\n    let deviceWidth = window.innerWidth\r\n    // console.log(deviceWidth);\r\n    \r\n    let res:DeviceType = 'desktop'\r\n    if (deviceWidth < 1100) res = 'tablet'\r\n    if (deviceWidth < 500) res = 'mobile'\r\n    return res\r\n}","import { Global, css } from '@emotion/react'\r\nimport styled from '@emotion/styled';\r\nimport { deviceType, MobileView, DeviceType } from './device.manager';\r\n\r\nlet d = deviceType()\r\n// let v = 'editor'\r\n\r\nexport const styleApp = {\r\n    inputText: `\r\n        border: none;\r\n        background: #eaeaea;\r\n        padding: 10px 2vw;\r\n        margin: 10px ; \r\n    `,\r\n    colors: {\r\n        bg: {\r\n            dark: 'rgb(39, 39, 39)' ,\r\n            grey: 'rgb(221, 221, 221)',\r\n            light: '#fceeded6'\r\n        }\r\n    }\r\n}\r\n\r\nexport const GlobalCssApp = css`\r\n  body {\r\n    margin: 0;\r\n    padding: 0px;\r\n    height: 100vh;\r\n    overflow: hidden;\r\n    background: ${styleApp.colors.bg.light};\r\n    font-size: 11px;\r\n    font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;\r\n  }\r\n  html, body {\r\n    overflow: hidden;\r\n    heigth: 100vh;\r\n  }\r\n  body {\r\n    position: relative;\r\n  }\r\n`\r\n\r\nexport const CssApp = styled.div<{v:MobileView }>`\r\n\r\ndisplay: flex;\r\nflex-wrap: wrap;\r\njustify-content:center;\r\n\r\n\r\n.content-image {\r\n    /* max-width: 300px; */\r\n    width: 90%;\r\n  }\r\n.full {\r\n  .content-image {\r\n    /* max-width: 10000px; */\r\n  }\r\n}\r\n\r\n.main-wrapper {\r\n  display: flex;\r\n\r\n\r\n  .mobile-view-toggler {\r\n      position: fixed;\r\n      bottom: 0px;\r\n      left: 0px;\r\n      z-index: 10;\r\n      button {\r\n        width: 33vw;\r\n        padding: 10px;\r\n      }\r\n  }\r\n\r\n  .connection-status {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    right: 5px;\r\n    font-size: 9px;\r\n    z-index: 11;\r\n    .disconnected{\r\n      color:red;\r\n    }\r\n    .connected {\r\n      color: green;\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////////v \r\n  // LEFT\r\n  ////////////////////////////////////////////v\r\n  .left-wrapper {\r\n    background: ${styleApp.colors.bg.grey}; \r\n    width: ${d === 'desktop' ? '40' : (props => props.v !== 'navigator' ? 0 : 100)}vw;\r\n    display: ${d === 'desktop' ? 'flex' : (props => props.v !== 'navigator' ? 'none' : 'flex')};\r\n    .left-wrapper-1 {\r\n      background: ${styleApp.colors.bg.dark}; \r\n      color: white;\r\n      width: 40%;\r\n      padding-left: ${d === 'desktop' ? '90' : '10'}px;\r\n      height:100vh;\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n      position: relative;\r\n\r\n      \r\n    }\r\n    .left-wrapper-2 {\r\n      width: 60%;\r\n      height:100vh;\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n    }\r\n\r\n    .list-toolbar {\r\n      padding: 0px 10px;\r\n      position: relative;\r\n      button {\r\n        margin-right: 5px; \r\n      }\r\n\r\n      .items-list-count {\r\n        position: absolute;\r\n        color: grey;\r\n        font-size: 10px;\r\n        right: 10px;\r\n        top: 5px;\r\n      }\r\n    }\r\n\r\n    .list-wrapper {\r\n      ul {\r\n          list-style: none;\r\n          padding: 0px 0px 0px 0px;\r\n          li {\r\n              padding: 5px 15px;\r\n              display: block;\r\n              border-bottom: 1px rgba(0,0,0,0.1) solid;\r\n              color: blue;\r\n              cursor: pointer;\r\n              position: relative;\r\n              &.active {\r\n                text-decoration: underline;\r\n                  font-weight: 800;\r\n                  background: #ddddff;\r\n              }\r\n              .checkbox {\r\n\r\n              }\r\n              .label {\r\n                display: inline-block;\r\n                width: 90%;\r\n              }\r\n              .date {\r\n                position: absolute;\r\n                color: #a8a6a6;\r\n                font-size: 9px;\r\n                right: 5px;\r\n                top: 6px;\r\n                &.modified {\r\n                  color: green;\r\n                }\r\n              }\r\n          }\r\n      }\r\n    }\r\n    .search-input {\r\n        input {\r\n         ${styleApp.inputText}\r\n        }\r\n    }\r\n    .search-status {\r\n      text-align: center;\r\n      font-size: 8px;\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////////v \r\n  // RIGHT\r\n  ////////////////////////////////////////////v \r\n  .right-wrapper {\r\n      width: ${d === 'desktop' ? '70' : (props => props.v !== 'navigator' ? 100 : 0)}vw;\r\n      display: ${d === 'desktop' ? 'block' : (props => props.v !== 'navigator' ? 'block' : 'none')};\r\n      /* padding: 10px; */\r\n      padding-top: 0px;\r\n      /* max-height: 100vh;\r\n      overflow-y: auto; */\r\n    .note-wrapper {\r\n      .editor {\r\n        display: ${d === 'desktop' ? 'flex' : 'block'};\r\n        .dragzone {\r\n          &.hidden {\r\n            display:none;\r\n          }\r\n          display:block;\r\n          position: absolute;\r\n          top: 0px;\r\n          left: 0px;\r\n          width: 100vw;\r\n          height: 100vh;\r\n          z-index: 10;\r\n          background: rgba(255,255,255,0.4);\r\n        }\r\n        .editor-area {\r\n          &.inactive {\r\n            display: none;\r\n          }\r\n          width: ${d === 'desktop' ? '50%' : (props => props.v === 'editor' ? '100vw' : '0vw')};\r\n          display: ${d === 'desktop' ? 'block' : (props => props.v === 'editor' ? 'block' : 'none')};\r\n          .monaco-editor {\r\n            margin: 0px;\r\n          }\r\n          .textarea-editor {\r\n            border: none;\r\n            width: 96vw;\r\n            height: 70vh;\r\n            margin: 0px;\r\n            padding: 2vw;\r\n            background: rgba(255,255,255,0.7);\r\n          }\r\n      }\r\n        .preview-area {\r\n          .extrawurst-link {\r\n            font-weight: 800;\r\n            color: rgb(38 183 2);\r\n          }\r\n          &.full {\r\n            width: 100%;\r\n            pre {\r\n              code {\r\n                width: 90%;\r\n              }\r\n            }\r\n          }\r\n          width: ${d === 'desktop' ? '43' : (props => props.v === 'editor' ? '0' : '100')}%;\r\n          /* display: ${d === 'desktop' ? 'block' : 'none'}; */\r\n          display: ${d === 'desktop' ? 'block' : (props => props.v === 'editor' ? 'none' : 'block')};\r\n          padding: 30px 30px 30px 10px;\r\n          height: ${d === 'desktop' ? '100vh':'80vh'};\r\n          margin-bottom: 100px;\r\n          overflow: hidden;\r\n          overflow-y: scroll;\r\n\r\n          .preview-content {\r\n            margin-bottom:100px;\r\n          }\r\n          pre {\r\n            code {\r\n              display: block;\r\n              background: #434242;\r\n              border-radius: 8px;\r\n              color: rgb(243 232 223);\r\n              padding: 10px;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n      .toolbar-wrapper {\r\n        ${\r\n          d === 'desktop' ?\r\n          `position: absolute;\r\n          left: 70%;\r\n          width: 30%;`\r\n          : `\r\n          position: relative;\r\n          `\r\n        }\r\n        padding: 10px 0px 10px 0px;\r\n        \r\n        .upload-button-wrapper {\r\n          position: relative;  \r\n          .input-file-hidden {\r\n            width: 0.1px;\r\n            height: 0.1px;\r\n            opacity: 0;\r\n            overflow: hidden;\r\n            position: absolute;\r\n            z-index: -1;\r\n          }\r\n        }\r\n\r\n\r\n        button {\r\n          margin-right: 5px;\r\n          &.delete {\r\n            /* background: red; */\r\n            position:absolute;\r\n            right: 10px;\r\n          }\r\n        }\r\n      }\r\n    \r\n      \r\n      .title-input-wrapper {\r\n          input {\r\n            border: none;\r\n            background: #eaeaea;\r\n            padding: 10px 1vw;\r\n            margin: 10px 1vw; \r\n            width: ${d === 'desktop' ? '80%' :'96vw'};\r\n          }\r\n        }\r\n      h3 {\r\n        margin-bottom: 0px;\r\n      }\r\n      .date {\r\n        font-size: 10px;\r\n        color: grey;\r\n      }\r\n      pre {\r\n        white-space: -moz-pre-wrap; /* Mozilla, supported since 1999 */\r\n        white-space: -pre-wrap; /* Opera */\r\n        white-space: -o-pre-wrap; /* Opera */\r\n        white-space: pre-wrap; /* CSS3 - Text module (Candidate Recommendation) http://www.w3.org/TR/css3-text/#white-space */\r\n        word-wrap: break-word; /* IE 5.5+ */\r\n      }\r\n    }\r\n  }\r\n}\r\n`\r\n\r\n\r\n","import React from 'react';\r\nimport MonacoEditor from 'react-monaco-editor';\r\nimport { styleApp } from '../managers/style.manager';\r\nimport styled from '@emotion/styled'\r\nimport { initVimMode } from 'monaco-vim';\r\nimport { LineTextInfos } from '../managers/textEditor.manager';\r\n\r\nexport class MonacoEditorWrapper extends React.Component<{\r\n  value:string,\r\n  vimMode:boolean,\r\n  insertUnderCaret:string\r\n  posY:number\r\n  onChange:(text:string)=>void\r\n  onEditorAvailable:(monacoEditor:MonacoEditorWrapper)=>void\r\n},{}> {\r\n  reactComp:any\r\n  vimStatusBar:any\r\n  constructor(props:any) {\r\n    super(props);\r\n    this.reactComp = React.createRef()\r\n    this.vimStatusBar = React.createRef()\r\n  }\r\n\r\n  editor:any\r\n  monaco:any\r\n  editorDidMount = (editor:any, monaco:any) => {\r\n    // console.log('didmount', editor, monaco);\r\n    if (this.props.vimMode) {\r\n      console.log('[MONACO EDITOR] vim mode started', this.vimStatusBar.current);\r\n      initVimMode(editor, this.vimStatusBar.current)\r\n    }\r\n    this.editor = editor\r\n    this.monaco = monaco\r\n    // console.log(this.monaco.Position);\r\n    // this.editor.modifyPosition\r\n    // setTimeout(() => {\r\n      \r\n    //   // var model = this.editor.getModel();\r\n    //   // console.log(222,model,editor.getPosition());\r\n    //   // model.modifyPosition(editor.getPosition(), -100);\r\n    //   this.editor.setScrollPosition({scrollTop: 300});\r\n\r\n    // })\r\n    \r\n    monaco.editor.defineTheme('customLightTheme', {\r\n      base: 'vs',\r\n      inherit: true,\r\n      rules: [{ background: 'EDF9FA' }],\r\n      colors: {\r\n          'editor.foreground': '#000000',\r\n          'editor.background': styleApp.colors.bg.light,\r\n      }\r\n    });\r\n\r\n    //@ts-ignore\r\n    window.monacoEditor = monaco.editor\r\n\r\n    monaco.editor.setTheme('customLightTheme');\r\n    this.props.onEditorAvailable(this)\r\n\r\n    setTimeout(() => {\r\n    //   var position = this.editor.getPosition();\r\n    // var text = this.editor.getValue(position);\r\n    // var splitedText=text.split(\"\\n\");\r\n    // var line = splitedText[position.lineNumber-1];\r\n    // console.log({line,position:position.lineNumber,text});\r\n    //   splitedText[position.lineNumber-1]= 'a' + line\r\n    // this.editor.setValue(splitedText.join(\"\\n\"));\r\n    // this.editor.setPosition(position);\r\n    // this.editor.setValue('')\r\n    },3000)\r\n    // monaco.editor.mouseWheelScrollSensitivity = 0.1\r\n  }\r\n\r\n\r\n  //\r\n  // LINE MANAGER\r\n  //\r\n  getCurrentLineInfos = ():LineTextInfos => {\r\n    var text = this.editor.getValue(position);\r\n    var position = this.editor.getPosition();\r\n    var splitedText=text.split(\"\\n\");\r\n    return {\r\n      monacoPosition: this.editor.getPosition(),\r\n      lines:splitedText,\r\n      activeLine: splitedText[position.lineNumber-1],\r\n      lineIndex: position.lineNumber-1\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate ( nextProps: any,  nextState: any, nextContext: any) { \r\n    \r\n    if (this.props.posY !== nextProps.posY) {\r\n        console.log(this.props.posY);\r\n         this.editor.setScrollPosition({scrollTop: this.props.posY});\r\n    }\r\n  \r\n    if (this.props.insertUnderCaret !== nextProps.insertUnderCaret && nextProps.insertUnderCaret !== '') {\r\n      console.log(`[MONACO EDITOR] insert under Caret ${nextProps.insertUnderCaret}`);\r\n      this.editor.trigger('keyboard', 'type', {text: nextProps.insertUnderCaret});\r\n    }\r\n    return true\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <StyledWrapper>\r\n        \r\n          <div \r\n            className={`vim-status-bar ${this.props.vimMode ? `active` : ``}`} \r\n            ref={this.vimStatusBar}>\r\n          </div>\r\n          <MonacoEditor\r\n            ref={this.reactComp}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            language=\"markdown\"\r\n            theme=\"vs\"\r\n            value={this.props.value}\r\n            options={{\r\n              automaticLayout: true,\r\n              selectOnLineNumbers: true,\r\n              minimap: {enabled: false},\r\n              wordWrap: 'on',\r\n              fontSize: 11,\r\n              scrollbar: {\r\n                handleMouseWheel: false\r\n              }\r\n            }}\r\n            editorDidMount={this.editorDidMount}\r\n            onChange={(text) => {\r\n              this.props.onChange(text)\r\n            }}\r\n            // editorDidMount={this.reactCompDidMount}\r\n          />\r\n      </StyledWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nconst StyledWrapper  = styled.div`\r\n    height: 100vh;\r\n    .scroll-wrapper {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .vim-status-bar {\r\n      &.active {\r\n        display: block\r\n      }\r\n      display: none;\r\n      position: fixed;\r\n      bottom: 0px;\r\n      height: 18px;\r\n      padding: 5px 5px 7px 5px;\r\n      width: 80%;\r\n      z-index: 1;\r\n      background: rgba(255,255,255,0.9);\r\n      input {\r\n        background: #eeeeee;\r\n        border: none;\r\n        margin: 0px 5px;\r\n      }\r\n    }\r\n`","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport * as fa from '@fortawesome/free-solid-svg-icons'\r\nimport React from 'react'; \r\n\r\n// fa.faCheckDouble\r\n\r\nexport class Icon extends React.Component<{\r\n    name: string\r\n}, {}> {\r\n    render() {\r\n      return (\r\n        <FontAwesomeIcon icon={fa[this.props.name]} />\r\n      );\r\n    }\r\n  } ","\r\nlet alreadyListening = false\r\nexport const initClipboardListener = (events: {\r\n    onImagePasted: (Blob:any) => void\r\n}) => {\r\n    const retrieveImageFromClipboardAsBlob = (pasteEvent, callback) => {\r\n        if(pasteEvent.clipboardData == false){\r\n            if(typeof(callback) == \"function\"){\r\n                callback(undefined);\r\n            }\r\n        };\r\n    \r\n        var items = pasteEvent.clipboardData.items;\r\n        console.log(pasteEvent, items, items.length);\r\n        \r\n    \r\n        if(items == undefined){\r\n            if(typeof(callback) == \"function\"){\r\n                callback(undefined);\r\n            }\r\n        };\r\n    \r\n        for (var i = 0; i < items.length; i++) {\r\n            // Skip content if not image\r\n            // console.log(i,items[i].type);\r\n            \r\n            if (items[i].type.indexOf(\"image\") == -1) continue;\r\n            // Retrieve image on clipboard as blob\r\n            var blob = items[i].getAsFile();\r\n    \r\n            if(typeof(callback) == \"function\"){\r\n                callback(blob);\r\n            }\r\n        }\r\n    }\r\n    \r\n    if (alreadyListening) return\r\n    alreadyListening = true\r\n    \r\n    window.addEventListener(\"paste\", function(e){\r\n        retrieveImageFromClipboardAsBlob(e, function(imageBlob){\r\n            if(imageBlob){\r\n                events.onImagePasted(imageBlob)\r\n            }\r\n        });\r\n    }, false);\r\n}","import cryptico from 'cryptico'\r\n\r\nconst password:{value:string|null} = {value: null}\r\n\r\ninterface encryptionAnswer {status: string, cipher?:string, plaintext?:string}\r\n\r\nvar Bits = 1024; \r\nexport const encryptText = (text:string, password:string):encryptionAnswer => {\r\n    var privateKey = cryptico.generateRSAKey(password, Bits);\r\n    var publicKey = cryptico.publicKeyString(privateKey); \r\n    let results = cryptico.encrypt(text, publicKey) as encryptionAnswer\r\n    // if (results.cipher) return results.cipher\r\n    // console.error('[ENCRYPT TEXT] failed to encrypt text, return original text', results)\r\n    return results\r\n}\r\n\r\nexport const decryptText = (text:string, password:string):encryptionAnswer => {\r\n    var privateKey = cryptico.generateRSAKey(password, Bits);\r\n    let results = cryptico.decrypt(text, privateKey) as encryptionAnswer;\r\n    // if (results.plaintext) return results.plaintext\r\n    // console.error('[DECRYPT TEXT] failed to decrypt text, return original text', results)\r\n    return results\r\n}","import React from 'react'\r\nimport styled from '@emotion/styled'\r\n\r\n/**\r\n * Generic popup system\r\n */\r\nexport class Popup extends React.Component\r\n    <{\r\n        onClose:Function, \r\n        title:string,\r\n    }, {\r\n        \r\n    }> {\r\n\r\n    render() {\r\n      return (\r\n        <>\r\n            <OverlayClickPopup onClick={e => {this.props.onClose()}}></OverlayClickPopup>\r\n            {/* <OverlayClickPopup onClick={e => {}}></OverlayClickPopup> */}\r\n            <PopupWrapper>\r\n                <div className=\"popupTitle\"> {this.props.title}</div>\r\n                <div className=\"popupContent\">{this.props.children}</div>\r\n            </PopupWrapper>\r\n        </>\r\n      )\r\n    }\r\n}\r\n\r\nconst PopupWrapper = styled.div`\r\n    position: absolute;\r\n    z-index:1001;\r\n    left: 50%;\r\n    top:50%;\r\n    width : auto;\r\n    font-family: sans-serif;\r\n    transform:translate(-50%,-50%);\r\n    background: white;\r\n    .popupTitle {\r\n        margin: 0px 0px 20px 0px;\r\n        text-align: left;\r\n        background: grey;\r\n        color: white;\r\n        font-size: 14px;\r\n        padding: 5px 0px 5px 20px;\r\n    }\r\n    .popupContent {\r\n        padding: 0px 20px 20px 20px;\r\n        min-width : 350px;\r\n    }\r\n    img{\r\n        padding: 0px 5px 0px 0px;\r\n        margin: 5px 5px 0px 0px;\r\n    }\r\n`\r\nconst OverlayClickPopup  = styled.div`\r\n    position: absolute;\r\n    z-index:1000;\r\n    top: 0px;\r\n    left: 0px;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: rgba(0,0,0,0.1);\r\n`\r\n  ","import React from 'react';\r\nimport styled from '@emotion/styled'\r\nimport { Popup } from './Popup.component';\r\n\r\nexport class PasswordPopup extends React.Component<{\r\n    onSubmit: (password:string) => void\r\n    onClose:Function\r\n}, {\r\n    password: string\r\n}> {\r\n\r\n    passwordInput:any\r\n    constructor(props:any) {\r\n        super(props)\r\n        this.passwordInput = React.createRef()\r\n        this.state = {\r\n          password: '',\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.passwordInput.current.focus()\r\n    }\r\n    \r\n    render() {\r\n      return (\r\n        <StyledWrapper>\r\n            <Popup\r\n                title=\"please enter your password\"\r\n                onClose={() => {this.props.onClose()}}\r\n            >\r\n                <div>\r\n                    <input \r\n                        ref={this.passwordInput}\r\n                        type=\"password\" \r\n                        value={this.state.password} \r\n                        onChange={(e) => {\r\n                            this.setState({password: e.target.value})\r\n                        } } />\r\n                    <input type=\"button\" value='submit' onClick={e => {\r\n                        this.props.onSubmit(this.state.password)\r\n                    }}/>\r\n                </div>\r\n            </Popup>\r\n        </StyledWrapper>\r\n      );\r\n    }\r\n  }\r\n  \r\n  const StyledWrapper  = styled.div`\r\n    \r\n    \r\n  `","import React from 'react';\r\nimport styled from '@emotion/styled'\r\n\r\nexport type EditorToolbarAction = '->'|'<-'|'addTodo'|'toggleTodo'\r\n\r\nexport class EditorMobileToolbar extends React.Component<{\r\n    onButtonClicked: (action:EditorToolbarAction)=>void\r\n}, {\r\n}> {\r\n\r\n    constructor(props:any) {\r\n        super(props)\r\n        this.state = {\r\n        }\r\n    }\r\n    \r\n    render() {\r\n      return (\r\n        <StyledWrapper>\r\n            <ul className='editor-toolbar'>\r\n                <li><button onClick={e => {this.props.onButtonClicked('<-')}}> {'<-'} </button></li>\r\n                <li><button onClick={e => {this.props.onButtonClicked('->')}}> {'->'} </button></li>\r\n                <li><button onClick={e => {this.props.onButtonClicked('addTodo')}}> addTodo </button></li>\r\n                <li><button onClick={e => {this.props.onButtonClicked('toggleTodo')}}> toggleTodo </button></li>\r\n            </ul>\r\n        </StyledWrapper>\r\n      );\r\n    }\r\n  }\r\n  \r\n  const StyledWrapper  = styled.div`\r\n    ul.editor-toolbar {\r\n        display: flex;\r\n        position: fixed;\r\n        bottom: 40px;\r\n        list-style: none;\r\n        li {\r\n\r\n        }\r\n    }\r\n    \r\n  `","import React from 'react';\r\nimport styled from '@emotion/styled'\r\nimport { iFile } from '../../../shared/types.shared';\r\nimport { debounce, throttle } from 'lodash';\r\nimport { listenOnUploadSuccess, uploadFile, uploadOnDrop, uploadOnInputChange } from '../managers/upload.manager';\r\nimport { transformExtrawurstLinks, transformImagesInHTML, transformRessourcesInHTML, transformUrlInLinks } from '../managers/textProcessor.manager';\r\nimport { MonacoEditorWrapper } from './MonacoEditor.Component';\r\nimport { clientSocket } from '../managers/sockets/socket.manager';\r\nimport { iSocketEventsParams, socketEvents } from '../../../shared/sockets/sockets.events';\r\nimport { formatDateEditor } from '../managers/date.manager';\r\nimport { Icon } from './Icon.component';\r\nimport { textToId } from '../managers/string.manager';\r\nimport { initClipboardListener } from '../managers/clipboard.manager';\r\nimport { socketEventsManager } from '../managers/sockets/eventsListener.sockets';\r\nimport { deviceType } from '../managers/device.manager';\r\nimport { decryptText, encryptText } from '../managers/encryption.manager';\r\nimport { PasswordPopup } from './PasswordPopup.component';\r\nimport { getCurrentLineInfos, insertAtCaret, LineTextInfos } from '../managers/textEditor.manager';\r\nimport { EditorMobileToolbar, EditorToolbarAction } from './EditorToolbar.component';\r\nconst marked = require('marked');\r\n\r\ninterface Props {\r\n  file:iFile\r\n  fileContent:string\r\n  onFileEdited: (filepath:string, content:string) => void\r\n  onFilePathEdited: (initPath:string, endPath:string) => void\r\n  onSavingHistoryFile: (filepath:string, content:string, historyFileType: string) => void\r\n  onFileDelete: (filepath:string) => void\r\n  onEditorDetached: (filepath:string) => void\r\n}\r\ninterface State {\r\n  editorEnabled: boolean\r\n  fileContent: string\r\n  dragzoneEnabled: boolean\r\n  shouldSaveOnLeave: boolean\r\n  filePath: string\r\n  insertUnderCaret: string\r\n  vimMode: boolean\r\n  reloadEditor: boolean\r\n  posY:number\r\n  password:string|null\r\n  askForPassword: string|null\r\n  monacoEditor:MonacoEditorWrapper|null\r\n}\r\n\r\n\r\nexport class Editor extends React.Component<Props, State> {\r\n\r\n    textareaMobile:any\r\n    dragzone:any\r\n    uploadInput:any\r\n    previewContentWrapper:any\r\n    previewContent:any\r\n    constructor(props:any) {\r\n        super(props)\r\n        this.state = {\r\n          editorEnabled: true,\r\n          fileContent: '',\r\n          shouldSaveOnLeave: false,\r\n          dragzoneEnabled: false,\r\n          vimMode: false,\r\n          filePath: '',\r\n          insertUnderCaret: '',\r\n          reloadEditor: false,\r\n          posY: 0,\r\n          askForPassword: null,\r\n          password: null,\r\n          monacoEditor: null\r\n        }\r\n        this.textareaMobile = React.createRef()\r\n        this.dragzone = React.createRef()\r\n        this.uploadInput = React.createRef()\r\n        this.previewContentWrapper = React.createRef()\r\n        this.previewContent = React.createRef()\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    //\r\n    // LIFECYCLES\r\n    // \r\n\r\n    keyUploadSocketListener:number = -1\r\n    componentDidMount() {\r\n      console.log('[EDITOR] MOUNTED');\r\n      console.log(this.textareaMobile.current);\r\n\r\n      //@ts-ignore\r\n      // window.txt = \r\n      \r\n      this.restartAutomaticHistorySave()\r\n\r\n      this.startLinesInfosInterval()\r\n      \r\n      this.keyUploadSocketListener = listenOnUploadSuccess((file) => {\r\n        let imageInMd = `![${file.name}](${file.path})\\n\\n`\r\n        this.setState({insertUnderCaret: imageInMd})\r\n\r\n        let textAreaEl = this.textareaMobile.current\r\n        if (textAreaEl) {\r\n          insertAtCaret(textAreaEl, imageInMd)\r\n          this.triggerContentSaveLogic(textAreaEl.value)\r\n        }\r\n      })\r\n\r\n      initClipboardListener({\r\n        onImagePasted: (imageBlob) => {\r\n          uploadFile(imageBlob)\r\n        }\r\n      })\r\n\r\n      uploadOnInputChange(this.uploadInput.current)\r\n\r\n      uploadOnDrop(this.dragzone.current, {\r\n        onDragEnd: () => {this.setState({dragzoneEnabled: false})},\r\n        onDragStart: () => { this.setState({dragzoneEnabled: true})\r\n          clientSocket.emit(socketEvents.uploadResourcesInfos, \r\n            {folderpath: this.props.file.folder} as iSocketEventsParams.uploadResourcesInfos) \r\n        },\r\n      })\r\n    }\r\n\r\n    shouldComponentUpdate ( nextProps: any,  nextState: any, nextContext: any) { \r\n      if (this.props.file !== nextProps.file) {\r\n        this.onNoteLeaveLogic()\r\n        \r\n        this.setState({shouldSaveOnLeave: false, password: null})\r\n\r\n        console.log('[EDITOR] ON CHANGING DOCUMENT');\r\n        clientSocket.emit(socketEvents.uploadResourcesInfos, \r\n          {folderpath: this.props.file.folder} as iSocketEventsParams.uploadResourcesInfos) \r\n        this.restartAutomaticHistorySave()\r\n\r\n      }\r\n      return true\r\n    }\r\n\r\n    componentWillUnmount(){\r\n      console.log(`[EDITOR] will unmount ${this.keyUploadSocketListener}`);\r\n      this.onNoteLeaveLogic()\r\n      socketEventsManager.off(this.keyUploadSocketListener)\r\n      clearInterval(this.intervalReinitPassword)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //\r\n    // FUNCTIONS\r\n    //\r\n\r\n    onNoteLeaveLogic = () => {\r\n      if (this.state.shouldSaveOnLeave) {\r\n        console.log('[EDITOR] ON LEAVING AN EDITED DOCUMENT');\r\n        this.props.onFileEdited(this.props.file.path, this.state.fileContent)\r\n      } else {\r\n        console.log('[EDITOR] ON LEAVING AN UNEDITED DOCUMENT');\r\n      }\r\n\r\n      console.log('ON LEAVE', this.shouldEncryptOnLeave);\r\n      \r\n      if (this.shouldEncryptOnLeave && this.state.password) {\r\n        let res = encryptText(this.state.fileContent, this.state.password)\r\n        if (res.cipher) this.props.onFileEdited(this.props.file.path, res.cipher)\r\n        this.neutralizeDelayedFileSave = true\r\n        setTimeout(() => {this.neutralizeDelayedFileSave = false}, 1000)\r\n      }\r\n\r\n      this.shouldEncryptOnLeave = false\r\n      this.noHistoryBackup = false\r\n    }\r\n\r\n    triggerContentSaveLogic = (newContent:string) => {\r\n      this.setState({fileContent: newContent, shouldSaveOnLeave: true})\r\n      \r\n      if (!this.state.shouldSaveOnLeave && !this.noHistoryBackup) {\r\n        console.log('[EDITOR] ON NEW DOCUMENT EDITION');\r\n        this.props.onSavingHistoryFile(this.props.file.path, newContent, 'enter')\r\n      }\r\n      // let ct = newContent.substr(newContent.length-100, 100)\r\n      // console.log('[EDITOR] ON triggerContentSaveLogic', {ct});\r\n      \r\n      this.throttledOnFileEdited(this.props.file.path, newContent)\r\n      this.debouncedOnFileEdited(this.props.file.path, newContent)\r\n    }\r\n\r\n    historySaveInterval: any\r\n    historyContent: string = ''\r\n    restartAutomaticHistorySave = () => {\r\n      clearInterval(this.historySaveInterval)\r\n      let historySaveInMin = 10 \r\n      let historySaveIntTime = historySaveInMin * 60 * 1000 \r\n      \r\n      this.historySaveInterval = setInterval(() => {\r\n        if (this.noHistoryBackup) return\r\n        if (this.state.fileContent !== this.historyContent) {\r\n          this.historyContent = this.state.fileContent\r\n          console.log(`[EDITOR => HISTORY SAVE CRON] : content changed, saving history version ${this.props.file.path}`);\r\n          this.props.onSavingHistoryFile(this.props.file.path, this.state.fileContent, 'int')\r\n        } else {\r\n          console.log(`[EDITOR => HISTORY SAVE CRON] : content not changed, do nothing`);\r\n        }\r\n      }, historySaveIntTime )\r\n    }\r\n\r\n\r\n\r\n    neutralizeDelayedFileSave: boolean = false\r\n    throttledOnFileEdited = throttle((filePath:string, content:string) => {\r\n      if (this.neutralizeDelayedFileSave) return\r\n      this.props.onFileEdited(filePath, content)\r\n    }, 1000)\r\n    \r\n    debouncedOnFileEdited = debounce((filePath:string, content:string) => {\r\n      if (this.neutralizeDelayedFileSave) return\r\n      this.props.onFileEdited(filePath, content)\r\n    }, 1000)\r\n\r\n    submitOnEnter = (event:any) => {\r\n      if (event.key === 'Enter') {\r\n        if (this.state.filePath.length < 3) return\r\n        this.props.onFilePathEdited(this.props.file.path ,this.state.filePath)\r\n      }\r\n    }\r\n\r\n    editorScrollLogic = (e:any) => {\r\n      let direction = e.deltaY > 0 ? 1 : -1\r\n      let delta = direction * Math.min(Math.abs(e.deltaY),40)\r\n      let newY = this.state.posY + delta\r\n      let previewDivWrapper = this.previewContentWrapper.current \r\n      let previewDiv = this.previewContent.current \r\n      // console.log(previewDiv.offsetHeight, previewDiv.clientHeight);\r\n      let monacoHeight = this.state.monacoEditor ? this.state.monacoEditor.editor.getContentHeight() : 0\r\n      let maxHeight = Math.max(previewDiv.offsetHeight, monacoHeight)\r\n      \r\n      if (newY > -200 && newY < maxHeight) {\r\n        console.log(newY);\r\n        \r\n        this.setState({posY: newY})\r\n        previewDivWrapper.scrollTop = newY\r\n      }\r\n    }\r\n\r\n\r\n    // \r\n    // ENCRYPTION FUNCTIONS\r\n\r\n    intervalReinitPassword:any\r\n    startReinitPasswordInterval = () => {\r\n      clearInterval(this.intervalReinitPassword)\r\n      this.intervalReinitPassword = setInterval(() => {\r\n        if (!this.state.password) return \r\n        console.log('[PASSWORD REINIT] password exists, reinit to null');\r\n        this.setState({password:null})\r\n      }, 1000*60*10)\r\n    }\r\n\r\n    encryptContent = () => {\r\n      if (!this.state.password) return \r\n      let newContent = this.state.fileContent\r\n      let res = encryptText(newContent, this.state.password)\r\n      if (res.status === 'failure') this.setState({password: null})\r\n      else {\r\n        this.shouldEncryptOnLeave = false\r\n        let textEncrypted = res.cipher as string\r\n        this.setState({fileContent:textEncrypted})\r\n        this.triggerContentSaveLogic(textEncrypted)\r\n      }\r\n      \r\n    }\r\n\r\n    noHistoryBackup: boolean = false\r\n    shouldEncryptOnLeave: boolean = false\r\n    decryptContent = () => {\r\n      if (!this.state.password) return \r\n      let newContent = this.state.fileContent\r\n      let res = decryptText(newContent, this.state.password)\r\n      if (res.status === 'failure') {this.setState({password: null}); alert('wrong password')}\r\n      else {\r\n        this.noHistoryBackup = true\r\n        this.shouldEncryptOnLeave = true\r\n        let text = res.plaintext as string\r\n        this.setState({fileContent: res.plaintext as string})\r\n        this.triggerContentSaveLogic(text)\r\n      }\r\n    }\r\n\r\n    //\r\n    // TOOLBAR ACTIONS\r\n    //\r\n    currentCarretPos:any \r\n    getLineTextInfos = ():LineTextInfos => {\r\n      let res:LineTextInfos\r\n      \r\n      if (deviceType() === 'desktop' && this.state.monacoEditor) {\r\n        res = this.state.monacoEditor.getCurrentLineInfos()\r\n        this.currentCarretPos = res.monacoPosition\r\n      } else {\r\n        res = getCurrentLineInfos(this.textareaMobile.current)\r\n        this.currentCarretPos = res.textareaPosition\r\n        this.currentTop = this.textareaMobile.current.scrollTop\r\n      }\r\n      return res\r\n    }\r\n    \r\n    currentLineInfosInterval:any\r\n    currentLineInfos:any \r\n    currentTop:number = 0 \r\n    startLinesInfosInterval = () => {\r\n      // this.currentLineInfosInterval = setInterval(() => {\r\n      //   this.currentLineInfos = this.getLineTextInfos()\r\n      // }, 300) \r\n    }\r\n    \r\n    resetCarretPosition = (decal:number) => {\r\n        if (deviceType() === 'desktop' && this.state.monacoEditor) {\r\n          this.state.monacoEditor.editor.setPosition(this.currentCarretPos);\r\n        } else {\r\n          let textarea = this.textareaMobile.current\r\n          textarea.focus()\r\n          setTimeout(()=>{\r\n            textarea.selectionStart = this.currentCarretPos + decal\r\n            textarea.selectionEnd = this.currentCarretPos + decal\r\n            \r\n            // let infos = this.getLineTextInfos()\r\n            // let posYLine = infos.lineIndex / infos.lines.length\r\n            // let height = textarea.scrollHeight\r\n            // let posY = height * posYLine\r\n            // textarea.scrollTop = posY\r\n            textarea.scrollTop = this.currentTop\r\n            // setTimeout(()=>{\r\n            // }, 1000)\r\n          })\r\n        }\r\n    }\r\n\r\n\r\n    triggerEditorAction = (action: EditorToolbarAction) => {\r\n      // let infos:any = {}\r\n      \r\n      let infos = this.getLineTextInfos()\r\n      let lines = infos.lines\r\n      if (action === '->') {\r\n        // alert(infos.lineIndex + ' ' + infos.textareaPosition)\r\n        lines[infos.lineIndex] = '  ' + lines[infos.lineIndex]\r\n        this.resetCarretPosition(2)\r\n      }\r\n      if (action === '<-') {\r\n        if (infos.activeLine.startsWith('  ')){\r\n          lines[infos.lineIndex] = lines[infos.lineIndex].substr(2,lines[infos.lineIndex].length)\r\n          this.resetCarretPosition(-2)\r\n        } else {\r\n          this.resetCarretPosition(0)\r\n        }\r\n      }\r\n\r\n      let activeLineContent = infos.activeLine.trim()\r\n\r\n      if (action === 'addTodo') {\r\n        if (!activeLineContent.startsWith('- [ ]') && !activeLineContent.startsWith('- [x]')){\r\n          lines[infos.lineIndex] = lines[infos.lineIndex].replace(activeLineContent, '- [ ]' + activeLineContent.replace('-',''))\r\n          this.resetCarretPosition(4)\r\n        } else {\r\n          this.resetCarretPosition(0)\r\n        }\r\n      }\r\n      if (action === 'toggleTodo') {\r\n        if (activeLineContent.startsWith('- [ ]')){\r\n          lines[infos.lineIndex] = lines[infos.lineIndex].replace('[ ]', '[x]')\r\n        } else if (activeLineContent.startsWith('- [x]')){\r\n          lines[infos.lineIndex] = lines[infos.lineIndex].replace('[x]', '[ ]')\r\n        } \r\n        this.resetCarretPosition(0)\r\n      }\r\n\r\n      this.triggerContentSaveLogic(lines.join('\\n'))\r\n    }\r\n\r\n\r\n \r\n    oldContentProp: string = ''\r\n    render() {\r\n      // if (!this.props.file) return <div></div>\r\n      if (this.oldContentProp !== this.props.fileContent) {\r\n        this.setState({\r\n          fileContent: this.props.fileContent,\r\n          filePath: this.props.file.path\r\n        })\r\n        this.oldContentProp = this.props.fileContent\r\n      }\r\n      let currentFolderArr = this.props.file.path.split('/')\r\n      currentFolderArr.pop()\r\n      let currentFolder = currentFolderArr.join('/')\r\n      return (\r\n        <StyledWrapper>\r\n          <div \r\n            className=\"editor\"\r\n            onWheelCapture={this.editorScrollLogic}\r\n            >\r\n\r\n\r\n            \r\n            <div className={`dragzone ${this.state.dragzoneEnabled ? '' : 'hidden'}`} ref={this.dragzone} ></div>\r\n\r\n\r\n            <div className='toolbar-wrapper'>\r\n                <button \r\n                  type=\"button\" \r\n                  title='Editor'\r\n                  onClick={(e) => {this.setState({editorEnabled: !this.state.editorEnabled})}}\r\n                  ><Icon name=\"faEdit\" /></button>\r\n               \r\n                {/* <button \r\n                  type=\"button\" \r\n                  title={this.state.vimMode ? 'Vim:On' : 'Vim:off'}\r\n                  onClick={(e) => { \r\n                    this.setState({vimMode: !this.state.vimMode, reloadEditor: true})\r\n                    setTimeout(() => {\r\n                      this.setState({reloadEditor: false})\r\n                    }) \r\n                  }}\r\n                  ><Icon name=\"faCode\" /></button> */}\r\n                <button \r\n                  type=\"button\" \r\n                  title='Detach'\r\n                  onClick={(e) => { \r\n                    // this.props.onEditorDetached(this.props.file.path)\r\n                    window.open(window.location.href,'popupDetached','width=600,height=600');\r\n                  }}\r\n                  ><Icon name=\"faExternalLinkAlt\" /></button>\r\n                <button \r\n                  type=\"button\" \r\n                  title='insert-unique-id'\r\n                  onClick={(e) => { \r\n                    let newContent = this.state.fileContent\r\n                    let id = textToId(this.props.file.realname)\r\n                    let idtxt = `--id-${id}`\r\n                    let idSearch = `__id_${id}`\r\n                    let folder = `${this.props.file.folder}`\r\n                    newContent = `${idtxt}\\n\\n [search|${idSearch} ${folder}]\\n\\n` + newContent\r\n                    this.setState({fileContent: newContent})\r\n                    \r\n                  }}\r\n                  ><Icon name=\"faFingerprint\" /></button>\r\n                <button \r\n                  type=\"button\" \r\n                  title='encrypt'\r\n                  onClick={async (e) => { \r\n                    if (!this.state.password) this.setState({askForPassword: 'toEncrypt'})\r\n                    else this.encryptContent()\r\n                  }}\r\n                  ><Icon name=\"faLock\" /></button>\r\n                <button \r\n                  type=\"button\" \r\n                  title='decrypt'\r\n                  onClick={(e) => { \r\n                    if (!this.state.password) this.setState({askForPassword: 'toDecrypt'})\r\n                    else this.decryptContent()\r\n                  }}\r\n                  ><Icon name=\"faUnlock\" /></button>\r\n                  \r\n\r\n                <button \r\n                  type=\"button\" \r\n                  className='upload-button-wrapper'\r\n                  title='insert-unique-id'\r\n                  >\r\n                    <input className='input-file-hidden' id=\"file\" name=\"file\" type=\"file\" ref={this.uploadInput}  />\r\n                    <label \r\n                      //@ts-ignore \r\n                      for=\"file\"><Icon name=\"faPaperclip\" /></label>\r\n                  </button>\r\n                  \r\n\r\n                   <button \r\n                    className='delete'\r\n                    type=\"button\" \r\n                    title='Delete'\r\n                    onClick={(e) => { this.props.onFileDelete(this.props.file.path) }}\r\n                    ><Icon name=\"faTrash\" /></button>\r\n\r\n              </div>\r\n\r\n            {\r\n              /////////////////////////////\r\n              // EDITOR\r\n              /////////////////////////////\r\n            }\r\n            <div className={`editor-area ${this.state.editorEnabled ? 'active' : 'inactive'}`}>\r\n              <div className='title-input-wrapper'>\r\n                <input \r\n                      type=\"text\" \r\n                      value={this.state.filePath}\r\n                      onChange={(e) => {this.setState({filePath: e.target.value})}}\r\n                      onKeyDown={this.submitOnEnter}\r\n                  />\r\n              </div>\r\n              {\r\n                !this.state.reloadEditor && \r\n                deviceType() === 'desktop' && \r\n                <MonacoEditorWrapper\r\n                  value={this.state.fileContent}\r\n                  vimMode={this.state.vimMode}\r\n                  onChange={this.triggerContentSaveLogic}\r\n                  onEditorAvailable={(monacoEditor) => {\r\n                    this.setState({monacoEditor})\r\n                  }}\r\n                  posY={this.state.posY}\r\n                  insertUnderCaret={this.state.insertUnderCaret}\r\n                />\r\n              }\r\n              {\r\n                deviceType() !== 'desktop' && \r\n                <textarea\r\n                  className='textarea-editor'\r\n                  ref={this.textareaMobile}\r\n                  wrap=\"physical\"\r\n                  value={this.state.fileContent}\r\n                  onChange={e => {this.triggerContentSaveLogic(e.target.value); console.log('why u no trigger');\r\n                  }}\r\n                />\r\n              }\r\n            </div>\r\n\r\n\r\n\r\n\r\n            \r\n            <div \r\n              className={`preview-area ${this.state.editorEnabled ? 'half' : 'full'}`} \r\n              ref={this.previewContentWrapper}>\r\n              \r\n              \r\n\r\n              {\r\n                /////////////////////////////\r\n                // PREVIEW\r\n                /////////////////////////////\r\n              }\r\n              <h3>{this.props.file.name}</h3>\r\n              <br/>\r\n              <div className='date modified'>modified: {formatDateEditor(new Date(this.props.file.modified || 0))}</div>\r\n              <div className='date created'>created: {formatDateEditor(new Date(this.props.file.created || 0))}</div>\r\n              {\r\n                \r\n              }\r\n              <div \r\n                className='preview-content'\r\n                ref={this.previewContent}\r\n                dangerouslySetInnerHTML={{__html:\r\n                marked( \r\n                transformRessourcesInHTML(currentFolder ,\r\n                transformImagesInHTML (currentFolder ,\r\n                transformExtrawurstLinks (\r\n                transformUrlInLinks ( \r\n                  this.state.fileContent)))))}}></div>\r\n\r\n            </div>\r\n\r\n\r\n            {\r\n              /////////////////////////////\r\n              // TOOLBAR\r\n              /////////////////////////////\r\n            }\r\n\r\n            <EditorMobileToolbar\r\n              onButtonClicked={action => {\r\n                this.triggerEditorAction(action)\r\n              }}            \r\n            ></EditorMobileToolbar>\r\n\r\n            {\r\n                /////////////////////////////\r\n                // POPUPS\r\n                /////////////////////////////\r\n              }\r\n\r\n              {\r\n                this.state.askForPassword &&\r\n                  <PasswordPopup\r\n                    onClose={() => {this.setState({askForPassword: null})}}\r\n                    onSubmit={(password) => {\r\n                      let action = this.state.askForPassword\r\n                      this.setState({password, askForPassword: null})\r\n                      if (action === 'toEncrypt') setTimeout(()=> { this.encryptContent() },100)\r\n                      if (action === 'toDecrypt') setTimeout(()=> { \r\n                        this.decryptContent() \r\n                        \r\n                      },100)\r\n                      // this.startReinitPasswordInterval()\r\n                    }}\r\n                  ></PasswordPopup>\r\n              }\r\n\r\n          </div>\r\n        </StyledWrapper>\r\n      ); \r\n    }\r\n  }\r\n  \r\n  const StyledWrapper  = styled.div`\r\n    \r\n    \r\n  `","export const insertAtCaret =  (textarea:HTMLTextAreaElement, text:string) => {\r\n    text = text || '';\r\n   if (textarea.selectionStart || textarea.selectionStart === 0) {\r\n      // Others\r\n      var startPos = textarea.selectionStart;\r\n      var endPos = textarea.selectionEnd;\r\n      textarea.value = textarea.value.substring(0, startPos) +\r\n        text +\r\n        textarea.value.substring(endPos, textarea.value.length);\r\n      textarea.selectionStart = startPos + text.length;\r\n      textarea.selectionEnd = startPos + text.length;\r\n    } else {\r\n      textarea.value += text;\r\n    }\r\n  };\r\n\r\n  export interface LineTextInfos {\r\n    activeLine: string\r\n    lines: string[]\r\n    lineIndex: number\r\n    monacoPosition?: any\r\n    textareaPosition?: number\r\n  }\r\n\r\n  export const getLines = (rawtext:string):string[] => {\r\n    return rawtext.split(\"\\n\");\r\n  }\r\n\r\n  export const getCurrentLineInfos =  (textarea:HTMLTextAreaElement):LineTextInfos => {\r\n      // if (!textarea) return\r\n      let text = textarea.value\r\n      // var position = this.editor.getPosition();\r\n      var splitedText=text.split(\"\\n\");\r\n      let pos = textarea.selectionStart\r\n\r\n      let c = 0\r\n      let lineIndex = 0\r\n      while (c < pos) {\r\n        c += splitedText[lineIndex].length + 1\r\n        lineIndex++\r\n      }\r\n      lineIndex--\r\n\r\n      return {\r\n        textareaPosition: pos,\r\n        lines:splitedText,\r\n        activeLine: splitedText[lineIndex],\r\n        lineIndex\r\n      }\r\n  };\r\n\r\n\r\n","export const textToId = (raw:string):string => {\r\n    let res = raw\r\n    res = res.replaceAll('-','')\r\n    res = res.replaceAll('_','')\r\n    res = res.replaceAll(' ','')\r\n    res = res.replaceAll('/','')\r\n    res = res.replaceAll('.md','')\r\n    res = res.toLowerCase()\r\n    return res\r\n}","import React from 'react';\r\nimport styled from '@emotion/styled'\r\n\r\nexport class SearchBar extends React.Component<{\r\n    isSearching: boolean\r\n    isListEmpty: boolean\r\n    searchTerm: string\r\n    onSearchTermUpdate: (term:string) => void\r\n    onSearchSubmit: () => void\r\n}, {\r\n    // search: string\r\n}> {\r\n\r\n    constructor(props:any) {\r\n        super(props)\r\n        this.state = {\r\n            search:'',\r\n        }\r\n    }\r\n    submitOnEnter = (event:any) => {\r\n        if (event.key === 'Enter') {\r\n            console.log('do validate')\r\n            if (this.props.searchTerm.length < 3) return\r\n            this.props.onSearchSubmit()\r\n        }\r\n    }\r\n    render() {\r\n      return (\r\n        <>\r\n            <div className=\"search-input\">\r\n                <input \r\n                    type=\"text\" \r\n                    value={this.props.searchTerm}\r\n                    onKeyDown={this.submitOnEnter}\r\n                    onChange={(e) => {\r\n                        this.props.onSearchTermUpdate(e.target.value)\r\n                    }}\r\n                />\r\n                {/* <button onClick={(e) => {\r\n                    if (this.state.search.length < 3) return\r\n                    this.props.onSearchSubmit(this.state.search)\r\n                }}>submit</button> */}\r\n            </div>\r\n            <div className=\"search-status\">\r\n                {this.props.isSearching && 'searching...'}\r\n                {/* {this.props.isListEmpty && 'no result'} */}\r\n            </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n  \r\n  const StyledWrapper  = styled.div`\r\n    \r\n  `","import React from 'react';\r\nimport Tree from 'rc-tree';\r\nimport styled from '@emotion/styled'\r\nimport { iFolder } from '../../../shared/types.shared';\r\nimport { iconFolder } from '../managers/icons.manager';\r\n\r\nconst STYLE = `\r\n.rc-tree-child-tree {\r\n  display: block;\r\n}\r\n\r\n.node-motion {\r\n  transition: all .3s;\r\n  overflow-y: hidden;\r\n}\r\n`;\r\n\r\nconst motion = {\r\n  motionName: 'node-motion',\r\n  motionAppear: false,\r\n  onAppearStart: (node:any) => {\r\n    console.log('Start Motion:', node);\r\n    return { height: 0 };\r\n  },\r\n  onAppearActive: (node:any) => ({ height: node.scrollHeight }),\r\n  onLeaveStart: (node:any) => ({ height: node.offsetHeight }),\r\n  onLeaveActive: () => ({ height: 0 }),\r\n};\r\n\r\n\r\nconst LocalStorageMixin = require('react-localstorage');\r\nconst reactMixin = require('react-mixin');\r\n@reactMixin.decorate(LocalStorageMixin)\r\nexport class TreeView extends React.Component<{\r\n  folder: iFolder\r\n  selected: string\r\n  onFolderClicked: (folderPath:string) => void\r\n  onFolderRightClicked: (folderPath:string) => void\r\n},{\r\n  autoExpandParent: boolean\r\n  expandedKeys: string[]\r\n}> {\r\n\r\n  static displayName = 'treeview';\r\n  constructor(props:any) {\r\n    super(props)\r\n    this.state = {\r\n      autoExpandParent: true,\r\n      expandedKeys: []\r\n    }\r\n  }\r\n\r\n  onDragEnter = ({ expandedKeys }:any) => {\r\n    console.log('enter', expandedKeys);\r\n    this.setState({\r\n      expandedKeys,\r\n    });\r\n  };\r\n\r\n\r\n  onExpand = (expandedKeys:any) => {\r\n    console.log('onExpand', expandedKeys);\r\n    this.setState({\r\n      expandedKeys,\r\n      autoExpandParent: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { expandedKeys } = this.state;\r\n\r\n    return (\r\n        <StyledWrapper>\r\n        <div className=\"draggable-demo\">\r\n            <style dangerouslySetInnerHTML={{ __html: STYLE }} />\r\n            <Tree\r\n              expandedKeys={expandedKeys}\r\n              onExpand={this.onExpand}\r\n              selectedKeys={[this.props.selected]}\r\n              autoExpandParent={this.state.autoExpandParent}\r\n              draggable\r\n              //   onDragStart={this.onDragStart}\r\n              onDragEnter={this.onDragEnter}\r\n              onRightClick={(info) => { \r\n                // @ts-ignore\r\n                let path = info.node.path\r\n                if (!path) return \r\n                this.props.onFolderRightClicked(path)\r\n              }}\r\n              onSelect={(key, info) => { \r\n                this.props.onFolderClicked(info.node.key as string) \r\n              }}\r\n              treeData={[this.props.folder]}\r\n              motion={motion}\r\n            />\r\n        </div>\r\n        </StyledWrapper>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nconst StyledWrapper  = styled.div`\r\n.rc-tree {\r\n  margin: 0;\r\n  border: 1px solid transparent;\r\n}\r\n.rc-tree-focused:not(.rc-tree-active-focused) {\r\n  border-color: cyan;\r\n}\r\n.rc-tree .rc-tree-treenode {\r\n  margin: 0;\r\n  padding: 0;\r\n  line-height: 24px;\r\n  white-space: nowrap;\r\n  list-style: none;\r\n  outline: 0;\r\n}\r\n.rc-tree .rc-tree-treenode .draggable {\r\n  color: #dddddd;\r\n  -moz-user-select: none;\r\n  -khtml-user-select: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  /* Required to make elements draggable in old WebKit */\r\n  -khtml-user-drag: element;\r\n  -webkit-user-drag: element;\r\n}\r\n.rc-tree .rc-tree-treenode.drop-container > .draggable::after {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  box-shadow: inset 0 0 0 2px red;\r\n  content: \"\";\r\n}\r\n.rc-tree .rc-tree-treenode.drop-container ~ .rc-tree-treenode {\r\n  border-left: 2px solid chocolate;\r\n}\r\n.rc-tree .rc-tree-treenode.drop-target {\r\n  background-color: yellowgreen;\r\n}\r\n.rc-tree .rc-tree-treenode.drop-target ~ .rc-tree-treenode {\r\n  border-left: none;\r\n}\r\n.rc-tree .rc-tree-treenode.filter-node > .rc-tree-node-content-wrapper {\r\n  color: #a60000 !important;\r\n  font-weight: bold !important;\r\n}\r\n.rc-tree .rc-tree-treenode ul {\r\n  margin: 0;\r\n  padding: 0 0 0 18px;\r\n}\r\n.rc-tree .rc-tree-treenode .rc-tree-node-content-wrapper {\r\n  position: relative;\r\n  display: inline-block;\r\n  height: 24px;\r\n  margin: 0;\r\n  padding: 0;\r\n  text-decoration: none;\r\n  vertical-align: top;\r\n  cursor: pointer;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-switcher,\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox,\r\n.rc-tree .rc-tree-treenode span.rc-tree-iconEle {\r\n  display: inline-block;\r\n  width: 16px;\r\n  height: 16px;\r\n  margin-right: 2px;\r\n  line-height: 16px;\r\n  vertical-align: -0.125em;\r\n  background-color: transparent;\r\n  background-image: url('${iconFolder}');\r\n  background-repeat: no-repeat;\r\n  background-attachment: scroll;\r\n  border: 0 none;\r\n  outline: none;\r\n  cursor: pointer;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-switcher.rc-tree-icon__customize,\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox.rc-tree-icon__customize,\r\n.rc-tree .rc-tree-treenode span.rc-tree-iconEle.rc-tree-icon__customize {\r\n  background-image: none;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-icon_loading {\r\n  margin-right: 2px;\r\n  vertical-align: top;\r\n  background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7') no-repeat scroll 0 0 transparent;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-switcher.rc-tree-switcher-noop {\r\n  cursor: auto;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-switcher.rc-tree-switcher_open {\r\n  background-position: -93px -56px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-switcher.rc-tree-switcher_close {\r\n  background-position: -75px -56px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox {\r\n  width: 13px;\r\n  height: 13px;\r\n  margin: 0 3px;\r\n  background-position: 0 0;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox-checked {\r\n  background-position: -14px 0;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox-indeterminate {\r\n  background-position: -14px -28px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox-disabled {\r\n  background-position: 0 -56px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {\r\n  background-position: -14px -56px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {\r\n  position: relative;\r\n  background: #ccc;\r\n  border-radius: 3px;\r\n}\r\n.rc-tree .rc-tree-treenode span.rc-tree-checkbox.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled::after {\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 3px;\r\n  width: 5px;\r\n  height: 0;\r\n  border: 2px solid #fff;\r\n  border-top: 0;\r\n  border-left: 0;\r\n  -webkit-transform: scale(1);\r\n  transform: scale(1);\r\n  content: ' ';\r\n}\r\n.rc-tree:not(.rc-tree-show-line) .rc-tree-treenode .rc-tree-switcher-noop {\r\n  background: none;\r\n}\r\n.rc-tree.rc-tree-show-line .rc-tree-treenode:not(:last-child) > ul {\r\n  background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0 repeat-y;\r\n}\r\n.rc-tree.rc-tree-show-line .rc-tree-treenode:not(:last-child) > .rc-tree-switcher-noop {\r\n  background-position: -56px -18px;\r\n}\r\n.rc-tree.rc-tree-show-line .rc-tree-treenode:last-child > .rc-tree-switcher-noop {\r\n  background-position: -56px -36px;\r\n}\r\n.rc-tree-child-tree {\r\n  display: none;\r\n}\r\n.rc-tree-child-tree-open {\r\n  display: block;\r\n}\r\n.rc-tree-treenode-disabled > span:not(.rc-tree-switcher),\r\n.rc-tree-treenode-disabled > a,\r\n.rc-tree-treenode-disabled > a span {\r\n  color: #767676;\r\n  cursor: not-allowed;\r\n}\r\n.rc-tree-treenode-active {\r\n  background: rgba(0, 0, 0, 0.1);\r\n}\r\n.rc-tree-node-selected {\r\n  /* background-color: #ffe6b0; */\r\n  /* padding:  */\r\n  /* box-shadow: 0 0 0 1px #ffb951; */\r\n  opacity: 0.8;\r\n  background: rgba(255,255,255,0.2);\r\n}\r\n.rc-tree-icon__open {\r\n  margin-right: 2px;\r\n  vertical-align: top;\r\n  background-position: -110px -16px;\r\n}\r\n.rc-tree-icon__close {\r\n  margin-right: 2px;\r\n  vertical-align: top;\r\n  background-position: -110px 0;\r\n}\r\n.rc-tree-icon__docu {\r\n  margin-right: 2px;\r\n  vertical-align: top;\r\n  background-position: -110px 0px;\r\n}\r\n.rc-tree-icon__customize {\r\n  margin-right: 2px;\r\n  vertical-align: top;\r\n}\r\n.rc-tree-title {\r\n  display: inline-block;\r\n}\r\n.rc-tree-indent {\r\n  display: inline-block;\r\n  vertical-align: bottom;\r\n  height: 0;\r\n}\r\n.rc-tree-indent-unit {\r\n  width: 16px;\r\n  display: inline-block;\r\n}\r\n\r\n`","export const iconFolder = `data:image/png;base64,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`","type KeyName = 'up' | 'down' | 'ctrl' | 'shift' | 'alt'\r\n\r\nexport const onKey = (e:any, keyName:KeyName, action:Function) => {\r\n    e = e || window.event;\r\n    let codes:{[key in KeyName]:number} = {\r\n        up: 38,\r\n        down: 40,\r\n        ctrl: 17,\r\n        shift: 16,\r\n        alt: 18,\r\n    }\r\n    if (e.keyCode === codes[keyName]) {\r\n        action()\r\n    }\r\n}\r\n\r\n\r\n// export const initKeysLogic = ","import { isNumber } from \"lodash\";\r\n\r\nexport interface iUrlParams {\r\n    search?:string\r\n    folder?:string\r\n    file?:number\r\n}\r\nlet currentUrlParams:any = {}\r\n\r\nexport const listenToUrlChanges = (p:{\r\n    onUrlParamsChange:(urlParams:iUrlParams)=>void, \r\n    // onHashChange:(searchTerm:string)=>void\r\n}) => {\r\n    // window.onhashchange = () => { \r\n    //     let hash = window.location.hash.substr(1)\r\n    //     hash = decodeURI(hash)\r\n    //     if (hash.length > 0) {\r\n    //         console.log(`[HASH CHANGE]`, hash)\r\n    //         if (hash.startsWith('search[')) {\r\n    //         let searchTerm = hash.replaceAll('search[','').replaceAll(']','').replaceAll('_','-')\r\n    //         p.onHashChange(searchTerm)\r\n    //       }\r\n    //     }\r\n    //     window.location.hash = ''\r\n    // }\r\n\r\n    //@ts-ignore\r\n    window.log2 = console.log\r\n   \r\n    \r\n    window.onpopstate  = () => { \r\n        let newUrlParams = getUrlParams()\r\n        // console.log('ONPOPSTATE DETECTED'); \r\n        // console.log(JSON.stringify(newUrlParams),JSON.stringify(currentUrlParams)); \r\n        \r\n        if (JSON.stringify(newUrlParams) === JSON.stringify(currentUrlParams)) return\r\n        currentUrlParams = newUrlParams\r\n        // console.log('11 pop',currentUrlParams);\r\n        console.log('[URL CHANGE DETECTED]', newUrlParams);\r\n        p.onUrlParamsChange(newUrlParams)\r\n    }\r\n}\r\n\r\nexport const getUrlParams = ():iUrlParams => {\r\n    let urlParams:iUrlParams = {}\r\n    const queryString = window.location.search;\r\n    const urlParamsSearch = new URLSearchParams(queryString);\r\n    urlParams.search = urlParamsSearch.get('search') || undefined\r\n    urlParams.file = urlParamsSearch.get('file') ? parseInt(urlParamsSearch.get('file') as string) : undefined\r\n    urlParams.folder = urlParamsSearch.get('folder') || undefined\r\n    // console.log('[READING URL PARAMS]', urlParams);\r\n    return urlParams\r\n}\r\n\r\nexport const updateUrl = (urlParams:iUrlParams) => {\r\n    \r\n\r\n    let newUrl = `${window.location.protocol}//${window.location.host}/?`\r\n    if (isNumber(urlParams.file) && urlParams.file !== -1) newUrl += `file=${urlParams.file}&`\r\n\r\n    if (urlParams.folder && urlParams.folder !== ''  && !urlParams.search) newUrl += `folder=${urlParams.folder}&`\r\n\r\n    if (!urlParams.folder && !urlParams.search) newUrl += `folder=/&`\r\n\r\n    if (urlParams.search && urlParams.search !== '') newUrl += `search=${urlParams.search}&`\r\n\r\n    window.history.pushState({},document.title, newUrl)\r\n\r\n    currentUrlParams = getUrlParams()\r\n    // console.log('12 updateurl', currentUrlParams);\r\n}","import React from 'react';\r\n\r\nimport { iSocketEventsParams, socketEvents } from '../../shared/sockets/sockets.events';\r\nimport { clientSocket, initSocketConnection } from './managers/sockets/socket.manager';\r\nimport { bindEventManagerToSocketEvents, socketEventsManager } from './managers/sockets/eventsListener.sockets';\r\nimport { iFile, iFolder } from '../../shared/types.shared';\r\nimport { List, SortModes, SortModesLabels } from './components/List.component';\r\nimport { Editor } from './components/Editor.component';\r\nimport { SearchBar } from './components/SearchBar.component';\r\nimport { TreeView } from './components/TreeView.Component';\r\nimport { Global } from '@emotion/react'\r\nimport { CssApp, GlobalCssApp } from './managers/style.manager';\r\nimport { onKey } from './managers/keys.manager';\r\nimport { configClient } from './config';\r\nimport { debounce, filter, isNumber, sortBy } from 'lodash';\r\nimport { Icon } from './components/Icon.component';\r\nimport { getUrlParams, listenToUrlChanges, updateUrl, iUrlParams } from './managers/url.manager';\r\nimport { initClipboardListener } from './managers/clipboard.manager';\r\nimport { deviceType, MobileView } from './managers/device.manager';\r\n\r\n\r\nconst LocalStorageMixin = require('react-localstorage');\r\nconst reactMixin = require('react-mixin');\r\n@reactMixin.decorate(LocalStorageMixin)\r\nclass App extends React.Component<{\r\n}, {\r\n  files:iFile[], \r\n  activeFileIndex: number\r\n  activeFileContent: string | null\r\n  selectedFolder: string\r\n  searchTerm: string\r\n  isSearching: boolean\r\n  folderHierarchy: iFolder \r\n  hoverMode: boolean \r\n  ctrlPressed: boolean \r\n  multiSelectMode: boolean \r\n  multiSelectArray: number[] \r\n  sortMode: number\r\n  mobileView: MobileView\r\n  isSocketConnected: boolean\r\n}> {\r\n\r\n  static displayName = 'extrawurstApp';\r\n  constructor(props:any) {\r\n      super(props)\r\n      this.state = {\r\n        files: [],\r\n        folderHierarchy: {title: '', key: '', path: ''},\r\n        activeFileIndex: -1,\r\n        selectedFolder: '',\r\n        searchTerm: '',\r\n        activeFileContent: null,\r\n        isSearching: false,\r\n        ctrlPressed: false,\r\n        hoverMode: false,\r\n        multiSelectMode: false,\r\n        sortMode: 0,\r\n        multiSelectArray: [],\r\n        mobileView:'navigator', \r\n        isSocketConnected: false\r\n      }\r\n  }\r\n  listenerIds:number[] = []\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ////////////////////////////////////////////////////////////////////////////////\r\n  //  LIFECYCLE EVENTS\r\n  //////////////////////////////////////////////////////////////////////////////// \r\n  componentDidMount() {\r\n    console.log(`[APP] MOUNTED on a ${deviceType()}`);\r\n    this.toggleSocketConnection(false)\r\n    this.updatePageTitle()\r\n\r\n    // initClipboardListener()\r\n\r\n    this.initKeyboardShortcuts()\r\n\r\n    \r\n    initSocketConnection().then(() => {\r\n      this.toggleSocketConnection(true)\r\n\r\n      this.initUrlParamsLogic()\r\n\r\n      this.initSearchForContentLinks()\r\n\r\n      bindEventManagerToSocketEvents()\r\n      \r\n      // INITIAL REQUESTS (including a folder scan every minute)\r\n      setInterval(() => {\r\n        // this.askForFolderScan()\r\n      }, 1000 * 60)\r\n\r\n      // reload file details \r\n      this.state.activeFileIndex !== -1 && this.loadFileDetails(this.state.activeFileIndex)\r\n      this.askForFolderScan()\r\n      this.setState({ctrlPressed: false})\r\n\r\n      this.lastFolderIn = this.state.selectedFolder\r\n      this.lastSearchIn = this.state.searchTerm\r\n      this.listenerIds[0] = socketEventsManager.on(\r\n        socketEvents.getFiles, \r\n        (data:iSocketEventsParams.getFiles) => {  \r\n          this.onFolderFilesReceived(data)\r\n      })\r\n\r\n      this.listenerIds[1] = socketEventsManager.on(\r\n        socketEvents.getFileContent, \r\n        (data:iSocketEventsParams.getFileContent) => {  \r\n          this.setState({activeFileContent: data.fileContent})\r\n      })\r\n\r\n      this.listenerIds[2] = socketEventsManager.on(\r\n        socketEvents.getFolderHierarchy, \r\n        (data:iSocketEventsParams.getFolderHierarchy) => {  \r\n          this.setState({folderHierarchy: data.folder})\r\n      })\r\n\r\n      this.listenerIds[3] = socketEventsManager.on(socketEvents.disconnect, () => { this.toggleSocketConnection(false) })\r\n      this.listenerIds[4] = socketEventsManager.on(socketEvents.reconnect, () => {this.toggleSocketConnection(true) })\r\n      this.listenerIds[5] = socketEventsManager.on(socketEvents.connect, () => {this.toggleSocketConnection(true) })\r\n  })\r\n}\r\n\r\n\r\n\r\n  componentDidUpdate(prevProps:any, prevState:any) {\r\n    if (prevState.files !== this.state.files) {\r\n      if (this.state.activeFileIndex !== -1) {\r\n        this.loadFileDetails(this.state.activeFileIndex)\r\n      }\r\n    }\r\n    \r\n    // URL : check if folder/fileIndex/searchTerm changes, if yes, change URL accordingly\r\n    if (\r\n      prevState.activeFileIndex !== this.state.activeFileIndex ||\r\n      prevState.selectedFolder !== this.state.selectedFolder || \r\n      prevState.isSearching !== this.state.isSearching\r\n    ) this.updateAppUrl()\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this.listenerIds.forEach((id) => {\r\n      socketEventsManager.off(id)\r\n    })\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ////////////////////////////////////////////////////////////////////////////////\r\n  //  SUPPORT FUNCTIONS\r\n  ////////////////////////////////////////////////////////////////////////////////\r\n  intPageBlink:any\r\n  updatePageTitle = () => {\r\n    \r\n    let generateTitle = ():string => {\r\n      let newTitle = ''\r\n      if (window.location.host.includes(configClient.global.frontendPort.toString())) newTitle =  `Extrawurst (PROD ${configClient.version})`\r\n      else newTitle = `/!\\\\ DEV /!\\\\`\r\n      return newTitle\r\n    }\r\n  \r\n    let title\r\n    clearInterval(this.intPageBlink)\r\n    if (this.state.isSocketConnected) {\r\n       title =  `${generateTitle()} (Connected)`\r\n       console.log(13);\r\n    } else {\r\n      console.log(12);\r\n      \r\n      let warning1 = '(DISCONNECTED)'\r\n      let warning2 = '(/!\\\\ DISCONNECTED /!\\\\)'\r\n      let warning = warning1\r\n      title = `${generateTitle()} ${warning}`\r\n      this.intPageBlink = setInterval(() => {\r\n        warning = (warning === warning1) ? warning2 : warning1\r\n        title = `${generateTitle()} ${warning}`\r\n        document.title = title\r\n      }, 1000)\r\n    }\r\n    \r\n    document.title = title\r\n  }\r\n  \r\n    toggleSocketConnection = (state: boolean) => {\r\n      console.log(`[SOCKET CONNECTION TOGGLE] to ${state}`);\r\n      this.setState({isSocketConnected: state}) \r\n      setTimeout(() => {this.updatePageTitle()}, 100)\r\n    }\r\n  \r\n    toggleMobileView = (mobileView:MobileView) => {\r\n      // let mobileView:MobileView = this.state.mobileView === 'editor' ? 'navigator' : 'editor'\r\n      this.setState({mobileView})\r\n    }\r\n    \r\n    cleanFilesList = () => {\r\n      this.setState({files: []})\r\n    }\r\n    askForFolderFiles = (folderPath:string) => {\r\n      clientSocket.emit(socketEvents.askForFiles, {folderPath: folderPath} as iSocketEventsParams.askForFiles)\r\n    }\r\n    cleanAndAskForFolderFiles = (folderPath:string) => {\r\n      this.setState({isSearching: true})\r\n      this.cleanFilesList()\r\n      this.askForFolderFiles(folderPath)\r\n    }\r\n    askForFolderScan = () => {\r\n      clientSocket.emit(socketEvents.askFolderHierarchy, {folderPath: ''} as iSocketEventsParams.askFolderHierarchy)  \r\n    }\r\n  \r\n    moveFile = (initPath:string, endPath:string) => {\r\n      console.log(`[MOVEFILE] ${initPath} -> ${endPath}`);\r\n      clientSocket.emit(socketEvents.moveFile, {initPath, endPath, shouldRescan: true} as iSocketEventsParams.moveFile)  \r\n    }\r\n  \r\n    promptAndBatchMoveFiles = (folderpath:string) => {\r\n      let userAccepts = window.confirm(`Are you sure you want to move ${this.state.multiSelectArray.length} files and their resources to ${folderpath}`)\r\n      if (userAccepts) {\r\n        for (let i = 0; i < this.state.multiSelectArray.length; i++) {\r\n          const fileId = this.state.multiSelectArray[i];\r\n          let file = this.state.files[fileId]\r\n          let filenameArr = file.name.split('/')\r\n          // in case we are in research, the file.name === file.path\r\n          let realFileName = filenameArr[filenameArr.length-1]\r\n          this.moveFile(file.path, `${folderpath}/${realFileName}`)\r\n        }\r\n        this.cleanMultiSelect() \r\n        this.emptyFileDetails()\r\n      }\r\n    }\r\n    \r\n    \r\n  \r\n    sortFiles = (files:iFile[], sortMode:any):iFile[] => {\r\n      let sortedFiles\r\n      switch (SortModes[sortMode]) {\r\n        case 'none':\r\n          sortedFiles = sortBy(files, ['index'])\r\n          break;\r\n        case 'alphabetical':\r\n          sortedFiles = sortBy(files, [file => file.realname.toLocaleLowerCase()])\r\n          break;\r\n        case 'created':\r\n          sortedFiles = sortBy(files, ['created']).reverse()\r\n          break;\r\n        case 'modified':\r\n          sortedFiles = sortBy(files, ['modified']).reverse()\r\n          break;\r\n      \r\n        default:\r\n          sortedFiles = sortBy(files, ['index'])\r\n          break;\r\n      }\r\n  \r\n      return sortedFiles\r\n    }\r\n  \r\n    cleanMultiSelect = () => {\r\n      this.setState({ multiSelectMode: false, multiSelectArray: [] })\r\n    }\r\n  \r\n    emptyFileDetails = () => {\r\n      this.setState({activeFileIndex:-1, activeFileContent: null})\r\n    }\r\n  \r\n    loadFileDetails = (fileIndex:number) => {\r\n      console.log('loadfiledetails');\r\n      \r\n      let file = this.state.files[fileIndex]\r\n      \r\n      if (file && file.name.endsWith('.md')) {\r\n        this.setState({activeFileIndex:fileIndex, activeFileContent: null})\r\n        clientSocket.emit(socketEvents.askForFileContent, \r\n          {filePath: file.path} as iSocketEventsParams.askForFileContent)  \r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n  //////////////////////////////////////////////\r\n  //  KEYBOARD \r\n  //\r\n  initKeyboardShortcuts = () => {\r\n    window.onkeydown = (e:any) => {\r\n      onKey(e, 'up', () => {\r\n        let i = this.state.activeFileIndex  \r\n        if (i > 0) this.loadFileDetails(i-1)    \r\n      })\r\n      onKey(e, 'down', () => {\r\n        let i = this.state.activeFileIndex  \r\n        if (i < this.state.files.length - 1) this.loadFileDetails(i+1)   \r\n      })\r\n      onKey(e, 'ctrl', () => {\r\n        this.setState({ctrlPressed: true})\r\n      })\r\n    }\r\n    window.onkeyup = (e:any) => {\r\n      onKey(e, 'ctrl', () => {\r\n        this.setState({ctrlPressed: false})\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  //////////////////////////////////////////////\r\n  //  FOLDER LIST LOGIC\r\n  //\r\n  lastFolderIn:string = ''\r\n  lastSearchIn:string = ''\r\n  shouldLoadFirstNote: boolean = false\r\n  onFolderFilesReceived = (data:iSocketEventsParams.getFiles) => {\r\n    // only keep md files in file list\r\n    let files = filter(data.files, {extension: 'md'})\r\n\r\n    // sort them\r\n    files = this.sortFiles(files, this.state.sortMode)\r\n\r\n    this.setState({\r\n      files,\r\n      isSearching: data.temporaryResults ? true : false\r\n    })\r\n\r\n    // if activeFileIndex exists + is in length of files, load it\r\n    if (this.state.activeFileIndex !== -1 && this.state.activeFileIndex < files.length) {\r\n      this.loadFileDetails(this.state.activeFileIndex)\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (this.shouldLoadFirstNote) {\r\n        console.log(11, files.length);\r\n        \r\n        files.length >= 1 && this.loadFileDetails(0)\r\n        this.shouldLoadFirstNote = false\r\n      }\r\n      // ON LIST ITEMS CHANGES\r\n      if (this.state.selectedFolder !== this.lastFolderIn || this.state.searchTerm !== this.lastSearchIn) {\r\n        \r\n        // Load first item list \r\n        files.length >= 1 && this.loadFileDetails(0)\r\n        console.log(12, files.length);\r\n        this.lastFolderIn = this.state.selectedFolder\r\n        this.lastSearchIn = this.state.searchTerm\r\n        \r\n        // clean multiselect\r\n        this.cleanMultiSelect()\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n\r\n  //////////////////////////////////////////////\r\n  //  SEARCH LOGIC\r\n  //\r\n  initSearchForContentLinks = () => {\r\n    //@ts-ignore\r\n    window.ewTriggerSearch = (term:string) => {\r\n      console.log(`[SEARCH FROM LINK] for ${term}`);\r\n      term = term.replaceAll('_','-')\r\n      this.triggerSearch(term)\r\n    }\r\n  }\r\n\r\n  triggerSearch = (term:string) => {\r\n    console.log(`[APP -> TRIGGER SEARCH] ${term}`);\r\n    this.emptyFileDetails()\r\n    this.cleanFilesList()\r\n    this.cleanMultiSelect()\r\n    this.setState({ searchTerm: term, isSearching: true, selectedFolder: '', activeFileIndex: -1 })\r\n    clientSocket.emit(socketEvents.searchFor, {term} as iSocketEventsParams.searchFor) \r\n  }\r\n\r\n\r\n  //////////////////////////////////////////////\r\n  //  URL LOGIC\r\n  //\r\n\r\n  // ignore the first url change when page finishes loading\r\n  ignoreNextUrlChange:boolean = false\r\n\r\n  updateAppUrl = debounce(() => {\r\n    if (this.ignoreNextUrlChange) return this.ignoreNextUrlChange = false\r\n    console.log('[UPDATE APP URL]');\r\n    updateUrl ({\r\n      file: this.state.activeFileIndex, \r\n      folder: this.state.selectedFolder, \r\n      search: this.state.searchTerm\r\n    })\r\n  }, 200)\r\n\r\n  initUrlParamsLogic = () => {\r\n\r\n    // do a initial reading when finished loading\r\n    let newUrlParams = getUrlParams()\r\n    this.reactToUrlParams(newUrlParams)\r\n\r\n    listenToUrlChanges({\r\n      onUrlParamsChange: (newUrlParams) => {\r\n        // ignore url change due to state change from reaction of initial url change :S\r\n        this.ignoreNextUrlChange = true\r\n        this.reactToUrlParams(newUrlParams)\r\n      },\r\n    })\r\n  }\r\n\r\n  reactToUrlParams = (newUrlParams:iUrlParams) => {\r\n    if (newUrlParams.folder) {\r\n      console.log(110);\r\n      \r\n      let activeFileIndex = isNumber(newUrlParams.file) ? newUrlParams.file : -1\r\n      this.setState({selectedFolder: newUrlParams.folder, activeFileIndex, searchTerm: ''})\r\n      this.askForFolderFiles(newUrlParams.folder)\r\n    }\r\n    if (newUrlParams.search) {\r\n      console.log('reactToUrlParams -> triggersearch');\r\n      \r\n       this.triggerSearch(newUrlParams.search)\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ////////////////////////////////////////////////////////////////////////////////\r\n  //  RENDERING\r\n  ////////////////////////////////////////////////////////////////////////////////\r\n  render() { \r\n    return (\r\n      <CssApp v={this.state.mobileView} >\r\n        <Global styles={GlobalCssApp}  />\r\n        \r\n        <div className=\"main-wrapper\">\r\n              <div className=\"connection-status\">\r\n                  {this.state.isSocketConnected ? <div className=\"connected\">connected</div> : <div className=\"disconnected\">/!\\ DISCONNECTED /!\\</div>}\r\n              </div>\r\n\r\n            { \r\n              deviceType() !== 'desktop' &&\r\n              <div className='mobile-view-toggler'>\r\n                <button \r\n                  type=\"button\" \r\n                  onClick={(e) => { this.toggleMobileView('navigator')}}>\r\n                  Nav</button>\r\n                <button \r\n                  type=\"button\" \r\n                  onClick={(e) => { this.toggleMobileView('editor')}}>\r\n                  Edi</button>\r\n                <button \r\n                  type=\"button\" \r\n                  onClick={(e) => { this.toggleMobileView('preview')}}>\r\n                  Prev</button>\r\n                \r\n              </div>\r\n            }\r\n\r\n\r\n          <div className=\"left-wrapper\">\r\n\r\n            {\r\n              /////////////////////////////\r\n              // TREE\r\n              /////////////////////////////\r\n            }\r\n            <div className=\"left-wrapper-1\">\r\n              <TreeView \r\n                selected={this.state.selectedFolder}\r\n                folder={this.state.folderHierarchy}\r\n                onFolderClicked={(folderpath) => {\r\n                  // if multiselect not empty, prompt user, then move files into that\r\n                  if (this.state.multiSelectMode && this.state.multiSelectArray.length > 0) {\r\n                    this.promptAndBatchMoveFiles(folderpath)\r\n                  } else {\r\n                    // move from selected folder\r\n                    this.shouldLoadFirstNote = true\r\n                    this.setState({selectedFolder: folderpath, searchTerm:'', activeFileIndex: -1})\r\n                    this.cleanAndAskForFolderFiles(folderpath)\r\n                  }\r\n                }}\r\n                onFolderRightClicked = {(folderpath) => {\r\n                  clientSocket.emit(socketEvents.askForExplorer, \r\n                    {folderpath: folderpath} as iSocketEventsParams.askForExplorer) \r\n                }}\r\n              />\r\n\r\n              \r\n            </div>\r\n\r\n            {\r\n              /////////////////////////////\r\n              // SEARCH\r\n              /////////////////////////////\r\n            }\r\n            <div className=\"left-wrapper-2\">\r\n              <SearchBar \r\n                onSearchSubmit={() => {\r\n                    this.triggerSearch(this.state.searchTerm)\r\n                }}\r\n                onSearchTermUpdate={searchTerm => {this.setState({ searchTerm})}}\r\n                searchTerm={this.state.searchTerm}\r\n                isSearching={this.state.isSearching}\r\n                isListEmpty={this.state.files.length === 0 ? true : false}\r\n              />\r\n\r\n\r\n            <div className='list-toolbar'>\r\n            \r\n              { this.state.searchTerm === '' &&\r\n                <button onClick={(e) => {\r\n                    clientSocket.emit(socketEvents.createNote, \r\n                      {folderPath: this.state.selectedFolder} as iSocketEventsParams.createNote) \r\n                }}><Icon name=\"faStickyNote\" /></button>\r\n              }\r\n\r\n                {/* <input \r\n                  type=\"button\" \r\n                  value={this.state.hoverMode ? 'Hover:On' : 'Hover:Off'} \r\n                  onClick={e => this.setState({hoverMode: !this.state.hoverMode})}\r\n                /> */}\r\n\r\n                <button \r\n                  type=\"button\" \r\n                  title={this.state.multiSelectMode ? 'Select:On' : 'Select:Off'}\r\n                  onClick={e => this.setState({\r\n                    multiSelectMode: !this.state.multiSelectMode,\r\n                    multiSelectArray: []\r\n                  })}\r\n                > <Icon name=\"faCheckDouble\" /> </button>\r\n\r\n                <button \r\n                  type=\"button\" \r\n                  title='sort'\r\n                  onClick={e => {\r\n                    let newMode = this.state.sortMode + 1 >= SortModes.length ? 0 : this.state.sortMode + 1\r\n                    let files = this.sortFiles(this.state.files, newMode)\r\n                    this.setState({sortMode: newMode, files})\r\n                  }}\r\n                > <Icon name=\"faSort\" /> { this.state.sortMode !== 0 && SortModesLabels[this.state.sortMode] } </button>\r\n\r\n              { this.state.files.length > 0 &&\r\n                  <span className='items-list-count'>{this.state.files.length} els</span>\r\n              }\r\n\r\n            </div>\r\n\r\n\r\n\r\n              {\r\n              /////////////////////////////\r\n              // LIST\r\n              /////////////////////////////\r\n              }\r\n              <div className=\"list-wrapper\">\r\n                <List \r\n                  files={this.state.files} \r\n                  hoverMode={this.state.hoverMode}\r\n                  activeFileIndex={this.state.activeFileIndex}\r\n                  ctrlPressed={this.state.ctrlPressed}\r\n\r\n                  sortMode={this.state.sortMode}\r\n\r\n                  multiSelectArray={this.state.multiSelectArray}\r\n                  multiSelectMode={this.state.multiSelectMode}\r\n                  onMultiSelectChange={arr => this.setState({multiSelectArray:arr})}\r\n\r\n                  onFileClicked={(fileIndex) => {\r\n                    this.loadFileDetails(fileIndex)\r\n                  }}\r\n                  />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n\r\n\r\n          {\r\n          /////////////////////////////\r\n          // EDITOR NOTE DETAILS\r\n          /////////////////////////////\r\n          }\r\n          <div className=\"right-wrapper\">\r\n            <div className=\"note-wrapper\">\r\n              { \r\n                (this.state.activeFileIndex !== -1 && this.state.files[this.state.activeFileIndex]) && \r\n                  <Editor \r\n                    file={this.state.files[this.state.activeFileIndex]} \r\n                    fileContent={this.state.activeFileContent ? this.state.activeFileContent : ''} \r\n                    onFileEdited={(filepath, content) => {\r\n                      console.log(`[APP] API -> ask for file save`,{filepath, content});\r\n                      // this.askForFolderFiles(this.state.selectedFolder)\r\n                      clientSocket.emit(socketEvents.saveFileContent, \r\n                        {filepath: filepath, newFileContent: content} as iSocketEventsParams.saveFileContent)  \r\n                    }}\r\n                    onFilePathEdited={(initPath, endPath) => {\r\n                      console.log(`[APP] onFilePathEdited =>`,{initPath, endPath});\r\n                      this.emptyFileDetails()\r\n                      this.moveFile(initPath, endPath)\r\n                    }}\r\n                    onSavingHistoryFile={(filePath, content, historyFileType) => {\r\n                      console.log(`[APP] onSavingHistoryFile ${historyFileType} => ${filePath}`);\r\n                      clientSocket.emit(socketEvents.createHistoryFile, \r\n                        {filePath, content, historyFileType} as iSocketEventsParams.createHistoryFile)  \r\n                    }}\r\n                    onEditorDetached={(filepath) => {\r\n                      clientSocket.emit(socketEvents.askForNotepad, \r\n                        {filepath} as iSocketEventsParams.askForNotepad) \r\n\r\n                        setTimeout(() => {\r\n                          this.emptyFileDetails()\r\n                        }, 500)\r\n                    }}\r\n                    onFileDelete={(filepath) => {\r\n                      console.log(`[APP] onFileDelete => ${filepath}`);\r\n                      \r\n                      let i = this.state.activeFileIndex  \r\n                      if (i > 0) this.loadFileDetails(i-1)    \r\n                      else if (i < this.state.files.length - 2) this.loadFileDetails(i+1)   \r\n                      else this.emptyFileDetails()\r\n                      \r\n                      clientSocket.emit(socketEvents.onFileDelete, \r\n                        {filepath} as iSocketEventsParams.onFileDelete) \r\n                        \r\n                      this.askForFolderFiles(this.state.selectedFolder)\r\n                    }}\r\n                  />\r\n              }\r\n              { \r\n                this.state.activeFileIndex === -1 && \r\n                  <div>no file selected</div>\r\n              }\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n\r\n        </div>\r\n      </CssApp>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default App; //dd\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}